
<!DOCTYPE HTML>
<html>
    <head>
        <title>An Aldeburgh Musicircus</title>
        <meta name="viewport" content="width=device-width, maximum-scale=1, user-scalable=no, minimal-ui" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />

        <meta name="twitter:card" content="player">
        <meta name="twitter:site" content="@aldeburghmusic">
        <meta property="og:site_name" content="An Aldeburgh Musicircus">

        <meta property="og:url" content="https://musicircus.brittenpearsarts.org">
        <meta name="twitter:url" content="https://musicircus.brittenpearsarts.org">

        <meta property="og:title" content="An Aldeburgh Musicircus: the online experience">
        <meta name="twitter:title" content="An Aldeburgh Musicircus: the online experience">


        <meta property="og:image" content="https://i.ytimg.com/vi/Yv5BU2x0mnk/maxresdefault.jpg">
        <meta name="twitter:image" content="https://i.ytimg.com/vi/Yv5BU2x0mnk/maxresdefault.jpg">

        <meta property="og:description" content="Create your own John Cage happening with An Aldeburgh Musicircus: the online experience. Play with nearly 50 performances filmed at the Aldeburgh Festival to find your own combinations of sight and sound from the day. ">
        <meta name="twitter:description" content="Create your own John Cage happening with An Aldeburgh Musicircus: the online experience. Play with nearly 50 performances filmed at the Aldeburgh Festival to find your own combinations of sight and sound from the day. ">

        <meta property="og:type" content="video">
        <meta property="og:video" content="https://www.youtube.com/v/Yv5BU2x0mnk?autohide=1&amp;version=3">
        <meta property="og:video:secure_url" content="https://www.youtube.com/v/Yv5BU2x0mnk?autohide=1&amp;version=3">
        <meta property="og:video:type" content="application/x-shockwave-flash">
        <meta property="og:video:width" content="1280">
        <meta property="og:video:height" content="720">

        <meta name="twitter:player" content="https://www.youtube.com/embed/Yv5BU2x0mnk">
        <meta name="twitter:player:width" content="1280">
        <meta name="twitter:player:height" content="720">

        <!-- famo.us detection with modernizr -->
        <script type='text/javascript' src="js/modernizr.js"></script>
       

        <!-- mobile detection -->
        <script type='text/javascript' src="//wurfl.io/wurfl.js"></script>
        <script type="text/javascript">
            // WURFL.is_mobile = true;
            // window.debug = true;

        </script>
        
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-49181439-1', 'auto');
          ga('send', 'pageview');

        </script>


        <!-- shims for backwards compatibility -->
        <script type="text/javascript" src="js/functionPrototypeBind.js"></script>
        <script type="text/javascript" src="js/classList.js"></script>
        <script type="text/javascript" src="js/requestAnimationFrame.js"></script>

        <!-- module loader -->
        <script type="text/javascript" src="js/require.js"></script>

        <!-- famous -->
        <!--<link rel="stylesheet" type="text/css" href="http://code.famo.us/famous/0.2/famous.css" />
        <script type="text/javascript" src="http://code.famo.us/famous/0.2/famous.min.js"></script>-->
        <link rel="stylesheet" type="text/css" href="src/famous/dist/famous.css" />
        <script type="text/javascript" src="src/famous/dist/famous.js"></script>

        <!-- app code -->
        <link rel="stylesheet" type="text/css" href="css/app.css" />
        <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="ie-only.css" />
        <![endif]-->
        <script type="text/javascript">

        if(Modernizr.testAllProps('transformStyle', 'preserve-3d')){

  
            // console.log('navigator.userAgent' + navigator.userAgent);

            var canUseOpera = false;
            var opera = false;
            var isSafari = false;

            // // If Safari Go to Not Supported Page
            // if(navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)
            // {
            //     window.location.href = "musicircus-video.html";
            //     console.log("Safari");
            // }

            // console.log("Not Safari");

            // Is this a version of Opera?
            if (/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Opera/x.x or Opera x.x (ignoring remaining decimal places);
                var oprversion=new Number(RegExp.$1) // capture x.x portion and store as a number
                opera = true;
                if (oprversion>=15)
                {
                    canUseOpera = true;
                    console.log('canUseOpera = true;');
                }
                else
                {
                    canUseOpera = false;
                }
            }

            if(WURFL.is_mobile && !window.debug){
                var i = 0,
                    iOS = false,
                    iDevice = ['iPad', 'iPhone', 'iPod'];

                for ( ; i < iDevice.length ; i++ ) {
                    if( navigator.platform === iDevice[i] ){ iOS = true; break; }
                }

                if(iOS){
                    runFamous();
                } else {
                    var android = false;
                    var runFam = false;
                    var userAgent = navigator.userAgent || navigator.vendor || window.opera;
                    if( userAgent.match( /Android/i ) )
                      {
                        android = true;
                        if (userAgent.lastIndexOf('Chrome/') > 0) {
                                    var version = userAgent.substr(userAgent.lastIndexOf('Chrome/') + 7, 2);
                                    //alert("chrome " + version);
                                    if(version >= 36) {
                                        runFam = true;
                                    }
                                }
                        //window.alert(userAgent);
                      }
                    
                    if(runFam){
                        runFamous();
                    } else {
                        // redirect to non-famous page
                        if(android){
                            // android help here
                            window.location.href = "musicircus-video-android.html";
                        } else {
                            // stock cant use it page
                            window.location.href = "musicircus-video.html";
                        }
                        
                    }
                }
            } else {
                var uagent = navigator.userAgent.toLowerCase();
                if(/safari/.test(uagent) && !/chrome/.test(uagent))
                {
                    WURFL.is_mobile = true;
                    window.debug = true;
                    window.safari = true;
                }

                if(opera)
                {
                    window.location.href = "musicircus-video.html";
                }
                else
                {
                    runFamous();
                }
            }
        }
        else
        {

                // check if we're using greater than ie 10
              var ver = getInternetExplorerVersion();

              if ( ver > -1 ) {
                if ( ver >= 10.0 ) {
                    // alert('ie 10 plus');
                    window.ie = true;
                    if (ver == 10){
                        window.ieVersion = 10;
                    } else if (ver == 11) {
                        window.ieVersion = 11;
                    }
                    runFamous();
                } else{
                    // redirect to non-famous page
                    //alert('sorry this doesnt work on this device yet');
                    window.location.href = "musicircus-video.html";
                }
              } else {
                //false
                //alert('ver less than -1 famous does not work on this browser! ' + ver);
              }

              function getInternetExplorerVersion()
              // Returns the version of Internet Explorer or a -1
              // (indicating the use of another browser).
              {
                var rv = -1; // Return value assumes failure.
                // alert(navigator.appName);
                if (navigator.appName == 'Microsoft Internet Explorer')
                {
                    
                  var ua = navigator.userAgent;
                  // alert(ua)
                  var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                  if (re.exec(ua) != null)
                    rv = parseFloat( RegExp.$1 );
                } else if (navigator.appName == 'Netscape')
              {
                var ua = navigator.userAgent;
                var re  = new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");
                if (re.exec(ua) != null)
                  rv = parseFloat( RegExp.$1 );
              }
                return rv;
              }
            
        }
        function runFamous(){
            require.config({baseUrl: 'src/'});
            require(['main']);
        }
        </script>
    </head>
    <body>
        <div id="accessibility">
            <p>Welcome to the Aldeburgh Musicircus App. You can operate this app with the keyboard with the following keys:</p>
            <ul>
                <li>To reload the videos press <em>R</em></li>
                <li>To change the number of videos playing at once press <em>2</em>, <em>3</em> or <em>4</em></li>
            </ul>
            <p>To learn more about this app please visit <a href="musicircus-video.html">the alternative version of this webpage</a></p>
        </div>
        <div id="loading-text">
            Loading...
        </div>
    </body>
</html>

define(["require","exports","module"],function(t,o,e){function r(t,o,e,r){this.context=t,this.urlList=o,this.onload=e,this.audioPlayer=r,this.bufferList=new Array,this.loadCount=0}r.prototype.loadBuffer=function(t,o){var e=this,r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer";var i=this;r.onload=function(){i.context.decodeAudioData(r.response,function(t){t&&(i.bufferList[o]=t,++i.loadCount==i.urlList.length&&window.bufferStorage.push({urls:e.urlList,buffer:i.bufferList}),i.onload(i.bufferList,e.audioPlayer))},function(t){})},r.onerror=function(){},r.send()},r.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},e.exports=r});
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

define("famous/core/Entity",["require","exports","module"],function(t,e,i){function o(t){return a[t]}function n(t,e){a[t]=e}function s(t){var e=a.length;return n(e,t),e}function r(t){n(t,null)}var a=[];i.exports={register:s,unregister:r,get:o,set:n}}),define("famous/core/Transform",["require","exports","module"],function(t,e,i){function o(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function n(t){return Math.sqrt(o(t))}function s(t){return t<0?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],o=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],n=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,o,n])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var o=Math.cos(t),n=Math.sin(t),s=Math.cos(e),r=Math.sin(e),a=Math.cos(i),u=Math.sin(i);return[s*a,o*u+n*r*a,n*u-o*r*a,0,-s*u,o*a-n*r*u,n*a+o*r*u,0,r,-n*s,o*s,0,0,0,0,1]},r.rotateAxis=function(t,e){var i=Math.sin(e),o=Math.cos(e),n=1-o,s=t[0]*t[0]*n,r=t[0]*t[1]*n,a=t[0]*t[2]*n,u=t[1]*t[1]*n,h=t[1]*t[2]*n,l=t[2]*t[2]*n,c=t[0]*i,d=t[1]*i,p=t[2]*i;return[s+o,r+p,a-d,0,r-p,u+o,h+c,0,a+d,h-c,l+o,0,0,0,0,1]},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),o=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),n=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,o,n])},r.skew=function(t,e,i){return[1,Math.tan(e),0,0,Math.tan(i),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],n=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],h=t[0]*t[5]-t[1]*t[4],l=t[0]*e-t[1]*i+t[2]*o,c=1/l,d=[c*e,-c*n,c*a,0,-c*i,c*s,-c*u,0,c*o,-c*r,c*h,0,0,0,0,1];return d[12]=-t[12]*d[0]-t[13]*d[4]-t[14]*d[8],d[13]=-t[12]*d[1]-t[13]*d[5]-t[14]*d[9],d[14]=-t[12]*d[2]-t[13]*d[6]-t[14]*d[10],d},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=s(e[0]),a=n(e),u=[e[0]+i*a,e[1],e[2]],h=2/o(u);if(h>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];l[0]=1-h*u[0]*u[0],l[5]=1-h*u[1]*u[1],l[10]=1-h*u[2]*u[2],l[1]=-h*u[0]*u[1],l[2]=-h*u[0]*u[2],l[6]=-h*u[1]*u[2],l[4]=l[1],l[8]=l[2],l[9]=l[6];var c=r.multiply(l,t),d=[c[5],c[6]],p=s(d[0]),f=n(d),m=[d[0]+p*f,d[1]],g=2/o(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var v=r.multiply(y,l),w=r.multiply(v,t),b=r.scale(w[0]<0?-1:1,w[5]<0?-1:1,w[10]<0?-1:1);w=r.multiply(w,b),v=r.multiply(b,v);var _={};return _.translate=r.getTranslate(t),_.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],_.rotate[0]||(_.rotate[0]=0,_.rotate[2]=Math.atan2(v[4],v[5])),_.scale=[w[0],w[5],w[10]],_.skew=[Math.atan2(w[9],_.scale[2]),Math.atan2(w[8],_.scale[2]),Math.atan2(w[4],_.scale[0])],Math.abs(_.rotate[0])+Math.abs(_.rotate[2])>1.5*Math.PI&&(_.rotate[1]=Math.PI-_.rotate[1],_.rotate[1]>Math.PI&&(_.rotate[1]-=2*Math.PI),_.rotate[1]<-Math.PI&&(_.rotate[1]+=2*Math.PI),_.rotate[0]<0?_.rotate[0]+=Math.PI:_.rotate[0]-=Math.PI,_.rotate[2]<0?_.rotate[2]+=Math.PI:_.rotate[2]-=Math.PI),_},r.average=function(t,e,i){i=void 0===i?.5:i;for(var o=r.interpret(t),n=r.interpret(e),s={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;a<3;a++)s.translate[a]=(1-i)*o.translate[a]+i*n.translate[a],s.rotate[a]=(1-i)*o.rotate[a]+i*n.rotate[a],s.scale[a]=(1-i)*o.scale[a]+i*n.scale[a],s.skew[a]=(1-i)*o.skew[a]+i*n.skew[a];return r.build(s)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),o=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(o,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t!==e&&(!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10])},r.normalizeRotation=function(t){var e=t.slice(0);for(e[0]!==.5*Math.PI&&e[0]!==.5*-Math.PI||(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function o(){this.result={}}function n(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var s=t("./Transform");o._instance=new o,o.parse=function(t,e){return o._instance.parse(t,e)},o.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,s.identity),this.result},o.prototype.reset=function(){this.result={}};var r=[0,0];o.prototype._parseSpec=function(t,e,i){var o,a,u,h,l,c,d;if("number"==typeof t){if(o=t,u=e.transform,c=e.align||e.origin,e.size&&c&&(c[0]||c[1])){var p=[c[0]*e.size[0],c[1]*e.size[1],0];u=s.thenMove(u,n(p,i))}this.result[o]={transform:u,opacity:e.opacity,origin:e.origin||r,align:e.align||e.origin||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var f=0;f<t.length;f++)this._parseSpec(t[f],e,i);else{a=t.target,u=e.transform,h=e.opacity,l=e.origin,c=e.align,d=e.size;var m=i;if(void 0!==t.opacity&&(h=e.opacity*t.opacity),t.transform&&(u=s.multiply(e.transform,t.transform)),t.origin&&(l=t.origin,m=e.transform),t.align&&(c=t.align),t.size){var g=e.size;d=[void 0!==t.size[0]?t.size[0]:g[0],void 0!==t.size[1]?t.size[1]:g[1]],g&&(c||(c=l),c&&(c[0]||c[1])&&(u=s.thenMove(u,n([c[0]*g[0],c[1]*g[1],0],i))),l&&(l[0]||l[1])&&(u=s.moveThen([-l[0]*d[0],-l[1]*d[1],0],u))),m=e.transform,l=null,c=null}this._parseSpec(a,{transform:u,opacity:h,origin:l,align:c,size:d},m)}}},i.exports=o}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function o(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function n(t,e,i){for(var o=r.parse(t,e),a=Object.keys(o),u=0;u<a.length;u++){var h=a[u],l=s.get(h),c=o[h];c.allocator=e.allocator;var d=l.commit(c);d?n(d,e,i):i[h]=c}}var s=t("./Entity"),r=t("./SpecParser");o.prototype.add=function(t){var e=t instanceof o?t:new o(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},o.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},o.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=!!t.render,this._isModifier=!!t.modify,this._object=t,this._child=null,t instanceof o?t:this},o.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},o.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var o=e[i];if(void 0===this._resultCache[o]){var r=s.get(o);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},n(this.render(),t,this._resultCache)},o.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=o}),define("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function o(){this.listeners={},this._owner=this}o.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var o=0;o<i.length;o++)i[o].call(this._owner,e);return this},o.prototype.on=function(t,e){return t in this.listeners||(this.listeners[t]=[]),this.listeners[t].indexOf(e)<0&&this.listeners[t].push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(t,e){var i=this.listeners[t];if(void 0!==i){var o=i.indexOf(e);o>=0&&i.splice(o,1)}return this},o.prototype.bindThis=function(t){this._owner=t},i.exports=o}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function o(){n.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var n=t("./EventEmitter");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},o.setOutputHandler=function(t,e){e instanceof o&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},o.prototype.emit=function(t,e){n.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},o.prototype.trigger=o.prototype.emit,o.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream;return e.indexOf(t)<0&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},o.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0&&(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t)},o.prototype.on=function(t,e){if(n.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var o=0;o<this.upstream.length;o++)this.upstream[o].on(t,i)}return this},o.prototype.addListener=o.prototype.on,o.prototype.subscribe=function(t){if(this.upstream.indexOf(t)<0){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},o.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=o}),define("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function o(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}o.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},o.prototype.allocate=function(t){(t=t.toLowerCase())in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},o.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase();this.detachedNodes[e].push(t),this.nodeCount--},o.prototype.getNodeCount=function(){return this.nodeCount},i.exports=o}),define("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var o={};o.Direction={X:0,Y:1,Z:2},o.after=function(t,e){var i=t;return function(){0===--i&&e.apply(this,arguments)}},o.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},o.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},o.clone=function(t){var e;if("object"==typeof t){e={};for(var i in t)if("object"==typeof t[i]&&null!==t[i])if(t[i]instanceof Array){e[i]=new Array(t[i].length);for(var n=0;n<t[i].length;n++)e[i][n]=o.clone(t[i][n])}else e[i]=o.clone(t[i]);else e[i]=t[i]}else e=t;return e},i.exports=o}),define("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function o(t){this.method=t,this._instances=[],this.state=[]}var n=t("famous/utilities/Utility");o.SUPPORTS_MULTIPLE=!0,o.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},o.prototype.set=function(t,e,i){for(var o=n.after(t.length,i),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],e,o)},o.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=o}),define("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function n(t,e,i){return(1-i)*t+i*e}function s(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=o.getCurve(i.curve)),i}function a(t,e,i,o,n){var s,r=(i(n)-i(n-1e-7))/1e-7;if(t instanceof Array){s=[];for(var a=0;a<t.length;a++)"number"==typeof t[a]?s[a]=r*(t[a]-e[a])/o:s[a]=0}else s=r*(t-e)/o;return s}function u(t,e,i){var o;if(t instanceof Array){o=[];for(var s=0;s<t.length;s++)"number"==typeof t[s]?o[s]=n(t[s],e[s],i):o[s]=t[s]}else o=n(t,e,i);return o}o.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return t<=.5?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},o.SUPPORTS_MULTIPLE=!0,o.DEFAULT_OPTIONS={curve:o.Curves.linear,duration:500,speed:0};var h={};o.registerCurve=function(t,e){return!h[t]&&(h[t]=e,!0)},o.unregisterCurve=function(t){return!!h[t]&&(delete h[t],!0)},o.getCurve=function(t){var e=h[t];if(void 0!==e)return e;throw new Error("curve not registered")},o.getCurves=function(){return h},o.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=s(this.get()),e=r(e,this.options),e.speed){var o=this._startValue;if(o instanceof Object){var n=0;for(var a in o)n+=(t[a]-o[a])*(t[a]-o[a]);e.duration=Math.sqrt(n)/e.speed}else e.duration=Math.abs(t-o)/e.speed}this._startTime=Date.now(),this._endValue=s(t),this._startVelocity=s(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},o.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=s(t),this.velocity=s(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},o.prototype.getVelocity=function(){return this.velocity},o.prototype.get=function(t){return this.update(t),this.state},o.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(e<0)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var o=this._callback;this._callback=void 0,o()}},o.prototype.isActive=function(){return this._active},o.prototype.halt=function(){this.reset(this.get())},o.registerCurve("linear",o.Curves.linear),o.registerCurve("easeIn",o.Curves.easeIn),o.registerCurve("easeOut",o.Curves.easeOut),o.registerCurve("easeInOut",o.Curves.easeInOut),o.registerCurve("easeOutBounce",o.Curves.easeOutBounce),o.registerCurve("spring",o.Curves.spring),o.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=o}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function o(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function n(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],o=this.currentAction[1];o instanceof Object&&o.method?"string"==typeof(e=o.method)&&(e=a[e]):e=r,this._currentMethod!==e&&(!(i instanceof Object)||!0===e.SUPPORTS_MULTIPLE||i.length<=e.SUPPORTS_MULTIPLE?this._engineInstance=new e:this._engineInstance=new s(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(o.velocity=this.velocity),this._engineInstance.set(i,o,n.bind(this))}var s=t("./MultipleTransition"),r=t("./TweenTransition"),a={};o.registerMethod=function(t,e){return!(t in a)&&(a[t]=e,!0)},o.unregisterMethod=function(t){return t in a&&(delete a[t],!0)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var o=[t,e];return this.actionQueue.push(o),this.callbackQueue.push(i),this.currentAction||n.call(this),this},o.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},o.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},o.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},o.prototype.isActive=function(){return!!this.currentAction},o.prototype.halt=function(){return this.set(this.get())},i.exports=o}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function o(t){return[t.clientWidth,t.clientHeight]}function n(t){this.container=t,this._allocator=new a(t),this._node=new s,this._eventOutput=new r,this._size=o(this.container),this._perspectiveState=new h(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:l,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(o(this.container))}.bind(this))}var s=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),h=t("famous/transitions/Transitionable"),l=[0,0];n.prototype.getAllocator=function(){return this._allocator},n.prototype.add=function(t){return this._node.add(t)},n.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},n.prototype.getSize=function(){return this._size},n.prototype.setSize=function(t){t||(t=o(this.container)),this._size[0]=t[0],this._size[1]=t[1]},n.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},n.prototype.getPerspective=function(){return this._perspectiveState.get()},n.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},n.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},n.prototype.on=function(t,e){return this._eventOutput.on(t,e)},n.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},n.prototype.pipe=function(t){return this._eventOutput.pipe(t)},n.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=n}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function o(t){this._value=t,this.eventOutput=null}function n(){this.eventOutput=new s,this.eventOutput.bindThis(this),s.setOutputHandler(this,this.eventOutput)}var s=t("./EventHandler");o.patch=function(t,e){for(var i=new o(t),n=1;n<arguments.length;n++)i.patch(arguments[n]);return t},o.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var o in i)o in t&&i[o]&&i[o].constructor===Object&&t[o]&&t[o].constructor===Object?(t.hasOwnProperty(o)||(t[o]=Object.create(t[o])),this.key(o).patch(i[o]),this.eventOutput&&this.eventOutput.emit("change",{id:o,value:this.key(o).value()})):this.set(o,i[o])}return this},o.prototype.setOptions=o.prototype.patch,o.prototype.key=function(t){var e=new o(this._value[t]);return e._value instanceof Object&&!(e._value instanceof Array)||(e._value={}),e},o.prototype.get=function(t){return this._value[t]},o.prototype.getOptions=o.prototype.get,o.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},o.prototype.value=function(){return this._value},o.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function o(){w.runLoop?(c.step(),window.requestAnimationFrame(o)):g=!1}function n(t){for(var e=0;e<d.length;e++)d[e].emit("resize");v.emit("resize")}function s(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var r,a,u=t("./Context"),h=t("./EventHandler"),l=t("./OptionsManager"),c={},d=[],p=[],f=[],m=Date.now(),g=!0,y={},v=new h,w={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},b=new l(w);c.step=function(){var t=Date.now();if(!(a&&t-m<a)){var e=0;for(r=t-m,m=t,v.emit("prerender"),e=0;e<p.length;e++)p[e].call(this);for(p.splice(0);f.length&&Date.now()-t<10;)f.shift().call(this);for(e=0;e<d.length;e++)d[e].update();v.emit("postrender")}},window.requestAnimationFrame(o),window.addEventListener("resize",n,!1),n();c.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(c):v.pipe(t)},c.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(c):v.unpipe(t)},c.on=function(t,e){return t in y||(y[t]=v.emit.bind(v,t),document.body?document.body.addEventListener(t,y[t]):c.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,y[t]))),v.on(t,e)},c.emit=function(t,e){return v.emit(t,e)},c.removeListener=function(t,e){return v.removeListener(t,e)},c.getFPS=function(){return 1e3/r},c.setFPSCap=function(t){a=Math.floor(1e3/t)},c.getOptions=function(){return b.getOptions.apply(b,arguments)},c.setOptions=function(t){return b.setOptions.apply(b,arguments)},c.createContext=function(t){w.appMode&&s();var e=!1;t||(t=document.createElement(w.containerType),t.classList.add(w.containerClass),e=!0);var i=new u(t);return c.registerContext(i),e&&c.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},c.registerContext=function(t){return d.push(t),t},c.getContexts=function(){return d},c.deregisterContext=function(t){var e=d.indexOf(t);e>=0&&d.splice(e,1)},c.nextTick=function(t){p.push(t)},c.defer=function(t){f.push(t)},b.on("change",function(t){"fpsCap"===t.id?c.setFPSCap(t.value):"runLoop"===t.id&&!g&&t.value&&(g=!0,window.requestAnimationFrame(o))}),i.exports=c}),define("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,e,i){function o(t){return l.on(c,t),t}function n(t,e){var i=d(),n=function(){d()-i>=e&&(t.apply(this,arguments),l.removeListener(c,n))};return o(n)}function s(t,e){var i=d();return o(function(){d()-i>=e&&(t.apply(this,arguments),i=d())})}function r(t,e){if(void 0!==e){var i=function(){--e<=0&&(t.apply(this,arguments),u(i))};return o(i)}}function a(t,e){e=e||1;var i=e;return o(function(){--e<=0&&(t.apply(this,arguments),e=i)})}function u(t){l.removeListener(c,t)}function h(t,e){var i,o,s,r,a;return function(){o=this,a=arguments,s=d();var h=function(){var u=d-s;u<e?i=n(h,e-u):(i=null,r=t.apply(o,a))};return u(i),i=n(h,e),r}}var l=t("famous/core/Engine"),c="prerender",d=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:n,setInterval:s,debounce:h,after:r,every:a,clear:u}}),define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function o(t){this._final=r.identity.slice(),this.translate=new s([0,0,0]),this.rotate=new s([0,0,0]),this.skew=new s([0,0,0]),this.scale=new s([1,1,1]),t&&this.set(t)}function n(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var s=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");o.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},o.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},o.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=n.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},o.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},o.prototype.set=function(t,e,i){this._final=t;var o=r.interpret(t),n=i?a.after(4,i):null;return this.translate.set(o.translate,e,n),this.rotate.set(o.rotate,e,n),this.skew.set(o.skew,e,n),this.scale.set(o.scale,e,n),this},o.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},o.prototype.get=function(){return this.isActive()?n.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},o.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=o}),define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function o(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:s.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))}function n(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var s=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");o.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},o.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},o.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},o.prototype.alignFrom=function(t){
return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},o.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},o.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},o.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},o.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},o.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},o.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},o.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},o.prototype.getTransform=function(){return this._transformGetter()},o.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},o.prototype.getOpacity=function(){return this._opacityGetter()},o.prototype.getOrigin=function(){return this._originGetter()},o.prototype.getAlign=function(){return this._alignGetter()},o.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},o.prototype.modify=function(t){return n.call(this),this._output.target=t,this._output},i.exports=o}),define("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function o(t){this._transformState=new a(s.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._modifier=new n({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size))}var n=t("famous/core/Modifier"),s=t("famous/core/Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");o.prototype.setTransform=function(t,e,i){return this._transformState.set(t,e,i),this},o.prototype.setOpacity=function(t,e,i){return this._opacityState.set(t,e,i),this},o.prototype.setOrigin=function(t,e,i){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,e,i),this)},o.prototype.setAlign=function(t,e,i){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,e,i),this)},o.prototype.setSize=function(t,e,i){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,e,i),this)},o.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},o.prototype.getTransform=function(){return this._transformState.get()},o.prototype.getFinalTransform=function(){return this._transformState.getFinal()},o.prototype.getOpacity=function(){return this._opacityState.get()},o.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},o.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},o.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},o.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=o}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","famous/utilities/Utility"],function(t,e,i){function o(t){this._node=new r,this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||o.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var n=t("./EventHandler"),s=t("./OptionsManager"),r=t("./RenderNode"),a=t("famous/utilities/Utility");o.DEFAULT_OPTIONS={},o.prototype.getOptions=function(){return this._optionsManager.value()},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.add=function(){return this._node.add.apply(this._node,arguments)},o.prototype._add=o.prototype.add,o.prototype.render=function(){return this._node.render()},o.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=o}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function o(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new l,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=h.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function n(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}function s(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){t[12]=Math.round(t[12]*p)/p,t[13]=Math.round(t[13]*p)/p;for(var e="matrix3d(",i=0;i<15;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function u(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var h=t("./Entity"),l=t("./EventHandler"),c=t("./Transform"),d=void 0!==document.body.style.webkitTransform,p=window.devicePixelRatio||1;o.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},o.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},o.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this._eventOutput.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},o.prototype.pipe=function(t){return this._eventOutput.pipe(t)},o.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},o.prototype.render=function(){return this.id};var f;f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=r(e)}:d?function(t,e){t.style.webkitTransform=r(e)}:function(t,e){t.style.transform=r(e)};var m=d?function(t,e){t.style.webkitTransformOrigin=a(e)}:function(t,e){t.style.transformOrigin=a(e)},g=d?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};o.prototype.commit=function(t){var e=this._element;if(e){var i=t.transform,o=t.opacity,n=t.origin,s=t.size;if(!i&&this._matrix)return this._matrix=null,this._opacity=0,void g(e);if(u(this._origin,n)&&(this._originDirty=!0),u(this._size,s)&&(this._sizeDirty=!0),c.notEquals(this._matrix,i)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==o&&(this._opacity=o,e.style.opacity=o>=1?"0.999999":o),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._size||(this._size=[0,0]),this._size[0]=s[0],this._size[1]=s[1],this._sizeDirty=!1),this._originDirty&&(n?(this._origin||(this._origin=[0,0]),this._origin[0]=n[0],this._origin[1]=n[1]):this._origin=null,m(e,this._origin),this._originDirty=!1),i||(i=c.identity),this._matrix=i;var r=this._size?c.thenMove(i,[-this._size[0]*n[0],-this._size[1]*n[1],0]):i;f(e,r),this._transformDirty=!1}}},o.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},o.prototype.attach=function(t){this._element=t,n.call(this,t)},o.prototype.detach=function(){var t=this._element;return t&&(s.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=o}),define("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,e,i){function o(t){u.call(this),this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function n(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function s(t){for(var e in this.properties)t.style[e]=this.properties[e]}function r(t){for(var e in this.properties)t.style[e]=""}function a(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var u=t("./ElementOutput");o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},o.prototype.getProperties=function(){return this.properties},o.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},o.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},o.prototype.toggleClass=function(t){this.classList.indexOf(t)>=0?this.removeClass(t):this.addClass(t)},o.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},o.prototype.getClassList=function(){return this.classList},o.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},o.prototype.getContent=function(){return this.content},o.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)},o.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._transformDirty=!0},o.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e=this._currentTarget,i=t.size;if(this._classesDirty){n.call(this,e);for(var o=this.getClassList(),r=0;r<o.length;r++)e.classList.add(o[r]);this._classesDirty=!1}if(this._stylesDirty&&(s.call(this,e),this._stylesDirty=!1),this.size){var h=t.size;i=[this.size[0],this.size[1]],void 0===i[0]?i[0]=h[0]:!0===i[0]&&(i[0]=e.clientWidth),void 0===i[1]?i[1]=h[1]:!0===i[1]&&(i[1]=e.clientHeight)}a(this._size,i)&&(this._size||(this._size=[0,0]),this._size[0]=i[0],this._size[1]=i[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(e.style.width=this.size&&!0===this.size[0]?"":this._size[0]+"px",e.style.height=this.size&&!0===this.size[1]?"":this._size[1]+"px"),this._sizeDirty=!1),this._contentDirty&&(this.deploy(e),this._eventOutput.emit("deploy"),this._contentDirty=!1),u.prototype.commit.call(this,t)},o.prototype.cleanup=function(t){var e=0,i=this._currentTarget;this._eventOutput.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,r.call(this,i);var o=this.getClassList();for(n.call(this,i),e=0;e<o.length;e++)i.classList.remove(o[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);this.detach(i),this._currentTarget=null,t.deallocate(i)},o.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},o.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},o.prototype.getSize=function(){return this._size},o.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=o}),define("famous/utilities/KeyCodes",["require","exports","module"],function(t,e,i){var o={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};i.exports=o}),define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,e,i){function o(t){n.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new s(this._container),this.setContent(this._container)}var n=t("famous/core/Surface"),s=t("famous/core/Context");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),n.prototype.render.apply(this,arguments)},o.prototype.deploy=function(){return this._shouldRecalculateSize=!0,n.prototype.deploy.apply(this,arguments)},o.prototype.commit=function(t,e,i,o,s){var r=this._size?[this._size[0],this._size[1]]:null,a=n.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||r&&(this._size[0]!==r[0]||this._size[1]!==r[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),a},i.exports=o}),define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=b(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function n(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function s(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},n.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function h(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function l(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)h.call(this,i,t);e++}}function c(t,e){t.integrateVelocity(e)}function d(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity()}function p(t,e){t.integrateOrientation(e)}function f(t,e){t.integratePosition(e),t.emit("update",t)}function m(t){u.call(this,t),this.forEach(c,t),this.forEachBody(d,t),l.call(this,t),this.forEachBody(p,t),this.forEach(f,t)}function g(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e,e<i.sleepTolerance&&i.sleep()}),t}function y(){for(var t=0,e=this._forces.length-1;e>-1;e--)t+=this._forces[e].getEnergy()||0;return t}function v(){for(var t=0,e=this._constraints.length-1;e>-1;e--)t+=this._constraints[e].getEnergy()||0;return t}var w=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var b=function(){return Date.now}();o.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},o.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},o.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var o=0;o<Object.keys(this._agents).length;o++)this.detachFrom(o,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},o.prototype.attach=function(t,e,i){if(t instanceof Array){for(var o=[],n=0;n<t.length;n++)o[n]=s.call(this,t[n],e,i);return o}return s.call(this,t,e,i)},o.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},o.prototype.detach=function(t){var e=this.getAgent(t),i=n.call(this,e),o=i.indexOf(t);i.splice(o,1),delete this._agents[t]},o.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var o=i.targets,n=o.indexOf(e);n>-1&&o.splice(n,1)}},o.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},o.prototype.getAgent=function(t){return r.call(this,t).agent},o.prototype.getParticles=function(){return this._particles},o.prototype.getBodies=function(){return this._bodies},o.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},o.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),o=0,n=i.length;o<n;o++)t.call(this,i[o],e)},o.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),o=0,n=i.length;o<n;o++)t.call(this,i[o],e)},o.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},o.prototype.getEnergy=function(){return g.call(this)+y.call(this)+v.call(this)},o.prototype.step=function(){var t=b(),e=t-this._prevTime;this._prevTime=t,e<1e3/120||(e>17&&(e=17),m.call(this,17))},o.prototype.isSleeping=function(){return this._isSleeping},o.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},o.prototype.wake=function(){this._prevTime=b(),this.emit("start",this),this._isSleeping=!1},o.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},o.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new w),this._eventHandler.on(t,e)},i.exports=o}),define("famous/math/Vector",["require","exports","module"],function(t,e,i){function o(t,e,i){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function n(t,e,i){return this.x=t,this.y=e,this.z=i,this}function s(t){return n.call(this,t[0],t[1],t[2]||0)}function r(t){return n.call(this,t.x,t.y,t.z)}function a(t){return n.call(this,t,0,0)}var u=new o(0,0,0);o.prototype.add=function(t){return n.call(u,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return n.call(u,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.mult=function(t){return n.call(u,t*this.x,t*this.y,t*this.z)},o.prototype.div=function(t){return this.mult(1/t)},o.prototype.cross=function(t){var e=this.x,i=this.y,o=this.z,s=t.x,r=t.y,a=t.z;return n.call(u,o*r-i*a,e*a-o*s,i*s-e*r)},o.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.rotateX=function(t){var e=this.x,i=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(u,e,i*s-o*r,i*r+o*s)},o.prototype.rotateY=function(t){var e=this.x,i=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(u,o*r+e*s,i,o*s-e*r)},o.prototype.rotateZ=function(t){var e=this.x,i=this.y,o=this.z,s=Math.cos(t),r=Math.sin(t);return n.call(u,e*s-i*r,e*r+i*s,o)},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(u,this.mult(t/e)):n.call(u,t,0,0)},o.prototype.clone=function(){return new o(this)},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.set=function(t){return t instanceof Array?s.call(this,t):"number"==typeof t?a.call(this,t):r.call(this,t)},o.prototype.setXYZ=function(t,e,i){return n.apply(this,arguments)},o.prototype.set1D=function(t){return a.call(this,t)},o.prototype.put=function(t){this===u?r.call(t,u):r.call(t,this)},o.prototype.clear=function(){return n.call(this,0,0,0)},o.prototype.cap=function(t){if(t===1/0)return r.call(u,this);var e=this.norm();return e>t?r.call(u,this.mult(t/e)):r.call(u,this)},o.prototype.project=function(t){return t.mult(this.dot(t))},o.prototype.reflectAcross=function(t){return t.normalize().put(t),r(u,this.sub(this.project(t).mult(2)))},o.prototype.get=function(){return[this.x,this.y,this.z]},o.prototype.get1D=function(){return this.x},i.exports=o}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t)}var n=t("famous/core/OptionsManager");o.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.getOptions=function(){return this._optionsManager.value()},o.prototype.integrateVelocity=function(t,e){var i=t.velocity,o=t.inverseMass,n=t.force;n.isZero()||(i.add(n.mult(e*o)).put(i),n.clear())},o.prototype.integratePosition=function(t,e){var i=t.position,o=t.velocity;this.options.velocityCap&&o.cap(this.options.velocityCap).put(o),i.add(o.mult(e)).put(i)},o.prototype.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,o=t.torque;o.isZero()||(this.options.angularVelocityCap&&o.cap(this.options.angularVelocityCap).put(o),i.add(o.mult(e)).put(i),o.clear())},o.prototype.integrateOrientation=function(t,e){var i=t.orientation,o=t.angularVelocity;o.isZero()||i.add(i.multiply(o).scalarMultiply(.5*e)).put(i)},i.exports=o}),define("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function o(t){t=t||{},this.position=new s,this.velocity=new s,this.force=new s;var e=o.DEFAULT_OPTIONS;this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:e.mass,this.axis=void 0!==t.axis?t.axis:e.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function n(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var s=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),u=t("../integrators/SymplecticEuler");o.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},o.SLEEP_TOLERANCE=1e-7,o.AXES={X:0,Y:1,Z:2},o.INTEGRATOR=new u;var h={start:"start",update:"update",end:"end"},l=function(){return Date.now}();o.prototype.sleep=function(){this._isSleeping||(this.emit(h.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this.emit(h.start,this),this._isSleeping=!1,this._prevTime=l())},o.prototype.isBody=!1,o.prototype.setPosition=function(t){this.position.set(t)},o.prototype.setPosition1D=function(t){this.position.x=t},o.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},o.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},o.prototype.positionFrom=function(t){this._positionGetter=t},o.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},o.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},o.prototype.getVelocity=function(){return this.velocity.get()},o.prototype.getVelocity1D=function(){return this.velocity.x},o.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},o.prototype.getMass=function(){return this.mass},o.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},o.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},o.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},o.prototype.integrateVelocity=function(t){o.INTEGRATOR.integrateVelocity(this,t)},o.prototype.integratePosition=function(t){o.INTEGRATOR.integratePosition(this,t)},o.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},o.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},o.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.axis,i=this.transform;return void 0!==e&&(e&~o.AXES.X&&(t.x=0),e&~o.AXES.Y&&(t.y=0),e&~o.AXES.Z&&(t.z=0)),i[12]=t.x,i[13]=t.y,i[14]=t.z,i},o.prototype.modify=function(t){var e=this._spec;return e.transform=this.getTransform(),e.target=t,e},o.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},o.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return n.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return n.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,e,i){function o(t){this.force=new s(t),this._energy=0,this._eventOutput=null}function n(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var s=t("famous/math/Vector"),r=t("famous/core/EventHandler");o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},o.prototype.applyForce=function(t){t.applyForce(this.force)},o.prototype.getEnergy=function(){return this._energy},o.prototype.setEnergy=function(t){this._energy=t},o.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},o.prototype.addListener=function(){return n.call(this),this.addListener.apply(this,arguments)},o.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},o.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},o.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),n.call(this)}var n=t("./Force");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},o.DEFAULT_OPTIONS={strength:.01,forceFunction:o.FORCE_FUNCTIONS.LINEAR},o.prototype.applyForce=function(t){for(var e=this.options.strength,i=this.options.forceFunction,o=this.force,n=0;n<t.length;n++){var s=t[n];i(s.velocity).mult(-e).put(o),s.applyForce(o)}},o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=o}),define("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new l(0,0,0),u.call(this),h.call(this)}function n(t){this.forceFunction=t}function s(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function r(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function u(){n.call(this,this.options.forceFunction),s.call(this),r.call(this)}var h=t("./Force"),l=t("famous/math/Vector");o.prototype=Object.create(h.prototype),o.prototype.constructor=o;var c=Math.PI;o.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,o=Math.max(Math.min(t,i),-i);return o/(1-o*o/(e*e))},HOOK:function(t){return t}},o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:o.FORCE_FUNCTIONS.HOOK},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof l&&(this.options.anchor=t.anchor.position),t.anchor instanceof l&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new l(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),u.call(this)},o.prototype.applyForce=function(t,e){for(var i=this.force,o=this.disp,n=this.options,s=n.stiffness,r=n.damping,u=n.length,h=n.maxLength,l=n.anchor||e.position,c=0;c<t.length;c++){var d=t[c],p=d.position,f=d.velocity;l.sub(p).put(o);var m=o.norm()-u;if(0===m)return;var g=d.mass;s*=g,r*=g,o.normalize(s*this.forceFunction(m,h)).put(i),r&&(e?i.add(f.sub(e.velocity).mult(-r)).put(i):i.add(f.mult(-r)).put(i)),d.applyForce(i),e&&e.applyForce(i.mult(-1)),this.setEnergy(a(s,m))}},o.prototype.getEnergy=function(t){var e=this.options,i=e.length,o=e.anchor,n=e.stiffness,s=o.sub(t.position).norm()-i;return.5*n*s*s},o.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new l),this.options.anchor.set(t)},i.exports=o}),define("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function o(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}o.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},o.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return e<0||e>=this.array.length?null:this.array[e]},o.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},
o.Backing.prototype.reindex=function(t,e,i){if(this.array[0]){for(var o=0,n=this.firstIndex,s=i-e,r=this.firstNode;n<t-1;)r=r.getNext(),n++;var a=r;for(o=0;o<e;o++)(r=r.getNext())&&(r._previousNode=a);var u=r?r.getNext():null;for(a._nextNode=null,r=a,o=0;o<i;o++)r=r.getNext();if(n+=i,r!==u&&(r._nextNode=u,u&&(u._previousNode=r)),u)for(r=u,n++;r&&n<this.array.length+this.firstIndex;)r._nextNode?r.index+=s:r.index=n,r=r.getNext(),n++}},o.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},o.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},o.prototype.getIndex=function(){return this.index},o.prototype.toString=function(){return""+this.index},o.prototype.unshift=function(t){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},o.prototype.push=function(t){this._.array.push.apply(this._.array,arguments)},o.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},o.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var o=this._previousNode,n=this._nextNode,s=this.index,r=t._previousNode,a=t._nextNode,u=t.index;this.index=u,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=s,t._previousNode=o===t?this:o,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=n===t?this:n,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},o.prototype.get=function(){return this._.getValue(this.index)},o.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},o.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=o}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function o(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new n(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var n=t("./Context"),s=t("./Transform"),r=t("./Surface");o.SIZE_ZERO=[0,0],o.prototype=Object.create(r.prototype),o.prototype.elementType="div",o.prototype.elementClass="famous-group",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return r.prototype.render.call(this)},o.prototype.deploy=function(t){this.context.migrate(t)},o.prototype.recall=function(t){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},o.prototype.commit=function(t){var e=t.transform,i=t.origin,n=t.opacity,a=t.size,u=r.prototype.commit.call(this,{allocator:t.allocator,transform:s.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:n,origin:i,size:o.SIZE_ZERO});return a[0]===this._groupSize[0]&&a[1]===this._groupSize[1]||(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:s.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),u},i.exports=o}),define("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new l,this.group.add({render:u.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function n(t){t||(t=this._contextSize);var e=this.options.direction===p.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function s(t,e,i){var o=t.getSize?t.getSize():this._contextSize,s=this._outputFunction(e);return i.push({transform:s,target:t.render()}),n.call(this,o)}function r(){return this.options.clipSize?this.options.clipSize:n.call(this,this._contextSize)}function a(){for(var t=n.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;e&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=e,t=n.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;for(var i=this._node&&this._node.getPrevious?this._node.getPrevious():null;i&&this._position+this._positionOffset<0;){var o=n.call(this,i.getSize());this._positionOffset+=o,this._node=i,i=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function u(){var t=null,e=this._position,i=[];this._onEdge=0;for(var o=-this._positionOffset,u=r.call(this),h=this._node;h&&o-e<u+this.options.margin;)o+=s.call(this,h,o,i),h=h.getNext?h.getNext():null;var l=this._node,c=n.call(this,l.getSize());if(o<u){for(;l&&c<u;)(l=l.getPrevious())&&(c+=n.call(this,l.getSize()));for(l=this._node;l&&c<u;)(l=l.getNext())&&(c+=n.call(this,l.getSize()))}var d=void 0!==c&&c<u?c:u;for(!h&&o-e<=d?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:o-d})):!this._node.getPrevious()&&e<=0&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,o=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,o-=n.call(this,t));h&&o-e>-(r.call(this)+this.options.margin);)s.call(this,h,o,i),(h=h.getPrevious?h.getPrevious():null)&&(t=h.getSize?h.getSize():this._contextSize,o-=n.call(this,t));return a.call(this),i}var h=t("famous/core/Entity"),l=t("famous/core/Group"),c=t("famous/core/OptionsManager"),d=t("famous/core/Transform"),p=t("famous/utilities/Utility"),f=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:p.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1},o.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},o.prototype.onEdge=function(){return this._onEdge},o.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===p.Direction.X?d.translate(t,0):d.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e||function(e){return d.inverse(t(-e))}},o.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},o.prototype.getSize=function(t){return t?this._contextSize:this._size},o.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},o.prototype.commit=function(t){var e=t.transform,i=t.opacity,o=t.origin,n=t.size;this.options.clipSize||n[0]===this._contextSize[0]&&n[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=n[0],this._contextSize[1]=n[1],this.options.direction===p.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var s=this._masterOutputFunction(-this._position);return{transform:d.multiply(e,s),size:n,opacity:i,origin:o,target:this.group.render()}},i.exports=o}),define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(t,e){this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function n(t,e){r[t]&&(this._syncs[t]=new r[t](e),this.pipeSync(t))}var s=t("famous/core/EventHandler");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DIRECTION_Z=2;var r={};o.register=function(t){for(var e in t){if(r[e]){if(r[e]===t[e])return;throw new Error("this key is registered to a different sync class")}r[e]=t[e]}},o.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},o.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},o.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},o.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)n.call(this,t[e]);else if(t instanceof Object)for(var i in t)n.call(this,i,t[i])},i.exports=o}),define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",s.bind(this)),this._eventInput.on("wheel",s.bind(this)),this._inProgress=!1,this._loopBound=!1}function n(){if(this._inProgress&&h()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function s(t){t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,g=this._payload,g.slip=!0,g.position=this._position,g.clientX=t.clientX,g.clientY=t.clientY,g.offsetX=t.offsetX,g.offsetY=t.offsetY,this._eventOutput.emit("start",g),this._loopBound||(a.on("prerender",n.bind(this)),this._loopBound=!0));var e=h(),i=this._prevTime||e,s=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(s*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(s)>Math.abs(r)?r=0:s=0);var l,c,d=Math.max(e-i,u),p=s/d,f=r/d,m=this.options.scale;this.options.direction===o.DIRECTION_X?(c=m*s,l=m*p,this._position+=c):this.options.direction===o.DIRECTION_Y?(c=m*r,l=m*f,this._position+=c):(c=[m*s,m*r],l=[m*p,m*f],this._position[0]+=c[0],this._position[1]+=c[1]);var g=this._payload;g.delta=c,g.velocity=l,g.position=this._position,g.slip=!0,this._eventOutput.emit("update",g),this._prevTime=e,this._prevVel=l}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");o.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},o.DIRECTION_X=0,o.DIRECTION_Y=1;var u=8,h=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=o}),define("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:l(),count:e.touches.length,history:i}}function n(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=o(i,t,null);this.eventOutput.emit("trackstart",n),this.selective||this.touchHistory[i.identifier]||this.track(n)}}function s(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var s=o(i,t,n);this.touchHistory[i.identifier].push(s),this.eventOutput.emit("trackmove",s)}}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],n=this.touchHistory[i.identifier];if(n){var s=o(i,t,n);this.eventOutput.emit("trackend",s),delete this.touchHistory[i.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t,this.touchHistory={},this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",n.bind(this)),this.eventInput.on("touchmove",s.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var h=t("famous/core/EventHandler"),l=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=u}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a,u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",n.bind(this)),this._touchTracker.on("trackmove",s.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function n(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var o=this._payload;o.delta=i,o.position=this._position,o.velocity=e,o.clientX=t.x,o.clientY=t.y,o.count=t.count,o.touch=t.identifier,this._eventOutput.emit("start",o)}function s(t){var e=t.history,i=e[e.length-1],n=e[e.length-2],s=n.timestamp,r=i.timestamp,a=i.x-n.x,u=i.y-n.y;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var l,c,d=Math.max(r-s,h),p=a/d,f=u/d,m=this.options.scale;this.options.direction===o.DIRECTION_X?(c=m*a,l=m*p,this._position+=c):this.options.direction===o.DIRECTION_Y?(c=m*u,l=m*f,this._position+=c):(c=[m*a,m*u],l=[m*p,m*f],this._position[0]+=c[0],this._position[1]+=c[1]);var g=this._payload;g.delta=c,g.velocity=l,g.position=this._position,g.clientX=t.x,g.clientY=t.y,g.count=t.count,g.touch=t.identifier,this._eventOutput.emit("update",g)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),u=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},o.DIRECTION_X=0,o.DIRECTION_Y=1;var h=8;o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},o.prototype.getOptions=function(){return this.options},i.exports=o}),define("famous/views/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new _(this.options),this._node=null,this._physicsEngine=new g,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new w({anchor:[0,0,0]}),this.drag=new v({forceFunction:v.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new v({forceFunction:v.FORCE_FUNCTIONS.LINEAR}),this.sync=new R(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new b,this._eventOutput=new b,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),b.setInputHandler(this,this._eventInput),b.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=M.NONE,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new H,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(t),a.call(this)}function n(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),h.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function s(t){var e=-t.velocity,i=-t.delta;this._onEdge&&t.slip&&(e<0&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&n.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(this.getPosition()+i))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){h.call(this),this._onEdge&&p.call(this,this._edgeSpringPosition,M.EDGE),u.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),e<-i?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",n),this._eventInput.on("update",s),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function u(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function h(){this._springState=M.NONE,this._physicsEngine.detachAll()}function l(t){var e=this.options.direction,i=(t.getSize()||this._scroller.getSize())[e];return i||(i=this._scroller.getSize()[e]),i}function c(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===M.EDGE||p.call(this,this._edgeSpringPosition,M.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(h.call(this),u.call(this))),this._onEdge=t}function d(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==M.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,o=l.call(this,this._node),n=e>.5*o,s=t>0;n&&!i||i&&s?this.goToNextPage():p.call(this,0,M.PAGE),this._needsPaginationCheck=!1}}}function p(t,e){var i;e===M.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===M.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(h.call(this),this._springState=e,u.call(this)),this._springState=e}function f(){for(var t=this.getPosition(),e=l.call(this,this._node),i=this._node.getNext();t>e+P&&i;)m.call(this,-e),t-=e,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),e=l.call(this,this._node);for(var o,n=this._node.getPrevious();t<-P&&n;)o=l.call(this,n),this._scroller.sequenceFrom(n),this._node=n,m.call(this,o),t+=o,n=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===M.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===M.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),v=t("famous/physics/forces/Drag"),w=t("famous/physics/forces/Spring"),b=t("famous/core/EventHandler"),_=t("famous/core/OptionsManager"),S=t("famous/core/ViewSequence"),H=t("famous/views/Scroller"),T=t("famous/utilities/Utility"),R=t("famous/inputs/GenericSync"),C=t("famous/inputs/ScrollSync"),x=t("famous/inputs/TouchSync");R.register({scroll:C,touch:x});var P=.5,M={NONE:0,EDGE:1,PAGE:2};o.DEFAULT_OPTIONS={direction:T.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1},o.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},o.prototype.getPosition=function(){return this._particle.getPosition1D()},o.prototype.setPosition=function(t){this._particle.setPosition1D(t)},o.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},o.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},o.prototype.setOptions=function(t){t&&(void 0!==t.direction&&("x"===t.direction?t.direction=T.Direction.X:"y"===t.direction&&(t.direction=T.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this._scroller.setOptions(this.options),this.options.groupScroll?this._scroller.pipe(this._eventInput):this._scroller.unpipe(this._eventInput),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===T.Direction.X?R.DIRECTION_X:R.DIRECTION_Y})},o.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var e=this.getPosition(),i=l.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var o=e<P?-i:0;p.call(this,o,M.PAGE),m.call(this,i)}return this._eventOutput.emit("pageChange",{direction:-1}),t},o.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var e=this.getPosition(),i=l.call(this,this._node),o=l.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var n=e>i-P?i+o:i;p.call(this,n,M.PAGE),m.call(this,-i)}return this._eventOutput.emit("pageChange",{direction:1}),t},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new S({array:t})),this._node=t,this._scroller.sequenceFrom(t)},o.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},o.prototype.render=function(){return this._node?(f.call(this),c.call(this,this._scroller.onEdge()),this.options.paginated&&d.call(this),this._scroller.render()):null},i.exports=o}),define("famous/math/Utilities",["require","exports","module"],function(t,e,i){var o={};o.clamp=function(t,e){return Math.max(Math.min(t,e[1]),e[0])},o.length=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]*t[i];return Math.sqrt(e)},i.exports=o}),define("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventInput=new u,this._eventOutput=new u,u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",n.bind(this)),this._eventInput.on("mousemove",s.bind(this)),this._eventInput.on("mouseup",r.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1}function n(t){var e,i;t.preventDefault();var o=t.clientX,n=t.clientY;this._prevCoord=[o,n],this._prevTime=l(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var s=this._payload;s.delta=e,s.position=this._position,s.velocity=i,s.clientX=o,s.clientY=n,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this._eventOutput.emit("start",s)}function s(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,n=t.clientX,s=t.clientY,r=l(),a=n-e[0],u=s-e[1];this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var c,d,p=Math.max(r-i,h),f=a/p,m=u/p,g=this.options.scale;this.options.direction===o.DIRECTION_X?(d=g*a,c=g*f,this._position+=d):this.options.direction===o.DIRECTION_Y?(d=g*u,c=g*m,this._position+=d):(d=[g*a,g*u],c=[g*f,g*m],this._position[0]+=d[0],this._position[1]+=d[1]);var y=this._payload;y.delta=d,y.position=this._position,y.velocity=c,y.clientX=n,y.clientY=s,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("update",y),this._prevCoord=[n,s],this._prevTime=r,this._move=!0}}function r(t){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1)}function a(t){if(this._down&&this._move){var e=s.bind(this),i=function(t){r.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}var u=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0},o.DIRECTION_X=0,o.DIRECTION_Y=1;var h=8,l=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=o}),define("mods/Draggable",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new l([0,0]),this._differential=[0,0],this._active=!0,this.sync=new p({scroll:{minimumEndSpeed:1e3,rails:!1,scale:.3,stallTime:50,lineHeight:1},mouse:{scale:this.options.scale},touch:{scale:this.options.scale}}),this.eventOutput=new c,c.setInputHandler(this,this.sync),c.setOutputHandler(this,this.eventOutput),u.call(this)}function n(t){var e=this.options,i=e.projection,o=e.snapX,n=e.snapY,s=i&y.x?t[0]:0,r=i&y.y?t[1]:0;return o>0&&(s-=s%o),n>0&&(r-=r%n),[s,r]}function s(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var e=this.options;this._differential=t.position;var i=n.call(this,this._differential);this._differential[0]-=i[0],this._differential[1]-=i[1];var o=this.getPosition();if(o[0]+=i[0],o[1]+=i[1],e.xRange){var s=[e.xRange[0]+.5*e.snapX,e.xRange[1]-.5*e.snapX];o[0]=v(o[0],s)}if(e.yRange){var r=[e.yRange[0]+.5*e.snapY,e.yRange[1]-.5*e.snapY];o[1]=v(o[1],r)}this.eventOutput.emit("update",{position:o})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function u(){this.sync.on("start",s.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var h=t("famous/core/Transform"),l=t("famous/transitions/Transitionable"),c=t("famous/core/EventHandler"),d=t("famous/math/Utilities"),p=t("famous/inputs/GenericSync"),f=t("famous/inputs/MouseSync"),m=t("famous/inputs/ScrollSync"),g=t("famous/inputs/TouchSync");p.register({scroll:m,touch:g,mouse:f});var y={x:1,y:2};o.DIRECTION_X=y.x,o.DIRECTION_Y=y.y;var v=d.clamp;o.DEFAULT_OPTIONS={projection:y.x|y.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},o.prototype.setOptions=function(t){var e=this.options;if(void 0!==t.projection){var i=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==i.indexOf(t)&&(e.projection|=y[t])})}void 0!==t.scale&&(e.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(e.xRange=t.xRange),void 0!==t.yRange&&(e.yRange=t.yRange),void 0!==t.snapX&&(e.snapX=t.snapX),void 0!==t.snapY&&(e.snapY=t.snapY)},o.prototype.getPosition=function(){return this._positionState.get()},o.prototype.setRelativePosition=function(t,e,i){var o=this.getPosition(),n=[o[0]+t[0],o[1]+t[1]];this.setPosition(n,e,i)},o.prototype.setPosition=function(t,e,i){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,e,i)},o.prototype.activate=function(){this._active=!0},o.prototype.deactivate=function(){this._active=!1},o.prototype.toggle=function(){this._active=!this._active},o.prototype.modify=function(t){var e=this.getPosition();return{transform:h.translate(e[0],e[1]),target:t}},i.exports=o}),define("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function o(t){this._imageUrl=void 0,n.apply(this,arguments)}var n=t("famous/core/Surface"),s=[],r=[],a=[],u=!0;o.enableCache=function(){u=!0},o.disableCache=function(){u=!1},o.clearCache=function(){s=[],r=[],a=[]},o.getCache=function(){return{urlCache:s,countCache:r,nodeCache:r}},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.elementType="img",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(t){var e=s.indexOf(this._imageUrl);-1!==e&&(1===r[e]?(s.splice(e,1),r.splice(e,1),a.splice(e,1)):r[e]--),e=s.indexOf(t),-1===e?(s.push(t),r.push(1)):r[e]++,this._imageUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){var e=s.indexOf(this._imageUrl);if(void 0===a[e]&&u){var i=new Image;i.src=this._imageUrl||"",a[e]=i}t.src=this._imageUrl||""},o.prototype.recall=function(t){t.src=""},i.exports=o}),define("famous/transitions/Easing",["require","exports","module"],function(t,e,i){var o={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1),-1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},outElastic:function(t){var e=1.70158,i=0;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1),1*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},inOutElastic:function(t){var e=1.70158,i=0;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),
e=i/(2*Math.PI)*Math.asin(1),t<1?1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:1*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},inBounce:function(t){return 1-o.outBounce(1-t)},outBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return t<.5?.5*o.inBounce(2*t):.5*o.outBounce(2*t-1)+.5}};i.exports=o}),define("famous/physics/constraints/Constraint",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(){this.options=this.options||{},this._energy=0,this._eventOutput=null}function n(){this._eventOutput=new s,this._eventOutput.bindThis(this),s.setOutputHandler(this,this._eventOutput)}var s=t("famous/core/EventHandler");o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},o.prototype.applyConstraint=function(){},o.prototype.getEnergy=function(){return this._energy},o.prototype.setEnergy=function(t){this._energy=t},o.prototype.on=function(){return n.call(this),this.on.apply(this,arguments)},o.prototype.addListener=function(){return n.call(this),this.addListener.apply(this,arguments)},o.prototype.pipe=function(){return n.call(this),this.pipe.apply(this,arguments)},o.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},o.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new r,this.vDiff=new r,this.impulse1=new r,this.impulse2=new r,s.call(this)}function n(t,e,i){return Math.abs(t.dot(e)/i)}var s=t("./Constraint"),r=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var a=Math.PI;o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof r&&(this.options.anchor=t.anchor),t.anchor.position instanceof r&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new r(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period)},o.prototype.setAnchor=function(t){void 0!==this.options.anchor&&(this.options.anchor=new r),this.options.anchor.set(t)},o.prototype.getEnergy=function(t,e){var i=this.options,o=i.length,n=i.anchor||e.position,s=Math.pow(2*a/i.period,2),r=n.sub(t.position).norm()-o;return.5*s*r*r},o.prototype.applyConstraint=function(t,e,i){for(var o=this.options,s=this.pDiff,r=this.vDiff,u=this.impulse1,h=this.impulse2,l=o.length,c=o.anchor||e.position,d=o.period,p=o.dampingRatio,f=0;f<t.length;f++){var m=t[f],g=m.position,y=m.velocity,v=m.mass,w=m.inverseMass;s.set(g.sub(c));var b,_=s.norm()-l;if(e){var S=e.inverseMass,H=e.velocity;r.set(y.sub(H)),b=1/(w+S)}else r.set(y),b=v;var T,R;if(0===this.options.period)T=0,R=1;else{var C=4*b*a*a/(d*d),x=4*b*a*p/d;R=i*C/(x+i*C),T=1/(x+i*C)}var P=R/i*_;s.normalize(-P).sub(r).mult(i/(T+i/b)).put(u),m.applyImpulse(u),e&&(u.mult(-1).put(h),e.applyImpulse(h)),this.setEnergy(n(u,s,i))}},i.exports=o}),define("famous/transitions/SnapTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(t,e,i){function o(t){t=t||0,this.endState=new w(t),this.initState=new w,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.particle=new y,this.spring=new v({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function s(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(t){this.endState.set(t),s.call(this)}function a(){this.PE.wake()}function u(){this.PE.sleep()}function h(t){this.particle.position.set(t)}function l(t){this.particle.velocity.set(t)}function c(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function d(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function p(t){this._callback=t}function f(t){var e=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),l.call(this,t.velocity)}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(h.call(this,this.endState),l.call(this,[0,0,0]),u.call(this))}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),v=t("famous/physics/constraints/Snap"),w=t("famous/math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},o.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),h.call(this,t),r.call(this,t),e&&l.call(this,e),p.call(this,void 0)},o.prototype.getVelocity=function(){return d.call(this)},o.prototype.setVelocity=function(t){this.call(this,l(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return m.call(this),c.call(this)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());this._dimensions=t instanceof Array?t.length:0,a.call(this),f.call(this,e),r.call(this,t),p.call(this,i)},i.exports=o}),define("famous/transitions/SpringTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(t,e,i){function o(t){t=t||0,this.endState=new w(t),this.initState=new w,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.spring=new v({anchor:this.endState}),this.particle=new y,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function s(t){this.particle.setPosition(t)}function r(t){this.particle.setVelocity(t)}function a(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function u(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function h(t){this._callback=t}function l(){this.PE.wake()}function c(){this.PE.sleep()}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else n.call(this)<this._absRestTolerance&&(s.call(this,this.endState),r.call(this,[0,0,0]),c.call(this))}function p(t){var e=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),r.call(this,t.velocity)}function f(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function m(t){this.endState.set(t),f.call(this)}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),v=t("famous/physics/forces/Spring"),w=t("famous/math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},o.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),s.call(this,t),m.call(this,t),e&&r.call(this,e),h.call(this,void 0)},o.prototype.getVelocity=function(){return u.call(this)},o.prototype.setVelocity=function(t){this.call(this,r(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return d.call(this),a.call(this)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());this._dimensions=t instanceof Array?t.length:0,l.call(this),p.call(this,e),m.call(this,t),h.call(this,i)},i.exports=o}),define("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,e,i){function o(t){h.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=o.DefaultMap.transform,this.inOpacityMap=o.DefaultMap.opacity,this.inOriginMap=o.DefaultMap.origin,this.outTransformMap=o.DefaultMap.transform,this.outOpacityMap=o.DefaultMap.opacity,this.outOriginMap=o.DefaultMap.origin,this._output=[]}function n(t,e){return t(e.get())}var s=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),u=t("famous/transitions/Transitionable"),h=t("famous/core/View");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},o.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},o.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},o.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},o.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},o.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},o.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},o.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},o.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide()}var o=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,o=this._states[a],o.halt();var h=this._outgoingRenderables.indexOf(t);h>=0&&this._outgoingRenderables.splice(h,1)}else{o=new u(0);var l=new s({transform:this.inTransformMap?n.bind(this,this.inTransformMap,o):null,opacity:this.inOpacityMap?n.bind(this,this.inOpacityMap,o):null,origin:this.inOriginMap?n.bind(this,this.inOriginMap,o):null}),c=new r;c.add(l).add(t),this._showing=this._nodes.length,this._nodes.push(c),this._modifiers.push(l),this._states.push(o),this._renderables.push(t)}e||(e=this.options.inTransition),o.set(1,e,i)},o.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var o=this._nodes[i],s=this._modifiers[i],r=this._states[i],a=this._renderables[i];s.transformFrom(this.outTransformMap?n.bind(this,this.outTransformMap,r):null),s.opacityFrom(this.outOpacityMap?n.bind(this,this.outOpacityMap,r):null),s.originFrom(this.outOriginMap?n.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,i,o,n){if(this._outgoingRenderables.indexOf(n)>=0){var s=this._nodes.indexOf(t);this._nodes.splice(s,1),this._modifiers.splice(s,1),this._states.splice(s,1),this._renderables.splice(s,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(n),1),this._showing>=s&&this._showing--}e&&e.call(this)}.bind(this,o,s,r,a))}},o.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=o}),define("famous/modifiers/Draggable",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new l([0,0]),this._differential=[0,0],this._active=!0,this.sync=new p(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new c,c.setInputHandler(this,this.sync),c.setOutputHandler(this,this.eventOutput),u.call(this)}function n(t){var e=this.options,i=e.projection,o=e.snapX,n=e.snapY,s=i&g.x?t[0]:0,r=i&g.y?t[1]:0;return o>0&&(s-=s%o),n>0&&(r-=r%n),[s,r]}function s(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var e=this.options;this._differential=t.position;var i=n.call(this,this._differential);this._differential[0]-=i[0],this._differential[1]-=i[1];var o=this.getPosition();if(o[0]+=i[0],o[1]+=i[1],e.xRange){var s=[e.xRange[0]+.5*e.snapX,e.xRange[1]-.5*e.snapX];o[0]=y(o[0],s)}if(e.yRange){var r=[e.yRange[0]+.5*e.snapY,e.yRange[1]-.5*e.snapY];o[1]=y(o[1],r)}this.eventOutput.emit("update",{position:o})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function u(){this.sync.on("start",s.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var h=t("famous/core/Transform"),l=t("famous/transitions/Transitionable"),c=t("famous/core/EventHandler"),d=t("famous/math/Utilities"),p=t("famous/inputs/GenericSync"),f=t("famous/inputs/MouseSync"),m=t("famous/inputs/TouchSync");p.register({mouse:f,touch:m});var g={x:1,y:2};o.DIRECTION_X=g.x,o.DIRECTION_Y=g.y;var y=d.clamp;o.DEFAULT_OPTIONS={projection:g.x|g.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},o.prototype.setOptions=function(t){var e=this.options;if(void 0!==t.projection){var i=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==i.indexOf(t)&&(e.projection|=g[t])})}void 0!==t.scale&&(e.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(e.xRange=t.xRange),void 0!==t.yRange&&(e.yRange=t.yRange),void 0!==t.snapX&&(e.snapX=t.snapX),void 0!==t.snapY&&(e.snapY=t.snapY)},o.prototype.getPosition=function(){return this._positionState.get()},o.prototype.setRelativePosition=function(t,e,i){var o=this.getPosition(),n=[o[0]+t[0],o[1]+t[1]];this.setPosition(n,e,i)},o.prototype.setPosition=function(t,e,i){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,e,i)},o.prototype.activate=function(){this._active=!0},o.prototype.deactivate=function(){this._active=!1},o.prototype.toggle=function(){this._active=!this._active},o.prototype.modify=function(t){var e=this.getPosition();return{transform:h.translate(e[0],e[1]),target:t}},i.exports=o}),define("audio/BufferLoader",["require","exports","module"],function(t,e,i){function o(t,e,i,o){this.context=t,this.urlList=e,this.onload=i,this.audioPlayer=o,this.bufferList=new Array,this.loadCount=0}o.prototype.loadBuffer=function(t,e){var i=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer";var n=this;o.onload=function(){n.context.decodeAudioData(o.response,function(t){t&&(n.bufferList[e]=t,++n.loadCount==n.urlList.length&&window.bufferStorage.push({urls:i.urlList,buffer:n.bufferList}),n.onload(n.bufferList,i.audioPlayer))},function(t){})},o.onerror=function(){},o.send()},o.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},i.exports=o}),define("audio/AudioPlayer",["require","exports","module","famous/core/View","famous/core/Surface","famous/utilities/Timer","famous/modifiers/StateModifier","famous/transitions/Transitionable","famous/core/Transform","famous/core/Modifier","famous/surfaces/ImageSurface","famous/views/RenderController","famous/surfaces/ContainerSurface","audio/BufferLoader"],function(t,e,i){function o(){u.apply(this,arguments),this.rootModifier=new c({size:this.options.size,align:[0,0],origin:[0,0]}),this.mainNode=this.add(this.rootModifier);this.playing=!1,this.context=window.audioContext,this.myAudioAnalyser=this.context.createAnalyser(),this.myAudioAnalyser.smoothingTimeConstant=.85,this.myAudioAnalyser.connect(this.context.destination),this.mySpectrum,this.bufferLoader,this.buffer,this.volume=.5,this.audioTimer,this.urls=[this.options.url],this.playable=!1,this.spectrumLength=16,this.spectrumWidth=1,this.loading=!1,this.loadSurface=new g({size:[void 0,!0],align:[0,.5],zIndex:1e3});var t=new p({origin:[.5,.5],align:[0,.5]});this.renderController=new m,this.add(t).add(this.renderController),s.call(this)}function n(t,e){e.buffer=t[0],e.play(),e.changeVolume(e.volume),e.renderController.hide(e.loadSurface),this.loading=!1}function s(){var t=this;this.spectrumArray=[];for(var e=0;e<this.spectrumLength;e++){var i=new h({properties:{backgroundColor:"#fff",zIndex:100,pointerEvents:"none"}}),o=.2+e/this.spectrumLength*.6,n=new p({size:[this.spectrumWidth,0],origin:[0,.5],align:[o,.5],transform:function(){return d.translate(-t.spectrumWidth/2,0,0)}});this.add(n).add(i),this.spectrumArray.push(n)}}function r(){l.clear(this.spectrumTimer),l.clear(this.clearSpectrumTimer),this.spectrumTimer=null,this.clearSpectrumTimer=null;for(var t=0;t<this.spectrumLength;t++)this.spectrumArray[t].setSize([this.spectrumWidth,0])}function a(){var t=new Uint8Array(this.myAudioAnalyser.frequencyBinCount);this.myAudioAnalyser.getByteFrequencyData(t);for(var e=0,i=0;i<128;i+=128/this.spectrumLength){var o=this.volume;if(o<.3)var o=.3;var n=t[i]*o,s=this.options.imageHieght*n/512;this.spectrumArray[e].setSize([this.spectrumWidth,s]),e++}}var u=t("famous/core/View"),h=t("famous/core/Surface"),l=t("famous/utilities/Timer"),c=t("famous/modifiers/StateModifier"),d=(t("famous/transitions/Transitionable"),t("famous/core/Transform")),p=t("famous/core/Modifier"),f=t("famous/surfaces/ImageSurface"),m=t("famous/views/RenderController"),g=t("famous/surfaces/ContainerSurface"),y=t("audio/BufferLoader");o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.prototype.loadBuffers=function(){if(!this.loading){this.loading=!0;var t=new f({origin:[.5,.5],size:[50,50],content:"images/loader.png",zIndex:1e3}),e=Date.now(),i=new p({origin:[.5,.5],transform:function(){return d.rotateZ(.005*(Date.now()-e))}});this.loadSurface.add(i).add(t),this.renderController.show(this.loadSurface)}this.stop();for(var o=!1,s=0;s<window.bufferStorage.length;s++)if(window.bufferStorage[s].urls[0]===this.urls[0]){o=!0;var r=s}o?n(window.bufferStorage[r].buffer,this):(this.bufferLoader=new y(this.context,this.urls,n,this),this.bufferLoader.load())},o.prototype.play=function(){var t=this;this.audioControl=function(e){var i=t.context.createBufferSource(),o=t.context.createGain?t.context.createGain():t.context.createGainNode();i.buffer=e,l.clear(t.audioTimer),t.audioTimer=null,t.audioTimer=l.setTimeout(function(){t.options.parent.audioEnded(),l.clear(t.audioTimer)},1e3*i.buffer.duration+4e3),console.log(i.buffer.duration),i.connect(o),o.connect(t.context.destination),o.connect(t.myAudioAnalyser);return{source:i,gainNode:o}}(this.buffer),this.audioControl.gainNode.gain.value=0,this.audioControl.source.start?this.audioControl.source.start(0):this.audioControl.source.noteOn(0),this.spectrumTimer=l.setInterval(function(){a.call(t)},60),this.playable||this.stop()},o.prototype.stop=function(){this.audioControl&&(this.audioControl.source.stop?this.audioControl.source.stop(0):this.audioControl.source.noteOff(0)),r.call(this),l.clear(this.audioTimer)},o.prototype.crossfade=function(t){this.audioControl.gainNode.gain.value=t},o.prototype.changeVolume=function(t){this.audioControl&&(this.audioControl.gainNode.gain.value=t,this.volume=t)},o.prototype.setVolume=function(t){this.volume=t},o.prototype.toggle=function(){this.playing?this.stop():this.play(),this.playing=!this.playing},o.DEFAULT_OPTIONS={size:"size",hud:"hud",context:"context",url:"url",parent:"parent"},i.exports=o}),define("views/MobileColumnItemView",["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/RenderController","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/surfaces/ImageSurface","famous/transitions/Transitionable","famous/transitions/SpringTransition","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/modifiers/Draggable","audio/AudioPlayer"],function(t,e,i){function o(){r.apply(this,arguments),this.rootModifier=new c({size:[void 0,this.options.size[1]],align:[0,0],origin:[0,0]}),this.mainNode=this.add(this.rootModifier),this.isMobile=this.options.isMobile,this.itemPhoto,this.context=this.options.audioContext,this.audioPlayer=new m({size:[void 0,this.options.size[1]],hud:this,context:this.context,url:this.options.audio,itemBackgroundColor:this.options.itemBackgroundColor,parent:this,imageHieght:this.options.size[1]-this.options.margin}),this.background=new u({content:"background",size:[void 0,this.options.size[1]-this.options.margin],properties:{backgroundColor:this.options.itemBackgroundColor,textAlign:"center",pointerEvents:"none"}}),this.playing=!1,this.mainNode.add(this.background),this.background.pipe(this._eventOutput),this.isMobile,this.pointerEvents="none",n.call(this),s.call(this)}function n(){var t=this,e=10+(t.options.gutterWidth+2)/2+"px",i=10+(t.options.gutterWidth+2)/2+"px";switch(t.options.numberColumns){case 2:0==t.options.columnNumber?(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"):(e=String(10+(t.options.gutterWidth+2)/2)+"px",i="10px");break;case 3:0==t.options.columnNumber&&(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"),2==t.options.columnNumber&&(e=10+(t.options.gutterWidth+2)/2+"px",i="10px");break;case 4:0==t.options.columnNumber&&(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"),3==t.options.columnNumber&&(e=10+(t.options.gutterWidth+2)/2+"px",i="10px")}this.titleSurface=new a({content:this.options.playerTitle,size:[void 0,!0],properties:{backgroundColor:"hsl(10,10,10)",lineHeight:"20px",textAlign:"center",zIndex:10,pointerEvents:"none",userSelect:"none",paddingLeft:e,paddingRight:i},classes:["youtube-title",t.options.darkOrLight]});var o=new c({origin:[.5,0],align:[.5,.05]});this.background.add(o).add(this.titleSurface)}function s(){this.itemPhoto=new d({size:[void 0,!0],content:"images/photos/"+this.options.photoUrl,properties:{zIndex:2,pointerEvents:"none",display:"block"}});var t=new l({origin:[0,.5],align:[0,.5],opacity:function(){}}),e=new l({transform:function(){return h.translate(0,0,10)}}),i=this.background.add(t);i.add(this.itemPhoto),i.add(e).add(this.audioPlayer)}var r=t("famous/core/View"),a=t("famous/core/Surface"),u=t("famous/surfaces/ContainerSurface"),h=(t("famous/views/RenderController"),t("famous/core/Transform")),l=t("famous/core/Modifier"),c=t("famous/modifiers/StateModifier"),d=t("famous/surfaces/ImageSurface"),p=t("famous/transitions/Transitionable"),f=t("famous/transitions/SpringTransition"),m=(t("famous/inputs/MouseSync"),t("famous/inputs/TouchSync"),t("famous/modifiers/Draggable"),t("audio/AudioPlayer"));p.registerMethod("spring",f);o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[void 0,!0],align:[0,0],playerId:"player",title:"title",id:0,playerSize:[100,100],xpos:0,ypos:0,parent:this,isMobile:!1,audioContext:"audioContext",audio:"audio",darkOrLight:"darkOrLight",photoUrl:"url"};o.prototype.audioEnded=function(){this.options.parent.snapRandomPlay.call(this.options.parent)},o.prototype.changeVolume=function(t){this.audioPlayer.changeVolume(t/100)},o.prototype.pauseMedia=function(t){this.stopAudio.call(this)},o.prototype.setVolume=function(t){this.volume=t,this.audioPlayer.setVolume(t/100)},o.prototype.startAudio=function(t){this.stopAudio(),this.audioPlayer.playable=!0,this.audioPlayer.setVolume(t/100),this.audioPlayer.loadBuffers()},o.prototype.stopAudio=function(){this.audioPlayer.playable=!1,this.audioPlayer.stop.call(this.audioPlayer)},i.exports=o}),define("views/ColumnItemView",["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ContainerSurface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/transitions/Transitionable","famous/transitions/SpringTransition","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/modifiers/Draggable"],function(t,e,i){function o(){a.apply(this,arguments),this.rootModifier=new l({size:[void 0,this.options.size[1]],align:[0,0],origin:[0,0]}),this.mainNode=this.add(this.rootModifier),this.isMobile=this.options.isMobile,this.background=new h({content:"background",size:[void 0,this.options.size[1]-this.options.margin],properties:{backgroundColor:this.options.itemBackgroundColor,textAlign:"center",pointerEvents:"none"}}),this.playing=!1,this.mainNode.add(this.background),this.background.pipe(this._eventOutput),this.isMobile?this.pointerEvents="all":this.pointerEvents="none",r.call(this),s.call(this)}function n(){return!!this.video}function s(){this.videoSurface=new u({content:'<div id="'+this.options.playerId+'">&nbsp;</div>',size:[void 0,!0],properties:{textAlign:"center",pointerEvents:this.pointerEvents,zIndex:1e4},classes:["youtube"]});var t=new l({origin:[0,.5],align:[0,.5]});this.background.add(t).add(this.videoSurface)}function r(){var t=this,e=10+(t.options.gutterWidth+2)/2+"px",i=10+(t.options.gutterWidth+2)/2+"px";switch(t.options.numberColumns){case 2:0==t.options.columnNumber?(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"):(e=String(10+(t.options.gutterWidth+2)/2)+"px",i="10px");break;case 3:0==t.options.columnNumber&&(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"),2==t.options.columnNumber&&(e=10+(t.options.gutterWidth+2)/2+"px",i="10px");break;case 4:0==t.options.columnNumber&&(e="10px",i=10+(t.options.gutterWidth+2)/2+"px"),2==t.options.columnNumber&&(e=10+(t.options.gutterWidth+2)/2+"px",i=10+(t.options.gutterWidth+2)/2+"px"),3==t.options.columnNumber&&(e=10+(t.options.gutterWidth+2)/2+"px",i="10px")}this.titleSurface=new u({content:this.options.playerTitle,size:[void 0,!0],properties:{backgroundColor:"hsl(10,10,10)",lineHeight:"20px",textAlign:"center",zIndex:10,pointerEvents:"none",userSelect:"none",paddingLeft:e,paddingRight:i},classes:["youtube-title",t.options.darkOrLight]});var o=new l({origin:[.5,0],align:[.5,.05]});this.background.add(o).add(this.titleSurface)}var a=t("famous/core/View"),u=t("famous/core/Surface"),h=t("famous/surfaces/ContainerSurface"),l=(t("famous/core/Transform"),t("famous/core/Modifier"),t("famous/modifiers/StateModifier")),c=t("famous/transitions/Transitionable"),d=t("famous/transitions/SpringTransition");t("famous/inputs/MouseSync"),t("famous/inputs/TouchSync"),t("famous/modifiers/Draggable");c.registerMethod("spring",d);o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[void 0,!0],align:[0,0],playerId:"player",title:"title",id:0,playerSize:[100,100],xpos:0,ypos:0,parent:this,isMobile:!1},o.prototype.onPlayerReady=function(t,e,i){this.video=t,this.playMedia.call(this),this.playing=!0,this.changeVolumeOnReady&&(this.changeVolume(this.volume),this.changeVolumeOnReady=!1)};o.prototype.onPlayerStateChange=function(t,e){0==t.data&&(this.video.pauseVideo(),this.video.seekTo(0),e.snapRandomPlay.call(e))},o.prototype.changeVolume=function(t){n.call(this)&&this.video.setVolume(t)},o.prototype.playMedia=function(t){n.call(this)&&this.video.playVideo()},o.prototype.pauseMedia=function(t){n.call(this)&&this.video.pauseVideo()},o.prototype.stopBoardVideo=function(t){n.call(this)&&this.playing&&this.video.stopVideo()},o.prototype.setVolume=function(t){this.volume=t,this.changeVolumeOnReady=!0},o.prototype.madeVideo=function(){return n.call(this)},i.exports=o}),define("data/DataArray",["require","exports","module"],function(t,e,i){function o(t,e){for(var i=!1,o=0;o<e.length;o++)t==e[o]&&(i=!0);return i}var n=[],s=[{title:"Bijoux Toots",code:"BVrcncgo2Wc",image:"Bijoux-Toots.jpg",audio:"sounds/Bijoux-Toots.mp3",group:"none"},{title:"Eric Goldberg - Emmanuel Sejourne: Katamiya",code:"HLI4korm_W8",image:"Britten-Pears-Orchestra---Eric.jpg",audio:"sounds/Britten-Pears-Orchestra---Eric.mp3",group:"A"},{title:"Britten-Pears contemporary musicians - Elliot Carter: Asko Concerto",code:"O7GjwPOxrZY",image:"Britten-Pears-contemporary.jpg",audio:"sounds/Britten-Pears-contemporary.mp3",group:"A"},{title:"Broadside Boys - 1953",code:"XOt2PreA8uE",image:"Broadside-Boys---1953.jpg",audio:"sounds/Broadside-Boys---1953.mp3",group:"B"},{title:"Broadside Boys - Easily Led Astray",code:"LmHkltXXwLw",image:"Broadside-Boys---Easily-Led-Astray.jpg",audio:"sounds/Broadside-Boys---Easily-Led-Astray.mp3",group:"B"},{title:"CBSO - Ravel: Mother Goose",code:"Gj6dMhQ5KcY",image:"CBSO---Ravel-Mother-Goose.jpg",audio:"sounds/CBSO---Ravel-Mother-Goose.mp3",group:"C"},{title:"CBSO Brass Ensemble",code:"phQkXEGQsyg",image:"CBSO-Brass-Ensemble-2.jpg",audio:"sounds/CBSO-Brass-Ensemble-2.mp3",group:"C"},{title:"CBSO Brass Ensemble",code:"4DqIi9K4ef0",image:"CBSO-Brass-Ensemble.jpg",audio:"sounds/CBSO-Brass-Ensemble.mp3",group:"C"},{title:"The Cello Ring - Skye Boat Song",code:"_pIKCwcb1PI",image:"Cello-ring---Skye-Boat-Song.jpg",audio:"sounds/Cello-ring---Skye-Boat-Song.mp3",group:"D"},{title:"Claudia Myatt, autoharp",code:"QuwS4Ee7Rnw",image:"Claudia-Myatt---autoharp.jpg",audio:"sounds/Claudia-Myatt---autoharp.mp3",group:"none"},{title:"Colchester Recorder Ensemble - Lord of the Dance",code:"zWURnlaY2bs",image:"Colchester-Recorder-Ensemble---Lord-of-the-Dance.jpg",audio:"sounds/Colchester-Recorder-Ensemble---Lord-of-the-Dance.mp3",group:"E"},{title:"Colchester Recorder Ensemble",code:"93V-zek23xY",image:"Colchester-Recorder-Ensemble-1.jpg",audio:"sounds/Colchester-Recorder-Ensemble.mp3",group:"E"},{title:"Corrina Dolso",code:"DWs_4VOK224",image:"Corrina-Dolso.jpg",audio:"sounds/Corrina-Dolso.mp3",group:"none"},{title:"Drumheads sabotage a performance by Bijoux Toots",code:"e6ey34VISiE",image:"Drumheads-sabotage-Bijoux-Toots.jpg",audio:"sounds/Drumheads-sabotage-Bijoux-Toots.mp3",group:"F"},{title:"Drumheads",code:"wNJCP_88mtY",image:"Drumheads.jpg",audio:"sounds/Drumheads.mp3",group:"F"},{title:"Elly Tree & Kiss the Mistress",code:"R8pR9Vh4pW0",image:"Elly-Tree-and-Kiss-the-Mistress-2.jpg",audio:"sounds/Elly-Tree-and-Kiss-the-Mistress-2.mp3",group:"G"},{title:"Elly Tree & Kiss the Mistress",code:"SFP7wPXBF38",image:"Elly-Tree-and-Kiss-the-Mistress.jpg",audio:"sounds/Elly-Tree-and-Kiss-the-Mistress.mp3",
group:"G"},{title:"Funky Voices - Every Breath You Take / Stand By Me",code:"cwg_KifkWC0",image:"Funky-Voices---Every-Breath-You-Take-&-Stand-By-Me.jpg",audio:"sounds/Funky-Voices---Every-Breath-You-Take-and-Stand-By-Me.mp3",group:"H"},{title:"Funky Voices - Mr Blue Sky",code:"7QbQ9vG-_KA",image:"Funky-Voices---Mr-Blue-Sky.jpg",audio:"sounds/Funky-Voices---Mr-Blue-Sky.mp3",group:"H"},{title:"Gypsy Dreams Belly Dancers - tambourine dance",code:"YIxE6cqM8Fw",image:"Gypsy-Dreams-Belly-Dancers---tambourine-dance.jpg",audio:"sounds/Gypsy-Dreams-Belly-Dancers---tambourine-dance.mp3",group:"none"},{title:"Heartaker",code:"Oj7Bzp4lYdI",image:"Heartaker.jpg",audio:"sounds/Heartaker.mp3",group:"none"},{title:"Ipswich Piping Society on the roof of 152 Aldeburgh High Street",code:"Udau5VhAShk",image:"Ipswich-Pipers---bagpipes-on-the-roof-of-152.jpg",audio:"sounds/Ipswich-Pipers---bagpipes-on-the-roof-of-152.mp3",group:"I"},{title:"Ipswich Piping Society - The Black Bear",code:"elozsiupexE",image:"Ipswich-Pipers---The-Black-Bear.jpg",audio:"sounds/Ipswich-Pipers---The-Black-Bear.mp3",group:"I"},{title:"Jay Richardson - Bach: Goldberg Variations",code:"o7PQCF23pGE",image:"Jay-Richardson---Bach-Goldberg-Variations.jpg",audio:"sounds/Jay-Richardson---Bach-Goldberg-Variations.mp3",group:"none"},{title:"Kiss The Mistress - Catharsis",code:"cpbpAbZvzWE",image:"Kiss-The-Mistress---Catharsis.jpg",audio:"sounds/Kiss-The-Mistress---Catharsis.mp3",group:"K"},{title:"Kiss The Mistress",code:"T-9WADAimTo",image:"Kiss-The-Mistress.jpg",audio:"sounds/Kiss-The-Mistress.mp3",group:"K"},{title:"Mahan Esfahani",code:"dVa8q9amt4c",image:"Mahan-Esfahani.jpg",audio:"sounds/Mahan-Esfahani.mp3",group:"none"},{title:"Margaret Cookhorn, CBSO contrabassonist",code:"bkdxHr3isKw",image:"Margaret-Cookhorn-2.jpg",audio:"sounds/Margaret-Cookhorn-2.mp3",group:"L"},{title:"Margaret Cookhorn, CBSO contrabassonist",code:"av80LKupZGQ",image:"Margaret-Cookhorn.jpg",audio:"sounds/Margaret-Cookhorn.mp3",group:"L"},{title:"Mrs Sizewell and the Reactors - Let's Misbehave",code:"_tZEXEUHY-I",image:"Mrs-Sizewell-and-the-Reactors---Let's-Misbehave.jpg",audio:"sounds/Mrs-Sizewell-and-the-Reactors---Let's-Misbehave.mp3",group:"M"},{title:"Mrs Sizewell and the Reactors - Lazy River",code:"QpmFTXC-h-s",image:"Mrs-Sizewell-and-the-Reactors---Lazy-River.jpg",audio:"sounds/Mrs-Sizewell-and-the-Reactors---Lazy-River.mp3",group:"M"},{title:"Music Vox",code:"0OrgAR6r9Xo",image:"Music-Vox.jpg",audio:"sounds/Music-Vox.mp3",group:"none"},{title:"An Aldeburgh Musicircus from the air",code:"r52Lhb45Iq8",image:"Musicircus-from-the-air.jpg",audio:"sounds/Musicircus-from-the-air.mp3",group:"none"},{title:"Pierre-Laurent Aimard on the beach",code:"X2hYQvfujXU",image:"Pierre-Laurent-Aimard-in-the-garage.jpg",audio:"sounds/Pierre-Laurent-Aimard-in-the-garage.mp3",group:"N"},{title:"Pierre-Laurent Aimard in the garage",code:"29jaa-x4YI8",image:"Pierre-Laurent-Aimard-on-the-beach.jpg",audio:"sounds/Pierre-Laurent-Aimard-on-the-beach.mp3",group:"N"},{title:"Soloists of the Chamber Orchestra of Europe - Boulez & Bach",code:"I5TPn44LmMM",image:"Soloists-of-the-Chamber-Orchestra-of-Europe.jpg",audio:"sounds/Chamber-Orchestra-of-Europe.mp3",group:"none"},{title:"Steam Organ medley",code:"tEvu0WWy6MQ",image:"Steam-Organ---megamix.jpg",audio:"sounds/Steam-Organ---megamix.mp3",group:"O"},{title:"Steam Organ - My heart will go on",code:"Aq4evKSRCl4",image:"Steam-Organ---My-heart-will-go-on.jpg",audio:"sounds/Steam-Organ---My-heart-will-go-on.mp3",group:"O"},{title:"Tamara Stefanovich",code:"D4PuJum2FOg",image:"Tamara-Stefanovich.jpg",audio:"sounds/Tamara-Stefanovich.mp3",group:"none"},{title:"The Gnarly Ones",code:"JVjLeHmHp_0",image:"The-Gnarly-Ones.jpg",audio:"sounds/The-Gnarly-Ones.mp3",group:"none"},{title:"The Roving Minstrels",code:"NZBzTbgUd18",image:"The-Roving-Minstrels.jpg",audio:"sounds/The-Roving-Minstrels.mp3",group:"none"},{title:"Vexations",code:"ChHlPevaQzk",image:"Vexations.jpg",audio:"sounds/Vexations.mp3",group:"P"},{title:"Vexations",code:"MWoKwRp8io8",image:"Vexations-2.jpg",audio:"sounds/Vexations-2.mp3",group:"P"},{title:"Xenia Horne and Penni Walker",code:"OlfqfY8LFcg",image:"Xenia-Horne-and-Penni-Walker.jpg",audio:"sounds/Xenia-Horne-and-Penni-Walker.mp3",group:"none"},{title:"Yoxford Community Singers - What shall we do with the drunken sailor?",code:"6kZAOatqNNU",image:"Yoxford-Community-Singers---What-shall-we-do-with-the-drunken-sailor.jpg",audio:"sounds/Yoxford-Community-Singers---What-shall-we-do-with-the-drunken-sailor.mp3",group:"none"}],r=[{title:"Bijoux Toots",code:"BVrcncgo2Wc",image:"Bijoux-Toots.jpg",audio:"sounds/Bijoux-Toots.mp3",group:"none"},{title:"Eric Goldberg - Emmanuel Sejourne: Katamiya",code:"HLI4korm_W8",image:"Britten-Pears-Orchestra---Eric.jpg",audio:"sounds/Britten-Pears-Orchestra---Eric.mp3",group:"A"},{title:"Britten-Pears contemporary musicians - Elliot Carter: Asko Concerto",code:"O7GjwPOxrZY",image:"Britten-Pears-contemporary.jpg",audio:"sounds/Britten-Pears-contemporary.mp3",group:"A"},{title:"Broadside Boys - 1953",code:"XOt2PreA8uE",image:"Broadside-Boys---1953.jpg",audio:"sounds/Broadside-Boys---1953.mp3",group:"B"},{title:"Broadside Boys - Easily Led Astray",code:"LmHkltXXwLw",image:"Broadside-Boys---Easily-Led-Astray.jpg",audio:"sounds/Broadside-Boys---Easily-Led-Astray.mp3",group:"B"},{title:"CBSO - Ravel: Mother Goose",code:"Gj6dMhQ5KcY",image:"CBSO---Ravel-Mother-Goose.jpg",audio:"sounds/CBSO---Ravel-Mother-Goose.mp3",group:"C"},{title:"CBSO Brass Ensemble",code:"phQkXEGQsyg",image:"CBSO-Brass-Ensemble-2.jpg",audio:"sounds/CBSO-Brass-Ensemble-2.mp3",group:"C"},{title:"CBSO Brass Ensemble",code:"4DqIi9K4ef0",image:"CBSO-Brass-Ensemble.jpg",audio:"sounds/CBSO-Brass-Ensemble.mp3",group:"C"},{title:"The Cello Ring - Skye Boat Song",code:"_pIKCwcb1PI",image:"Cello-ring---Skye-Boat-Song.jpg",audio:"sounds/Cello-ring---Skye-Boat-Song.mp3",group:"D"},{title:"Claudia Myatt, autoharp",code:"QuwS4Ee7Rnw",image:"Claudia-Myatt---autoharp.jpg",audio:"sounds/Claudia-Myatt---autoharp.mp3",group:"none"},{title:"Colchester Recorder Ensemble - Lord of the Dance",code:"zWURnlaY2bs",image:"Colchester-Recorder-Ensemble---Lord-of-the-Dance.jpg",audio:"sounds/Colchester-Recorder-Ensemble---Lord-of-the-Dance.mp3",group:"E"},{title:"Colchester Recorder Ensemble",code:"93V-zek23xY",image:"Colchester-Recorder-Ensemble-1.jpg",audio:"sounds/Colchester-Recorder-Ensemble.mp3",group:"E"},{title:"Corrina Dolso",code:"DWs_4VOK224",image:"Corrina-Dolso.jpg",audio:"sounds/Corrina-Dolso.mp3",group:"none"},{title:"Drumheads sabotage a performance by Bijoux Toots",code:"e6ey34VISiE",image:"Drumheads-sabotage-Bijoux-Toots.jpg",audio:"sounds/Drumheads-sabotage-Bijoux-Toots.mp3",group:"F"},{title:"Drumheads",code:"wNJCP_88mtY",image:"Drumheads.jpg",audio:"sounds/Drumheads.mp3",group:"F"},{title:"Elly Tree & Kiss the Mistress",code:"R8pR9Vh4pW0",image:"Elly-Tree-and-Kiss-the-Mistress-2.jpg",audio:"sounds/Elly-Tree-and-Kiss-the-Mistress-2.mp3",group:"G"},{title:"Elly Tree & Kiss the Mistress",code:"SFP7wPXBF38",image:"Elly-Tree-and-Kiss-the-Mistress.jpg",audio:"sounds/Elly-Tree-and-Kiss-the-Mistress.mp3",group:"G"},{title:"Funky Voices - Every Breath You Take / Stand By Me",code:"cwg_KifkWC0",image:"Funky-Voices---Every-Breath-You-Take-&-Stand-By-Me.jpg",audio:"sounds/Funky-Voices---Every-Breath-You-Take-and-Stand-By-Me.mp3",group:"H"},{title:"Funky Voices - Mr Blue Sky",code:"7QbQ9vG-_KA",image:"Funky-Voices---Mr-Blue-Sky.jpg",audio:"sounds/Funky-Voices---Mr-Blue-Sky.mp3",group:"H"},{title:"Gypsy Dreams Belly Dancers - tambourine dance",code:"YIxE6cqM8Fw",image:"Gypsy-Dreams-Belly-Dancers---tambourine-dance.jpg",audio:"sounds/Gypsy-Dreams-Belly-Dancers---tambourine-dance.mp3",group:"none"},{title:"Heartaker",code:"Oj7Bzp4lYdI",image:"Heartaker.jpg",audio:"sounds/Heartaker.mp3",group:"none"},{title:"Ipswich Piping Society on the roof of 152 Aldeburgh High Street",code:"Udau5VhAShk",image:"Ipswich-Pipers---bagpipes-on-the-roof-of-152.jpg",audio:"sounds/Ipswich-Pipers---bagpipes-on-the-roof-of-152.mp3",group:"I"},{title:"Ipswich Piping Society - The Black Bear",code:"elozsiupexE",image:"Ipswich-Pipers---The-Black-Bear.jpg",audio:"sounds/Ipswich-Pipers---The-Black-Bear.mp3",group:"I"},{title:"Ipswich Suzuki School - Twinkle",code:"YAAicZFeaDA",image:"Ipswich-Suzuki-School---Twinkle.jpg",audio:"sounds/Ipswich-Suzuki-School---Twinkle.mp3",group:"J"},{title:"Jay Richardson - Bach: Goldberg Variations",code:"o7PQCF23pGE",image:"Jay-Richardson---Bach-Goldberg-Variations.jpg",audio:"sounds/Jay-Richardson---Bach-Goldberg-Variations.mp3",group:"none"},{title:"Kiss The Mistress - Catharsis",code:"cpbpAbZvzWE",image:"Kiss-The-Mistress---Catharsis.jpg",audio:"sounds/Kiss-The-Mistress---Catharsis.mp3",group:"K"},{title:"Kiss The Mistress",code:"T-9WADAimTo",image:"Kiss-The-Mistress.jpg",audio:"sounds/Kiss-The-Mistress.mp3",group:"K"},{title:"Mahan Esfahani",code:"dVa8q9amt4c",image:"Mahan-Esfahani.jpg",audio:"sounds/Mahan-Esfahani.mp3",group:"none"},{title:"Margaret Cookhorn, CBSO contrabassonist",code:"bkdxHr3isKw",image:"Margaret-Cookhorn-2.jpg",audio:"sounds/Margaret-Cookhorn-2.mp3",group:"L"},{title:"Margaret Cookhorn, CBSO contrabassonist",code:"av80LKupZGQ",image:"Margaret-Cookhorn.jpg",audio:"sounds/Margaret-Cookhorn.mp3",group:"L"},{title:"Mrs Sizewell and the Reactors - Let's Misbehave",code:"_tZEXEUHY-I",image:"Mrs-Sizewell-and-the-Reactors---Let's-Misbehave.jpg",audio:"sounds/Mrs-Sizewell-and-the-Reactors---Let's-Misbehave.mp3",group:"M"},{title:"Mrs Sizewell and the Reactors - Lazy River",code:"QpmFTXC-h-s",image:"Mrs-Sizewell-and-the-Reactors---Lazy-River.jpg",audio:"sounds/Mrs-Sizewell-and-the-Reactors---Lazy-River.mp3",group:"M"},{title:"Music Vox",code:"0OrgAR6r9Xo",image:"Music-Vox.jpg",audio:"sounds/Music-Vox.mp3",group:"none"},{title:"An Aldeburgh Musicircus from the air",code:"r52Lhb45Iq8",image:"Musicircus-from-the-air.jpg",audio:"sounds/Musicircus-from-the-air.mp3",group:"none"},{title:"Soloists of the Chamber Orchestra of Europe - Boulez & Bach",code:"I5TPn44LmMM",image:"Soloists-of-the-Chamber-Orchestra-of-Europe.jpg",audio:"sounds/Chamber-Orchestra-of-Europe.mp3",group:"none"},{title:"Steam Organ medley",code:"tEvu0WWy6MQ",image:"Steam-Organ---megamix.jpg",audio:"sounds/Steam-Organ---megamix.mp3",group:"O"},{title:"Steam Organ - My heart will go on",code:"Aq4evKSRCl4",image:"Steam-Organ---My-heart-will-go-on.jpg",audio:"sounds/Steam-Organ---My-heart-will-go-on.mp3",group:"O"},{title:"Tamara Stefanovich",code:"D4PuJum2FOg",image:"Tamara-Stefanovich.jpg",audio:"sounds/Tamara-Stefanovich.mp3",group:"none"},{title:"The Gnarly Ones",code:"JVjLeHmHp_0",image:"The-Gnarly-Ones.jpg",audio:"sounds/The-Gnarly-Ones.mp3",group:"none"},{title:"The Roving Minstrels",code:"NZBzTbgUd18",image:"The-Roving-Minstrels.jpg",audio:"sounds/The-Roving-Minstrels.mp3",group:"none"},{title:"The Ukooleles - Delilah",code:"jFnF8BR4WwY",image:"The-Ukooleles---Delilah.jpg",audio:"sounds/The-Ukooleles---Delilah.mp3",group:"none"},{title:"Vexations",code:"ChHlPevaQzk",image:"Vexations.jpg",audio:"sounds/Vexations.mp3",group:"P"},{title:"Vexations",code:"MWoKwRp8io8",image:"Vexations-2.jpg",audio:"sounds/Vexations-2.mp3",group:"P"},{title:"Xenia Horne and Penni Walker",code:"OlfqfY8LFcg",image:"Xenia-Horne-and-Penni-Walker.jpg",audio:"sounds/Xenia-Horne-and-Penni-Walker.mp3",group:"none"},{title:"Yoxford Community Singers - What shall we do with the drunken sailor?",code:"6kZAOatqNNU",image:"Yoxford-Community-Singers---What-shall-we-do-with-the-drunken-sailor.jpg",audio:"sounds/Yoxford-Community-Singers---What-shall-we-do-with-the-drunken-sailor.mp3",group:"none"}];n.createNewColumnDataArrays=function(){for(var t=s.concat(),e=[],i=[],r=0;r<4;r++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;i[r]=t[a],t.splice(a,1)}for(var l=[],r=0;r<4;r++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;l[r]=t[a],t.splice(a,1)}for(var c=[],r=0;r<4;r++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;c[r]=t[a],t.splice(a,1)}for(var d=[],r=0;r<4;r++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;d[r]=t[a],t.splice(a,1)}return n=[i,l,c,d]},n.createNewNonSilentColumnDataArrays=function(){for(var t=r.concat(),e=[],i=[],s=0;s<4;s++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;i[s]=t[a],t.splice(a,1)}for(var l=[],s=0;s<4;s++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;l[s]=t[a],t.splice(a,1)}for(var c=[],s=0;s<4;s++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;c[s]=t[a],t.splice(a,1)}for(var d=[],s=0;s<4;s++){for(var a=Math.floor(Math.random()*t.length),u=!0;u;)if("none"!=t[a].group){var h=o(t[a].group,e);h?(u=!0,a=Math.floor(Math.random()*t.length)):(e.push(t[a].group),u=!1)}else u=!1;d[s]=t[a],t.splice(a,1)}return n=[i,l,c,d]};var a=["#441b19","#4a2423","#593e49","#86523d"],u=["#8a422a","#a24653","#995d55","#b56951"],h=["#6b4e3c","#a46e18","#b67851","#b49d51"],l=["#0f1110","#293036","#2b3036","#23314c"],c=["#40404c","#434051","#434544","#2e4a4d"],d=["#841021","#ab2830","#ae2c38","#a53946"],p=["#58647e","#6390ad","#7895a5","#81a0b2"],f=["#6e8082","#6e8686","#909da3","#97a1aa"],m=["#4f4b42","#71654d","#958b7f","#979485"],g=["#20431e","#50613f","#497075","#5e867b"],y=["#d255bd","#b27fa8","#b37db7","#d177ab"],v=["#0f4a82","#4e587c","#6a5c97","#1d63ab"],w=[a,u,h,l,c,d,p,f,m,g,y,v],b=["#f93e49","#e15174","#ff5061","#ff669f"],_=["#ce6144","#f06335","#f4463d","#f28179"],S=["#bc7c94","#c59aa1","#c6afc3","#dabeba"],H=["#c68082","#e0b09c","#f2c4b7","#eec2b7"],T=["#b5b6b1","#c5c5c3","#d5d5d5","#d7d7d5"],R=["#8da29d","#95a7b3","#bbcbc1","#d0dcdc"],C=["#C1CDD3","#b2cbdf","#cbd5de","#d0dbdf"],x=["#abbccc","#b9ccdb","#d4dee8","#d0eded"],P=["#a5bfd0","#b2c9d9","#c8d2dc","#ced8f3"],M=["#e3e8e8","#e5edf0","#efeef3","#ebeff2"],O=["#7a8545","#798545","#afa949","#cec59e"],E=["#ffe245","#ffff8d","#dfe07a","#acd790"],I=["#72a848","#97ac43","#cdc84b","#dcc87f"],V=["#99a493","#b7b896","#bcc59b","#b3bf8f"],z=["#1893d7","#15abdd","#aac7e7","#a4d2f6"],A=["#698bd3","#7da1c3","#84b3dd","#8ec1ee"],D=["#beab9a","#cbb095","#d5c8b5","#dccec1"],k=["#b99861","#bdab97","#ccb38a","#dcc8b0"],W=["#a5672e","#d79443","#ca9d0e","#d0ae28"],F=["#d2ada5","#dca064","#eec283","#e9c29b"],L=["#d9d2c8","#dbcfc1","#eee6d1","#eee8d8"],N=[b,_,S,H,T,R,C,x,P,M,O,E,I,V,z,A,D,k,W,F,L];n.getDarkColors=function(){var t=Math.floor(Math.random()*w.length);return w[t]},n.getLightColors=function(){var t=Math.floor(Math.random()*N.length);return N[t]},i.exports=n}),define("views/ColumnView",["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/Scrollview","famous/core/Transform","famous/modifiers/StateModifier","famous/core/Modifier","famous/utilities/Timer","mods/Draggable","famous/transitions/Transitionable","famous/surfaces/ImageSurface","famous/transitions/Easing","famous/transitions/SnapTransition","famous/transitions/SpringTransition","views/MobileColumnItemView","views/ColumnItemView","data/DataArray","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,e,i){function o(){d.apply(this,arguments),this.rootModifier=new g({size:[void 0,void 0],origin:[0,0],align:[0,0],transform:m.translate(0,-4e3,0)}),this.rootModifier.setTransform(m.translate(0,0,0),{duration:2e3,curve:"easeInOut"}),this.mainNode=this.add(this.rootModifier),this.total=10,this.n=0,this.ypos=0,this.volume=Math.pow(this.options.columnWidth/this.options.maxColumnWidth*100,2)/100,this.isMobile=this.options.isMobile,this.columnItemViews=[],this.columnItemMods=[],this.endEvent=!1,n.call(this)}function n(){var t=this;this.videoData=this.options.columnData,0==Math.floor(2*Math.random())?(this.darkOrLight="dark",this.itemColors=C.getDarkColors()):(this.darkOrLight="light",this.itemColors=C.getLightColors());this.scrollSurfaceHeight=this.videoData.length*(this.options.columnItemHeight+this.options.margin);var e;e=window.hudStart&&!WURFL.is_mobile?["scroll-surface-blur"]:["scroll-surface"],this.scrollSurface=new f({classes:e,size:[void 0,this.scrollSurfaceHeight],properties:{backgroundColor:"#cdcdcd",lineHeight:"200px",textAlign:"center",cursor:"pointer"}}),this.topScrollSurface=new p({size:[void 0,750],properties:{backgroundColor:"#cdcdcd",cursor:"pointer"}}),this.topScrollSurfaceModifier=new g({origin:[0,1],align:[0,0]});this.downArrow=new _({size:[129,116],content:"images/down_arrow.png",properties:{zIndex:50,pointerEvents:"all"}}),this.downArrowModifier=new g({origin:[.5,1],align:[0,0]});this.upArrow=new _({size:[129,116],content:"images/up_arrow.png",properties:{zIndex:50,pointerEvents:"all"}}),this.upArrowModifier=new g({origin:[.5,0],align:[0,1]}),this.bottomScrollSurface=new p({size:[void 0,750],properties:{backgroundColor:"#cdcdcd",lineHeight:"200px",cursor:"pointer"}}),this.bottomScrollSurfaceModifier=new g({origin:[0,0],align:[0,1]}),this.scrollSurface.add(this.topScrollSurfaceModifier).add(this.topScrollSurface),this.scrollSurface.add(this.downArrowModifier).add(this.downArrow),this.scrollSurface.add(this.bottomScrollSurfaceModifier).add(this.bottomScrollSurface),this.scrollSurface.add(this.upArrowModifier).add(this.upArrow),window.scrollSurfaces.push(this.scrollSurface),this.columnModifier=new y({transform:m.translate(0,0,0)}),this.scrollSurface.draggable=new w({projection:"y"}),this.scrollSurface.pipe(this.scrollSurface.draggable),this.columnItemViews=[];for(var i=0;i<this.videoData.length;i++)this.columnItemViews[i]=new R({margin:this.options.margin,size:[void 0,this.options.columnItemHeight+this.options.margin],id:i,playerId:this.videoData[i].code,playerTitle:this.videoData[i].title,playerSize:[this.options.YTwidth,this.options.YTHeight],ypos:i*(this.options.columnItemHeight+this.options.margin),parent:this,itemBackgroundColor:this.itemColors[i],isMobile:this.isMobile,audio:this.videoData[i].audio,darkOrLight:this.darkOrLight,photoUrl:this.videoData[i].image,numberColumns:this.options.columnCount,columnNumber:this.options.columnNumber,gutterWidth:this.options.boardViewRef.gutter}),this.columnItemMods[i]=new y({size:[void 0,this.options.columnItemHeight+this.options.margin],transform:m.translate(0,i*(this.options.columnItemHeight+this.options.margin),0)}),this.scrollSurface.add(this.columnItemMods[i]).add(this.columnItemViews[i]);this.mod=new g,this.trans={period:700,dampingRatio:.3,velocity:0},this.slowTrans={period:1e3,dampingRatio:.3,velocity:0},this.mainNode.add(this.columnModifier).add(this.mod).add(this.scrollSurface.draggable).add(this.scrollSurface),this.scrollSurface.draggable.on("start",function(){s(t)}),this.scrollSurface.draggable.on("end",function(){l(t)}),this.scrollSurface.draggable.on("end",function(){a(t)}),c.call(this),window.onpageshow=function(){r(t,t.columnItemViews[t.n],t.videoData[t.n].code,t.n)},window.onpagehide=function(){if(WURFL.is_mobile)for(var e=0;e<t.videoData.length;e++)t.columnItemViews[e].pauseMedia.call(t.columnItemViews[e])}}function s(t){t.options.boardViewRef.disableHandles(),t.options.boardViewRef.disableOtherColumnSurfaces(t.options.columnNumber),window.disableHUD()}function r(t,e,i,o){if(WURFL.is_mobile)e.startAudio(t.volume);else var n=new YT.Player(i,{height:t.options.YTheight,width:t.options.YTwidth,videoId:i,events:{onReady:function(){e.onPlayerReady.call(e,n,t,o)},onStateChange:function(i){e.onPlayerStateChange.call(e,i,t)}},playerVars:{autoplay:0,controls:0,showinfo:1,rel:0,modestbranding:1,fs:1,wmode:"opaque",origin:"http://musicircus.thespace.org"}})}function a(t){if(0==t.endEvent&&(t.endEvent=!0,v.setTimeout(function(){u(t)},1e3),t.options.boardViewRef.autoScrollInactive=!0,WURFL.is_mobile))for(var e=t.n,i=0;i<t.videoData.length;i++){var o=i;o!=e&&t.columnItemViews[i].pauseMedia.call(t.columnItemViews[i])}t.options.boardViewRef.enableHandles(),t.options.boardViewRef.enableAllColumnSurfaces(),window.enableHUD&&window.enableHUD()}function u(t){for(var e=t.n,i=0;i<t.videoData.length;i++){i!=e?WURFL.is_mobile?(t.columnItemViews[i].pauseMedia.call(t.columnItemViews[i]),t.columnItemViews[i].itemPhoto.setProperties({display:"none"})):(t.columnItemViews[i].pauseMedia(),t.columnItemViews[i].videoSurface&&t.columnItemViews[i].videoSurface.setProperties({display:"none"})):WURFL.is_mobile?t.columnItemViews[i].itemPhoto.setProperties({display:"block"}):t.columnItemViews[i].videoSurface&&t.columnItemViews[i].videoSurface.setProperties({display:"block"})}!WURFL.is_mobile&&t.columnItemViews[e].madeVideo()?(t.columnItemViews[e].playMedia(),t.columnItemViews[e].changeVolume(t.volume)):(t.columnItemViews[e].setVolume(t.volume),r(t,t.columnItemViews[e],t.videoData[e].code,e)),t.endEvent=!1}function h(t){var e=Math.floor(-t.scrollSurface.draggable.getPosition()[1]/(t.options.columnItemHeight+t.options.margin));return e<0&&(e=0),e>=t.videoData.length&&(e=t.videoData.length-1),e}function l(t,e,i){if(void 0===e){var o=!0;e=h(t)}var n,s,r=t.scrollSurface.draggable.getPosition()[1];n=r>t.ypos?e>0&&o?e-1:e:r<t.ypos&&e+1<t.videoData.length&&o?e+1:e,h(t)==t.n?s=-n*(t.options.columnItemHeight+t.options.margin):(s=-e*(t.options.columnItemHeight+t.options.margin),n=e),t.ypos=s,t.n=n,"slow"==i?t.scrollSurface.draggable.setPosition([0,s,0],t.slowTrans):t.scrollSurface.draggable.setPosition([0,s,0],t.trans)}function c(){var t=this,e=new b(0),i=new _({content:"images/up_ball.png",size:[50,50],properties:{pointerEvents:"all",zIndex:50,cursor:"pointer"}}),o=new g({origin:[.5,.5],align:[.5,.1]}),n=new y({opacity:function(){return e.get()}});this.add(o).add(n).add(i);var s=new _({content:"images/down_ball.png",size:[50,50],properties:{pointerEvents:"all",zIndex:50,cursor:"pointer"}}),r=new g({origin:[.5,.5],align:[.5,.75]}),a=new y({opacity:function(){return e.get()}});this.add(r).add(a).add(s),window.debug?(s.on("mouseup",function(){t.snapGotoNode(1)},!1),i.on("mouseup",function(){t.snapGotoNode(-1)},!1)):WURFL.is_mobile?(s.on("touchend",function(){t.snapGotoNode(1)},!1),i.on("touchend",function(){t.snapGotoNode(-1)},!1)):(s.on("mouseup",function(){t.snapGotoNode(1)},!1),i.on("mouseup",function(){t.snapGotoNode(-1)},!1));var u;window.debug?(s.on("mouseenter",function(){v.clear(u)}),i.on("mouseenter",function(){v.clear(u)}),this.scrollSurface.on("mouseenter",function(t){v.clear(u),e.set(1,{duration:500,curve:S.outCirc})}),this.scrollSurface.on("mouseleave",function(t){v.clear(u),u=v.setTimeout(function(){e.set(0,{duration:500,curve:S.outCirc})},500)})):WURFL.is_mobile?(s.on("touchstart",function(){v.clear(u),u=v.setTimeout(function(){e.set(0,{duration:500,curve:S.outCirc})},1e3)}),i.on("touchstart",function(){v.clear(u),u=v.setTimeout(function(){e.set(0,{duration:500,curve:S.outCirc})},1e3)}),this.scrollSurface.on("touchstart",function(t){v.clear(u),e.set(1,{duration:500,curve:S.outCirc})}),this.scrollSurface.on("touchend",function(t){v.clear(u),u=v.setTimeout(function(){e.set(0,{duration:500,curve:S.outCirc})},1e3)})):(s.on("mouseenter",function(){v.clear(u)}),i.on("mouseenter",function(){v.clear(u)}),this.scrollSurface.on("mouseenter",function(t){v.clear(u),e.set(1,{duration:500,curve:S.outCirc}),u=v.setTimeout(function(){e.set(0,{duration:2e3,curve:S.outCirc})},3e3)}),this.scrollSurface.on("mouseleave",function(t){v.clear(u),u=v.setTimeout(function(){e.set(0,{duration:50,curve:S.outCirc})},50)}))}var d=t("famous/core/View"),p=t("famous/core/Surface"),f=t("famous/surfaces/ContainerSurface"),m=(t("famous/views/Scrollview"),t("famous/core/Transform")),g=t("famous/modifiers/StateModifier"),y=t("famous/core/Modifier"),v=t("famous/utilities/Timer"),w=t("mods/Draggable"),b=t("famous/transitions/Transitionable"),_=t("famous/surfaces/ImageSurface"),S=t("famous/transitions/Easing"),H=t("famous/transitions/SnapTransition"),T=t("famous/transitions/SpringTransition");if(b.registerMethod("snap",H),b.registerMethod("spring",T),WURFL.is_mobile)var R=t("views/MobileColumnItemView");else var R=t("views/ColumnItemView");var C=t("data/DataArray");t("famous/inputs/GenericSync"),t("famous/inputs/ScrollSync"),t("famous/inputs/TouchSync");o.prototype=Object.create(d.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={columnCount:3,columnWidths:[.25,.5,.25],itemHeights:[.75,1,.75],YTwidth:window.innerWidth/3,YTheight:200,columnItemHeight:.25*window.innerHeight,columnWidth:.5,margin:100,isMobile:!1,boardContainer:this},o.prototype.resizeItems=function(t,e){var i=this.scrollSurfaceHeight;this.options.columnItemHeight=t[1]*e,this.options.columnWidth=t[0],this.scrollSurfaceHeight=this.videoData.length*(this.options.columnItemHeight+this.options.margin),this.scrollSurface.setSize([t[0],this.scrollSurfaceHeight]);for(var o=0;o<this.videoData.length;o++)this.columnItemMods[o].setTransform(m.translate(0,o*(t[1]+this.options.margin),0)),this.columnItemMods[o].sizeFrom([t[0],t[1]]),this.columnItemViews[o].background.setSize([t[0],t[1]]);var n=this.scrollSurface.draggable.getPosition(),s=this.scrollSurfaceHeight/i;this.scrollSurface.draggable.setPosition([n[0],n[1]*s,0]),this.volume=Math.pow(this.options.columnWidth/this.options.maxColumnWidth*100,2)/100,this.columnItemViews[this.n].changeVolume(this.volume)},o.prototype.snap=function(t){l(this,this.n,t)},o.prototype.snapRandomPlay=function(){this.options.boardViewRef.autoScrollInactive=!1;for(var t=Math.floor(Math.random()*this.videoData.length);t==this.n;)t=Math.floor(Math.random()*this.videoData.length);this.n=t,this.snap.call(this,"slow"),a(this)},o.prototype.snapGotoNode=function(t){this.n+t<this.videoData.length&&this.n+t>=0&&(this.n=this.n+t,this.snap.call(this,"slow"),a(this))},i.exports=o}),define("views/TwoColumnMusicircusInterfaceView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing","famous/surfaces/ContainerSurface","famous/surfaces/ImageSurface","famous/modifiers/Draggable","famous/inputs/MouseSync","famous/utilities/Timer","famous/transitions/Transitionable","famous/core/Modifier"],function(t,e,i){function o(t,e,i){h.apply(this,arguments),this.boardViewRef=t,this.minimumColumnWidth=this.boardViewRef.minimumColumnWidth,this.windowWidth=e,this.windowHeight=i,this.rootModifier=new d({size:this.options.size,origin:[0,0],align:[0,0]}),this.myTimer,this.dragTimer,this.handleSize=[this.boardViewRef.options.gutter+2,window.innerHeight],this.handleSizeLarge=[this.boardViewRef.options.gutter+20,window.innerHeight],this.mainNode=this.add(this.rootModifier),n.call(this)}function n(){var t=this;this.leftHandleStartPosition=this.boardViewRef.options.columnWidths[0]*this.windowWidth,this.leftHandleAbsolutePosition=this.boardViewRef.options.columnWidths[0]*this.windowWidth,this.leftHandle=u.call(this),this.leftHandleModifier=new d({align:[0,0],origin:[.5,0],transform:c.translate(this.leftHandleStartPosition,0,0)});var e=0-this.leftHandleStartPosition+this.minimumColumnWidth,i=window.innerWidth-this.leftHandleAbsolutePosition-this.minimumColumnWidth;this.leftHandleDraggable=new g({snapX:5,xRange:[e,i],yRange:[0,0]}),this.leftHandleDraggable.subscribe(this.leftHandle),this.mainNode.add(this.leftHandleDraggable).add(this.leftHandleModifier).add(this.leftHandle),this.leftHandleDraggable.on("start",function(){s(t)}),this.leftHandleDraggable.on("end",function(){r(t)}),this.leftHandleDraggable.on("update",function(){}),window.handles=[this.leftHandle]}function s(t){t.boardViewRef.handlesActive=!0,t.boardViewRef.disableScrollSurfaces(),this.dragTimer=y.setInterval(function(){var e=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+e[0],a(t,t.leftHandleStartPosition+e[0])},25)}function r(t){y.clear(this.dragTimer),this.dragTimer=null,t.leftHandle.removeHandle();var e=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+e[0],a(t,t.leftHandleStartPosition+e[0]),t.boardViewRef.enableScrollSurfaces();for(var i=0;i<t.boardViewRef.columnCount;i++)t.boardViewRef.columns[i].snap();t.boardViewRef.handlesActive=!1}function a(t,e){t.leftHandleAbsolutePosition=e,t.boardViewRef.coloumnModifiers[0].sizeFrom([e,void 0]);var i;i=t.boardViewRef.windowHeight>e*t.boardViewRef.widthToHeightRatio?e*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,e*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.columns[0].resizeItems([e,i],t.boardViewRef.widthToHeightRatio);var o,n=window.innerWidth-e;o=t.boardViewRef.windowHeight>n*t.boardViewRef.widthToHeightRatio?n*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,n*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(o=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[1].sizeFrom([n,void 0]),t.boardViewRef.coloumnModifiers[1].setTransform(c.translate(e,0,0)),t.boardViewRef.columns[1].resizeItems([n,o],t.boardViewRef.widthToHeightRatio)}function u(){var t,e=this,i=new v(0);t=window.hudStart&&!WURFL.is_mobile?["scroll-surface-blur"]:["scroll-surface"];var o,n=new f({origin:[.5,.5],align:[.5,.5],classes:t,size:e.handleSize,properties:{color:"#fff",cursor:"col-resize",zIndex:0}}),s=new l({size:e.handleSize,origin:[.5,0],properties:{backgroundColor:"#333",color:"#fff",cursor:"col-resize",zIndex:0,pointerEvents:"none"}}),r=new w({origin:[.5,.5],align:[.5,.5],transform:function(){return c.translate(0,0,1)}}),a=new l({size:e.handleSize,origin:[.5,0],opacity:0,properties:{backgroundColor:"#666",zIndex:0,pointerEvents:"none"}}),u=new w({origin:[.5,.5],align:[.5,.5],transform:function(){return c.translate(0,0,2)},opacity:function(){return i.get()}}),h=[];if(WURFL.is_mobile){var o="images/left_right_wide.png";h=[86,34]}else{var o="images/left_right.png";h=[72,34]}var d=new m({content:o,size:[h[0],h[1]],properties:{pointerEvents:"all",zIndex:0}}),g=new w({align:[.5,.45],origin:[.5,.5],transform:function(){var t=i.get();return c.scale(t,t,1)}});n.add(r).add(s),n.add(u).add(a),n.add(g).add(d);var b,_=!1;return n.removeHandle=function(){s.setProperties({backgroundColor:"#333"}),y.clear(b),_=!1,b=y.setTimeout(function(){i.set(0,{duration:500,curve:p.outBounce})},300)},n.makeHandleSurfaceGreen=function(){s.setProperties({backgroundColor:"#666"})},n.makeHandleSurfaceGrey=function(){s.setProperties({backgroundColor:"#333333"})},window.debug?(n.on("mouseenter",function(t){y.clear(b),i.set(1,{duration:500,curve:p.outBounce})}),n.on("mouseleave",function(t){y.clear(b),b=y.setTimeout(function(){i.set(0,{duration:500,curve:p.outBounce})},300)})):WURFL.is_mobile?(n.on("touchstart",function(t){y.clear(b),i.set(1,{duration:500,curve:p.outBounce})}),n.on("touchend",function(t){y.clear(b),b=y.setTimeout(function(){i.set(0,{duration:500,curve:p.outBounce})},300)})):(n.on("mousedown",function(t){i.set(1),_=!0}),n.on("mouseover",function(t){0==_&&(y.clear(b),i.set(1,{duration:500,curve:p.outBounce}))}),n.on("mouseout",function(t){y.clear(b),0==_&&(y.clear(b),b=y.setTimeout(function(){i.set(0,{duration:500,curve:p.outBounce})},300))})),n}
var h=t("famous/core/View"),l=t("famous/core/Surface"),c=t("famous/core/Transform"),d=t("famous/modifiers/StateModifier"),p=t("famous/transitions/Easing"),f=t("famous/surfaces/ContainerSurface"),m=t("famous/surfaces/ImageSurface"),g=t("famous/modifiers/Draggable"),y=(t("famous/inputs/MouseSync"),t("famous/utilities/Timer")),v=t("famous/transitions/Transitionable"),w=t("famous/core/Modifier");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},i.exports=o,o.prototype.getHandlePosition=function(t){var e;switch(t){case 0:e=this.leftHandleAbsolutePosition}return e},o.prototype.getHandleLeftLimit=function(t){var e;switch(t){case 0:e=0+this.minimumColumnWidth}return e},o.prototype.getHandleRightLimit=function(t){var e;switch(t){case 0:e=this.boardViewRef.windowWidth-this.minimumColumnWidth}return e},o.prototype.moveHandle=function(t,e){var i=e-this.leftHandleStartPosition,o=this,n=function(){var t=o.leftHandleDraggable.getPosition(),e=o.leftHandleStartPosition+t[0];a(o,e)},s=function(){o.boardViewRef.columns[0].snap(),o.boardViewRef.columns[1].snap()};switch(t){case 0:this.leftHandle.removeHandle(),this.leftHandle.makeHandleSurfaceGreen(),this.leftHandleAbsolutePosition=e,this.myTimer=y.setInterval(n,20),this.leftHandleDraggable.setPosition([i,0,0],{curve:p.outCirc,duration:1e3},function(){o.leftHandle.makeHandleSurfaceGrey(),a(o,e),y.clear(o.myTimer),y.setTimeout(s,100)})}},o.prototype.disableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"none"})},o.prototype.enableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"all"})}}),define("views/ThreeColumnMusicircusInterfaceView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing","famous/surfaces/ContainerSurface","famous/surfaces/ImageSurface","famous/modifiers/Draggable","famous/utilities/Timer","famous/transitions/Transitionable","famous/core/Modifier"],function(t,e,i){function o(t,e,i){d.apply(this,arguments),this.boardViewRef=t,this.minimumColumnWidth=this.boardViewRef.minimumColumnWidth,this.windowWidth=e,this.windowHeight=i,this.isDragging=!1,this.rootModifier=new m({size:this.options.size,origin:[0,0],align:[0,0]}),this.myTimer,this.handleSize=[this.boardViewRef.options.gutter+2,window.innerHeight],this.handleSizeLarge=[this.boardViewRef.options.gutter+20,window.innerHeight],this.mainNode=this.add(this.rootModifier),n.call(this)}function n(){var t=this;this.leftHandleStartPosition=this.boardViewRef.options.columnWidths[0]*this.windowWidth,this.leftHandleAbsolutePosition=this.boardViewRef.options.columnWidths[0]*this.windowWidth,this.rightHandleStartPosition=(this.boardViewRef.options.columnWidths[0]+this.boardViewRef.options.columnWidths[1])*this.windowWidth,this.rightHandleAbsolutePosition=(this.boardViewRef.options.columnWidths[0]+this.boardViewRef.options.columnWidths[1])*this.windowWidth,this.verticalPosition=0,this.leftHandle=c.call(this),this.leftHandleModifier=new m({align:[0,0],origin:[.5,0],transform:f.translate(this.leftHandleStartPosition,0,0)});var e=0-this.leftHandleStartPosition+this.minimumColumnWidth,i=this.rightHandleAbsolutePosition-this.leftHandleAbsolutePosition-this.minimumColumnWidth;this.leftHandleDraggable=new w({snapX:5,xRange:[e,i],yRange:[0,0]}),this.leftHandleDraggable.subscribe(this.leftHandle),this.mainNode.add(this.leftHandleDraggable).add(this.leftHandleModifier).add(this.leftHandle),this.rightHandle=c.call(this),this.rightHandleModifier=new m({align:[0,0],origin:[.5,0],transform:f.translate(this.rightHandleStartPosition,0,0)}),this.rightHandleDraggable=new w({snapX:5,xRange:[this.leftHandleAbsolutePosition-this.rightHandleStartPosition+this.minimumColumnWidth,this.windowWidth-this.rightHandleStartPosition-this.minimumColumnWidth],yRange:[0,0]}),this.rightHandleDraggable.subscribe(this.rightHandle),this.mainNode.add(this.rightHandleDraggable).add(this.rightHandleModifier).add(this.rightHandle),this.leftHandleDraggable.on("start",function(){s(t,t.rightHandle)}),this.leftHandleDraggable.on("end",function(){r(t,"left")}),this.leftHandleDraggable.on("update",function(){a(t)}),this.rightHandleDraggable.on("start",function(){s(t,t.leftHandle)}),this.rightHandleDraggable.on("end",function(){r(t,"right")}),this.rightHandleDraggable.on("update",function(){h(t)}),window.handles=[this.rightHandle,this.leftHandle]}function s(t,e){e.setProperties({pointerEvents:"none"}),t.boardViewRef.handlesActive=!0,t.boardViewRef.disableScrollSurfaces()}function r(t,e){switch(e){case"left":t.leftHandle.removeHandle();var i=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+i[0],t.rightHandle.setProperties({pointerEvents:"all"}),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),u(t,t.leftHandleStartPosition+i[0]);break;case"right":t.rightHandle.removeHandle();var i=t.rightHandleDraggable.getPosition();t.rightHandleAbsolutePosition=t.rightHandleStartPosition+i[0],t.leftHandle.setProperties({pointerEvents:"all"}),t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),l(t,t.rightHandleStartPosition+i[0])}t.boardViewRef.enableScrollSurfaces();for(var o=0;o<t.boardViewRef.columnCount;o++)t.boardViewRef.columns[o].snap();t.boardViewRef.handlesActive=!1}function a(t){var e=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+e[0],u(t,t.leftHandleStartPosition+e[0]),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}function u(t,e){t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.boardViewRef.coloumnModifiers[0].sizeFrom([e,void 0]);var i;i=t.boardViewRef.windowHeight>e*t.boardViewRef.widthToHeightRatio?e*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,e*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.columns[0].resizeItems([e,i],t.boardViewRef.widthToHeightRatio);var o,n=t.rightHandleAbsolutePosition-e;o=t.boardViewRef.windowHeight>n*t.boardViewRef.widthToHeightRatio?n*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,n*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(o=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[1].sizeFrom([n,void 0]),t.boardViewRef.coloumnModifiers[1].setTransform(f.translate(e,0,0)),t.boardViewRef.columns[1].resizeItems([n,o],t.boardViewRef.widthToHeightRatio)}function h(t){var e=t.rightHandleDraggable.getPosition();t.rightHandleAbsolutePosition=t.rightHandleStartPosition+e[0],l(t,t.rightHandleStartPosition+e[0]),t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}function l(t,e){t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]});var i,o=e-t.leftHandleAbsolutePosition;i=t.boardViewRef.windowHeight>o*t.boardViewRef.widthToHeightRatio?o*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,o*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[1].sizeFrom([o,void 0]),t.boardViewRef.columns[1].resizeItems([o,i],t.boardViewRef.widthToHeightRatio);var n,s=t.boardViewRef.windowWidth-e;n=t.boardViewRef.windowHeight>s*t.boardViewRef.widthToHeightRatio?s*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,s*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(n=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[2].sizeFrom([s,void 0]),t.boardViewRef.coloumnModifiers[2].setTransform(f.translate(e,0,0)),t.boardViewRef.columns[2].resizeItems([s,n],t.boardViewRef.widthToHeightRatio)}function c(){var t,e=this,i=new _(0);t=window.hudStart&&!WURFL.is_mobile?["scroll-surface-blur"]:["scroll-surface"];var o,n=new y({classes:t,size:e.handleSize,properties:{color:"#fff",cursor:"col-resize",zIndex:0}}),s=new p({size:e.handleSize,origin:[.5,0],properties:{backgroundColor:"#333",zIndex:0,pointerEvents:"none"}}),r=new S({origin:[.5,.5],align:[.5,.5],transform:function(){return f.translate(0,0,1)}}),a=new p({size:e.handleSize,origin:[.5,0],opacity:0,properties:{backgroundColor:"#666",zIndex:0,pointerEvents:"none"}}),u=new S({origin:[.5,.5],align:[.5,.5],transform:function(){return f.translate(0,0,1)},opacity:function(){return i.get()}}),h=[];if(WURFL.is_mobile){var o="images/left_right_wide.png";h=[86,34]}else{var o="images/left_right.png";h=[72,34]}var l=new v({content:o,size:[h[0],h[1]],properties:{pointerEvents:"all",zIndex:0}}),c=new S({align:[.5,.45],origin:[.5,.5],transform:function(){var t=i.get();return f.scale(t,t,1)}});n.add(r).add(s),n.add(u).add(a),n.add(c).add(l);var d,m=!1;return n.removeHandle=function(){s.setProperties({backgroundColor:"#333"}),b.clear(d),m=!1,d=b.setTimeout(function(){i.set(0,{duration:500,curve:g.outBounce})},300)},n.makeHandleSurfaceGreen=function(){s.setProperties({backgroundColor:"#666"})},n.makeHandleSurfaceGrey=function(){s.setProperties({backgroundColor:"#333333"})},window.debug?(n.on("mouseenter",function(t){b.clear(d),i.set(1,{duration:500,curve:g.outBounce})}),n.on("mouseleave",function(t){b.clear(d),d=b.setTimeout(function(){i.set(0,{duration:500,curve:g.outBounce})},300)})):WURFL.is_mobile?(n.on("touchstart",function(t){b.clear(d),i.set(1,{duration:500,curve:g.outBounce})}),n.on("touchend",function(t){b.clear(d),d=b.setTimeout(function(){i.set(0,{duration:500,curve:g.outBounce})},300)})):(n.on("mousedown",function(t){i.set(1),m=!0}),n.on("mouseover",function(t){0==m&&(b.clear(d),i.set(1,{duration:500,curve:g.outBounce}))}),n.on("mouseout",function(t){b.clear(d),0==m&&(b.clear(d),d=b.setTimeout(function(){i.set(0,{duration:500,curve:g.outBounce})},300))})),n}var d=t("famous/core/View"),p=t("famous/core/Surface"),f=t("famous/core/Transform"),m=t("famous/modifiers/StateModifier"),g=t("famous/transitions/Easing"),y=t("famous/surfaces/ContainerSurface"),v=t("famous/surfaces/ImageSurface"),w=t("famous/modifiers/Draggable"),b=t("famous/utilities/Timer"),_=t("famous/transitions/Transitionable"),S=t("famous/core/Modifier");o.prototype=Object.create(d.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},i.exports=o,o.prototype.getHandlePosition=function(t){var e;switch(t){case 0:e=this.leftHandleAbsolutePosition;break;case 1:e=this.rightHandleAbsolutePosition}return e},o.prototype.getHandleLeftLimit=function(t){var e;switch(t){case 0:e=0+this.minimumColumnWidth;break;case 1:e=this.leftHandleAbsolutePosition+this.minimumColumnWidth}return e},o.prototype.getHandleRightLimit=function(t){var e;switch(t){case 0:e=this.rightHandleAbsolutePosition-this.minimumColumnWidth;break;case 1:e=this.boardViewRef.windowWidth-this.minimumColumnWidth}return e},o.prototype.moveHandle=function(t,e){var i,o=this,n=function(){var t=o.leftHandleDraggable.getPosition(),e=o.leftHandleStartPosition+t[0];u(o,e)},s=function(){var t=o.rightHandleDraggable.getPosition(),e=o.rightHandleStartPosition+t[0];l(o,e)},r=function(){o.boardViewRef.columns[0].snap(),o.boardViewRef.columns[1].snap()},a=function(){o.boardViewRef.columns[1].snap(),o.boardViewRef.columns[2].snap()};switch(t){case 0:this.leftHandle.removeHandle(),this.leftHandle.makeHandleSurfaceGreen(),i=e-this.leftHandleStartPosition,this.leftHandleAbsolutePosition=e,this.myTimer=b.setInterval(n,20),this.leftHandleDraggable.setPosition([i,0,0],{curve:g.outCirc,duration:1e3},function(){o.leftHandle.makeHandleSurfaceGrey(),u(o,e),b.clear(o.myTimer),b.setTimeout(r,100)});break;case 1:this.rightHandle.removeHandle(),this.rightHandle.makeHandleSurfaceGreen(),i=e-this.rightHandleStartPosition,this.rightHandleAbsolutePosition=e,this.myTimer=b.setInterval(s,20),this.rightHandleDraggable.setPosition([i,0,0],{curve:g.outCirc,duration:1e3},function(){o.rightHandle.makeHandleSurfaceGrey(),l(o,e),b.clear(o.myTimer),b.setTimeout(a,100)})}},o.prototype.disableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"none"}),this.rightHandle.setProperties({pointerEvents:"none"})},o.prototype.enableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"all"}),this.rightHandle.setProperties({pointerEvents:"all"})}}),define("views/FourColumnMusicircusInterfaceView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing","famous/surfaces/ContainerSurface","famous/surfaces/ImageSurface","famous/modifiers/Draggable","famous/utilities/Timer","famous/transitions/Transitionable","famous/core/Modifier"],function(t,e,i){function o(t,e,i){f.apply(this,arguments),this.boardViewRef=t,this.minimumColumnWidth=this.boardViewRef.minimumColumnWidth,this.windowWidth=e,this.windowHeight=i,this.rootModifier=new y({size:this.options.size,origin:[0,0],align:[0,0]}),this.myTimer,this.handleSize=[this.boardViewRef.options.gutter+2,window.innerHeight],this.handleSizeLarge=[this.boardViewRef.options.gutter+20,window.innerHeight],this.mainNode=this.add(this.rootModifier),n.call(this)}function n(){var t=this;t.leftHandleStartPosition=t.boardViewRef.options.columnWidths[0]*this.windowWidth,t.leftHandleAbsolutePosition=t.boardViewRef.options.columnWidths[0]*this.windowWidth,t.rightHandleStartPosition=(t.boardViewRef.options.columnWidths[0]+t.boardViewRef.options.columnWidths[1])*this.windowWidth,t.rightHandleAbsolutePosition=(t.boardViewRef.options.columnWidths[0]+t.boardViewRef.options.columnWidths[1])*this.windowWidth,t.secondRightHandleStartPosition=(t.boardViewRef.options.columnWidths[0]+t.boardViewRef.options.columnWidths[1]+t.boardViewRef.options.columnWidths[2])*this.windowWidth,t.secondRightHandleAbsolutePosition=(t.boardViewRef.options.columnWidths[0]+t.boardViewRef.options.columnWidths[1]+t.boardViewRef.options.columnWidths[2])*this.windowWidth,t.leftHandle=p.call(this),t.leftHandleModifier=new y({align:[0,0],origin:[.5,0],transform:g.translate(t.leftHandleStartPosition,0,0)});var e=0-t.leftHandleStartPosition+t.minimumColumnWidth,i=t.rightHandleAbsolutePosition-t.leftHandleAbsolutePosition-t.minimumColumnWidth;t.leftHandleDraggable=new _({xRange:[e,i],yRange:[0,0]}),t.leftHandleDraggable.subscribe(t.leftHandle),t.mainNode.add(t.leftHandleDraggable).add(t.leftHandleModifier).add(t.leftHandle),t.rightHandle=p.call(this),t.rightHandleModifier=new y({align:[0,0],origin:[.5,0],transform:g.translate(t.rightHandleStartPosition,0,0)}),t.rightHandleDraggable=new _({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.rightHandleDraggable.subscribe(t.rightHandle),t.mainNode.add(t.rightHandleDraggable).add(t.rightHandleModifier).add(t.rightHandle),t.secondRightHandle=p.call(this),t.secondRightHandleModifier=new y({align:[0,0],origin:[.5,0],transform:g.translate(t.secondRightHandleStartPosition,0,0)}),t.secondRightHandleDraggable=new _({xRange:[t.rightHandleAbsolutePosition-t.secondRightHandleStartPosition+t.minimumColumnWidth,this.windowWidth-t.secondRightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.secondRightHandleDraggable.subscribe(t.secondRightHandle),t.mainNode.add(t.secondRightHandleDraggable).add(t.secondRightHandleModifier).add(t.secondRightHandle),t.leftHandleDraggable.on("start",function(){s(t,"left")}),t.leftHandleDraggable.on("end",function(){r(t,"left")}),t.leftHandleDraggable.on("update",function(){a(t)}),t.rightHandleDraggable.on("start",function(){s(t,"right")}),t.rightHandleDraggable.on("end",function(){r(t,"right")}),t.rightHandleDraggable.on("update",function(){h(t)}),t.secondRightHandleDraggable.on("start",function(){s(t,"secondRight")}),t.secondRightHandleDraggable.on("end",function(){r(t,"secondRight")}),t.secondRightHandleDraggable.on("update",function(){c(t)}),window.handles=[t.leftHandle,t.rightHandle,t.secondRightHandle]}function s(t,e){switch(t.boardViewRef.handlesActive=!0,e){case"left":t.rightHandle.setProperties({pointerEvents:"none"}),t.secondRightHandle.setProperties({pointerEvents:"none"});break;case"right":t.leftHandle.setProperties({pointerEvents:"none"}),t.secondRightHandle.setProperties({pointerEvents:"none"});break;case"secondRight":t.leftHandle.setProperties({pointerEvents:"none"}),t.rightHandle.setProperties({pointerEvents:"none"})}t.boardViewRef.disableScrollSurfaces()}function r(t,e){switch(t.leftHandle.removeHandle(),e){case"left":t.leftHandle.removeHandle();var i=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+i[0],t.rightHandle.setProperties({pointerEvents:"all"}),t.secondRightHandle.setProperties({pointerEvents:"all"}),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]});break;case"right":t.rightHandle.removeHandle();var i=t.rightHandleDraggable.getPosition();t.rightHandleAbsolutePosition=t.rightHandleStartPosition+i[0],t.leftHandle.setProperties({pointerEvents:"all"}),t.secondRightHandle.setProperties({pointerEvents:"all"}),t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.secondRightHandleDraggable.setOptions({xRange:[t.rightHandleAbsolutePosition-t.secondRightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.secondRightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]});break;case"secondRight":t.secondRightHandle.removeHandle();var i=t.secondRightHandleDraggable.getPosition();t.secondRightHandleAbsolutePosition=t.secondRightHandleStartPosition+i[0],t.leftHandle.setProperties({pointerEvents:"all"}),t.rightHandle.setProperties({pointerEvents:"all"}),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}t.boardViewRef.enableScrollSurfaces();for(var o=0;o<t.boardViewRef.columnCount;o++)t.boardViewRef.columns[o].snap();t.boardViewRef.handlesActive=!1}function a(t){var e=t.leftHandleDraggable.getPosition();t.leftHandleAbsolutePosition=t.leftHandleStartPosition+e[0],u(t,t.leftHandleStartPosition+e[0]),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}function u(t,e){t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.boardViewRef.coloumnModifiers[0].sizeFrom([e,void 0]);var i;i=t.boardViewRef.windowHeight>e*t.boardViewRef.widthToHeightRatio?e*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,e*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.columns[0].resizeItems([e,i],t.boardViewRef.widthToHeightRatio);var o,n=t.rightHandleAbsolutePosition-e;o=t.boardViewRef.windowHeight>n*t.boardViewRef.widthToHeightRatio?n*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,n*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(o=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[1].sizeFrom([n,void 0]),t.boardViewRef.coloumnModifiers[1].setTransform(g.translate(e,0,0)),t.boardViewRef.columns[1].resizeItems([n,o],t.boardViewRef.widthToHeightRatio)}function h(t){var e=t.rightHandleDraggable.getPosition();t.rightHandleAbsolutePosition=t.rightHandleStartPosition+e[0],l(t,t.rightHandleStartPosition+e[0]),t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.secondRightHandleDraggable.setOptions({xRange:[t.rightHandleAbsolutePosition-t.secondRightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.secondRightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}function l(t,e){t.leftHandleDraggable.setOptions({xRange:[0-t.leftHandleStartPosition+t.minimumColumnWidth,t.rightHandleAbsolutePosition-t.leftHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]}),t.secondRightHandleDraggable.setOptions({xRange:[t.rightHandleAbsolutePosition-t.secondRightHandleStartPosition+t.minimumColumnWidth,t.windowWidth-t.secondRightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]});var i,o=e-t.leftHandleAbsolutePosition;i=t.boardViewRef.windowHeight>o*t.boardViewRef.widthToHeightRatio?o*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,o*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[1].sizeFrom([o,void 0]),t.boardViewRef.columns[1].resizeItems([o,i],t.boardViewRef.widthToHeightRatio);var n,s=t.secondRightHandleAbsolutePosition-e;n=t.boardViewRef.windowHeight>s*t.boardViewRef.widthToHeightRatio?s*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,s*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(n=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[2].sizeFrom([s,void 0]),t.boardViewRef.coloumnModifiers[2].setTransform(g.translate(e,0,0)),t.boardViewRef.columns[2].resizeItems([s,n],t.boardViewRef.widthToHeightRatio)}function c(t){var e=t.secondRightHandleDraggable.getPosition();t.secondRightHandleAbsolutePosition=t.secondRightHandleStartPosition+e[0],d(t,t.secondRightHandleStartPosition+e[0]),t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]})}function d(t,e){t.rightHandleDraggable.setOptions({xRange:[t.leftHandleAbsolutePosition-t.rightHandleStartPosition+t.minimumColumnWidth,t.secondRightHandleAbsolutePosition-t.rightHandleStartPosition-t.minimumColumnWidth],yRange:[0,0]});var i,o=e-t.rightHandleAbsolutePosition;i=t.boardViewRef.windowHeight>o*t.boardViewRef.widthToHeightRatio?o*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,o*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(i=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[2].sizeFrom([o,void 0]),t.boardViewRef.coloumnModifiers[2].setTransform(g.translate(t.rightHandleAbsolutePosition,0,0)),t.boardViewRef.columns[2].resizeItems([o,i],t.boardViewRef.widthToHeightRatio);var n,s=t.windowWidth-e;n=t.boardViewRef.windowHeight>o*t.boardViewRef.widthToHeightRatio?s*t.boardViewRef.widthToHeightRatio:t.boardViewRef.windowHeight,s*t.boardViewRef.widthToHeightRatio<t.boardViewRef.windowHeight/2&&(n=t.boardViewRef.windowHeight/2),t.boardViewRef.coloumnModifiers[3].sizeFrom([s,void 0]),t.boardViewRef.coloumnModifiers[3].setTransform(g.translate(e,0,0)),t.boardViewRef.columns[3].resizeItems([s,n],t.boardViewRef.widthToHeightRatio)}function p(){var t,e=this,i=new H(0);t=window.hudStart&&!WURFL.is_mobile?["scroll-surface-blur"]:["scroll-surface"];var o,n=new w({classes:t,size:e.handleSize,properties:{color:"#fff",cursor:"col-resize",zIndex:0}}),s=new m({size:e.handleSize,origin:[.5,0],properties:{backgroundColor:"#333",color:"#fff",cursor:"col-resize",zIndex:0,pointerEvents:"none"}}),r=new T({origin:[.5,.5],align:[.5,.5],transform:function(){return g.translate(0,0,1)}}),a=new m({size:e.handleSize,origin:[.5,0],opacity:0,properties:{backgroundColor:"#666",zIndex:0,pointerEvents:"none"}}),u=new T({origin:[.5,.5],align:[.5,.5],transform:function(){return g.translate(0,0,1)},opacity:function(){return i.get()}}),h=[];if(WURFL.is_mobile){var o="images/left_right_wide.png";h=[86,34]}else{var o="images/left_right.png";h=[72,34]}var l=new b({content:o,size:[h[0],h[1]],properties:{pointerEvents:"all",zIndex:0}}),c=new T({align:[.5,.45],origin:[.5,.5],transform:function(){var t=i.get();return g.scale(t,t,1)}});n.add(r).add(s),n.add(u).add(a),n.add(c).add(l);var d,p=!1;return n.removeHandle=function(){s.setProperties({backgroundColor:"#333"}),S.clear(d),p=!1,d=S.setTimeout(function(){i.set(0,{duration:500,curve:v.outBounce})},300)},n.makeHandleSurfaceGreen=function(){s.setProperties({backgroundColor:"#666"})},n.makeHandleSurfaceGrey=function(){s.setProperties({backgroundColor:"#333333"})},window.debug?(n.on("mouseenter",function(t){S.clear(d),i.set(1,{duration:500,curve:v.outBounce})}),n.on("mouseleave",function(t){S.clear(d),d=S.setTimeout(function(){i.set(0,{duration:500,curve:v.outBounce})},300)})):WURFL.is_mobile?(n.on("touchstart",function(t){S.clear(d),i.set(1,{duration:500,curve:v.outBounce})}),n.on("touchend",function(t){S.clear(d),d=S.setTimeout(function(){i.set(0,{duration:500,curve:v.outBounce})},300)})):(n.on("mousedown",function(t){i.set(1),p=!0}),n.on("mouseover",function(t){0==p&&(S.clear(d),i.set(1,{duration:500,curve:v.outBounce}))}),n.on("mouseout",function(t){S.clear(d),0==p&&(S.clear(d),d=S.setTimeout(function(){i.set(0,{duration:500,curve:v.outBounce})},300))})),n}var f=t("famous/core/View"),m=t("famous/core/Surface"),g=t("famous/core/Transform"),y=t("famous/modifiers/StateModifier"),v=t("famous/transitions/Easing"),w=t("famous/surfaces/ContainerSurface"),b=t("famous/surfaces/ImageSurface"),_=t("famous/modifiers/Draggable"),S=t("famous/utilities/Timer"),H=t("famous/transitions/Transitionable"),T=t("famous/core/Modifier");o.prototype=Object.create(f.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},i.exports=o,o.prototype.getHandlePosition=function(t){var e;switch(t){case 0:e=this.leftHandleAbsolutePosition;break;case 1:e=this.rightHandleAbsolutePosition;break;case 2:e=this.secondRightHandleAbsolutePosition}return e},o.prototype.getHandleLeftLimit=function(t){var e;switch(t){case 0:e=0+this.minimumColumnWidth;break;case 1:e=this.leftHandleAbsolutePosition+this.minimumColumnWidth;break;case 2:e=this.rightHandleAbsolutePosition+this.minimumColumnWidth}return e},o.prototype.getHandleRightLimit=function(t){var e;switch(t){case 0:e=this.rightHandleAbsolutePosition-this.minimumColumnWidth;break;case 1:e=this.secondRightHandleAbsolutePosition-this.minimumColumnWidth;break;case 2:e=this.boardViewRef.windowWidth-this.minimumColumnWidth}return e},o.prototype.moveHandle=function(t,e){var i,o=this,n=function(){var t=o.leftHandleDraggable.getPosition(),e=o.leftHandleStartPosition+t[0];u(o,e)},s=function(){var t=o.rightHandleDraggable.getPosition(),e=o.rightHandleStartPosition+t[0];l(o,e)},r=function(){var t=o.secondRightHandleDraggable.getPosition(),e=o.secondRightHandleStartPosition+t[0];d(o,e)},a=function(){o.boardViewRef.columns[0].snap(),o.boardViewRef.columns[1].snap()},h=function(){o.boardViewRef.columns[1].snap(),o.boardViewRef.columns[2].snap()},c=function(){o.boardViewRef.columns[2].snap(),o.boardViewRef.columns[3].snap()};switch(t){case 0:this.leftHandle.removeHandle(),this.leftHandle.makeHandleSurfaceGreen(),i=e-this.leftHandleStartPosition,this.leftHandleAbsolutePosition=e,this.myTimer=S.setInterval(n,20),this.leftHandleDraggable.setPosition([i,0,0],{curve:v.outCirc,duration:1e3},function(){o.leftHandle.makeHandleSurfaceGrey(),u(o,e),S.clear(o.myTimer),S.setTimeout(a,100)});break;case 1:this.rightHandle.removeHandle(),this.rightHandle.makeHandleSurfaceGreen(),i=e-this.rightHandleStartPosition,this.rightHandleAbsolutePosition=e,this.myTimer=S.setInterval(s,20),this.rightHandleDraggable.setPosition([i,0,0],{curve:v.outCirc,duration:1e3},function(){o.rightHandle.makeHandleSurfaceGrey(),l(o,e),S.clear(o.myTimer),S.setTimeout(h,100)});break;case 2:this.secondRightHandle.removeHandle(),this.secondRightHandle.makeHandleSurfaceGreen(),i=e-this.secondRightHandleStartPosition,this.secondRightHandleAbsolutePosition=e,this.myTimer=S.setInterval(r,20),this.secondRightHandleDraggable.setPosition([i,0,0],{curve:v.outCirc,duration:1e3},function(){o.secondRightHandle.makeHandleSurfaceGrey(),d(o,e),S.clear(o.myTimer),S.setTimeout(c,100)})}},o.prototype.disableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"none"}),this.rightHandle.setProperties({pointerEvents:"none"}),this.secondRightHandle.setProperties({pointerEvents:"none"})},o.prototype.enableHandleSurfaces=function(){this.leftHandle.setProperties({pointerEvents:"all"}),this.rightHandle.setProperties({pointerEvents:"all"}),this.secondRightHandle.setProperties({pointerEvents:"all"})}}),define("views/BoardView",["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ContainerSurface","famous/core/Transform","famous/modifiers/StateModifier","famous/core/Modifier","views/ColumnView","views/TwoColumnMusicircusInterfaceView","views/ThreeColumnMusicircusInterfaceView","views/FourColumnMusicircusInterfaceView","data/DataArray"],function(t,e,i){function o(t){switch(h.apply(this,arguments),this.appViewRef=t,this.rootModifier=new d({size:[void 0,void 0],origin:[0,0],align:[0,0]}),this.mainNode=this.add(this.rootModifier),this.boardContainer=new l({size:[void 0,void 0],properties:{pointerEvents:"all",cursor:"pointer"}}),this.mainNode.add(this.boardContainer),this.columns=[],this.coloumnModifiers=[],this.autoScrollInactive=!0,WURFL.is_mobile&&(this.options.gutter=2*this.options.gutter),this.gutter=this.options.gutter,this.columnCount=this.options.columnCount,this.isMobile=this.options.isMobile,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,WURFL.is_mobile?this.minimumColumnWidth=Math.floor(.2*window.innerWidth):this.minimumColumnWidth=Math.floor(.15*window.innerWidth),this.columnCount){case 1:this.maximumColumnWidth=Math.floor(1*window.innerWidth);break;case 2:this.maximumColumnWidth=Math.floor(.85*window.innerWidth);break;case 3:this.maximumColumnWidth=Math.floor(.7*window.innerWidth);break;case 4:this.maximumColumnWidth=Math.floor(.55*window.innerWidth)}switch(this.widthToHeightRatio=1,this.columnItemHeights=[],this.columnWidths=[],this.columnStartXPositions=[],2==this.columnCount?this.videoData=v.createNewNonSilentColumnDataArrays():this.videoData=v.createNewColumnDataArrays(),n.call(this),this.columnCount){case 1:break;case 2:this.musicircusInterface=new m(this,this.windowWidth,this.windowHeight),this.mainNode.add(this.musicircusInterface);break;case 3:this.musicircusInterface=new g(this,this.windowWidth,this.windowHeight),this.mainNode.add(this.musicircusInterface);break;case 4:this.musicircusInterface=new y(this,this.windowWidth,this.windowHeight),this.mainNode.add(this.musicircusInterface)}}function n(){if(4==this.columnCount){this.columnWidths=[];for(var t=0;t<this.columnCount;t++)this.windowHeight>this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio?this.columnItemHeights[t]=this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio:this.columnItemHeights[t]=this.windowHeight,this.columnItemHeights[t]<this.windowHeight/2&&(this.columnItemHeights[t]=this.windowHeight/2)
;this.columnWidths=[this.windowWidth*this.options.columnWidths[0]-this.options.gutter/2,this.windowWidth*this.options.columnWidths[1]-this.options.gutter,this.windowWidth*this.options.columnWidths[2]-this.options.gutter,this.windowWidth*this.options.columnWidths[3]-this.options.gutter/2],this.columnStartXPositions=[0,this.windowWidth*this.options.columnWidths[0]+this.options.gutter/2,this.windowWidth*(this.options.columnWidths[0]+this.options.columnWidths[1])+this.options.gutter/2,this.windowWidth*(this.options.columnWidths[0]+this.options.columnWidths[1]+this.options.columnWidths[2])+this.options.gutter/2]}if(3==this.columnCount){this.columnWidths=[];for(var t=0;t<this.columnCount;t++)this.windowHeight>this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio?this.columnItemHeights[t]=this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio:this.columnItemHeights[t]=this.windowHeight,this.columnItemHeights[t]<this.windowHeight/2&&(this.columnItemHeights[t]=this.windowHeight/2);this.columnWidths=[this.windowWidth*this.options.columnWidths[0]-this.options.gutter/2,this.windowWidth*this.options.columnWidths[1]-this.options.gutter,this.windowWidth*this.options.columnWidths[2]-this.options.gutter/2],this.columnStartXPositions=[0,this.windowWidth*this.options.columnWidths[0]+this.options.gutter/2,this.windowWidth*(this.options.columnWidths[0]+this.options.columnWidths[1])+this.options.gutter/2]}if(2==this.columnCount){this.columnWidths=[];for(var t=0;t<this.columnCount;t++)this.windowHeight>this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio?this.columnItemHeights[t]=this.windowWidth*this.options.columnWidths[t]*this.widthToHeightRatio:this.columnItemHeights[t]=this.windowHeight,this.columnItemHeights[t]<this.windowHeight/2&&(this.columnItemHeights[t]=this.windowHeight/2);this.columnWidths=[this.windowWidth*this.options.columnWidths[0]-this.options.gutter/2,this.windowWidth*this.options.columnWidths[1]-this.options.gutter/2],this.columnStartXPositions=[0,this.windowWidth*this.options.columnWidths[0]+this.options.gutter/2]}1==this.columnCount&&(this.columnItemHeights=[.5*this.windowWidth*this.widthToHeightRatio],this.columnWidths=[window.innerWidth],this.columnStartXPositions=[0]);for(var t=0;t<this.columnCount;t++)this.columns[t]=new f({maxColumnWidth:this.maximumColumnWidth,columnItemHeight:this.columnItemHeights[t],columnWidth:this.columnWidths[t],columnData:this.videoData[t],isMobile:this.isMobile,windowWidth:this.windowWidth,boardContainer:this.boardContainer,boardViewRef:this,columnNumber:t,columnCount:this.columnCount}),this.coloumnModifiers[t]=new p({transform:c.translate(this.columnStartXPositions[t],0,0)}),this.coloumnModifiers[t].sizeFrom([this.columnWidths[t],void 0]),this.mainNode.add(this.coloumnModifiers[t]).add(this.columns[t]),this.columns[t].snapRandomPlay.call(this.columns[t])}function s(t){return this.musicircusInterface.getHandlePosition(t)}function r(t){return this.musicircusInterface.getHandleLeftLimit(t)}function a(t){return this.musicircusInterface.getHandleRightLimit(t)}function u(t,e){this.musicircusInterface.moveHandle(t,e)}var h=t("famous/core/View"),l=(t("famous/core/Surface"),t("famous/surfaces/ContainerSurface")),c=t("famous/core/Transform"),d=t("famous/modifiers/StateModifier"),p=t("famous/core/Modifier"),f=t("views/ColumnView"),m=t("views/TwoColumnMusicircusInterfaceView"),g=t("views/ThreeColumnMusicircusInterfaceView"),y=t("views/FourColumnMusicircusInterfaceView"),v=t("data/DataArray");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={columnCount:3,gutter:18,columnWidths:[.2,.3,.5,.2],isMobile:!1},i.exports=o,o.prototype.disableScrollSurfaces=function(){for(var t=0;t<this.columnCount;t++)this.columns[t].scrollSurface.setProperties({pointerEvents:"none"}),this.columns[t].scrollSurface.draggable.deactivate(),this.columns[t].topScrollSurface.setProperties({pointerEvents:"none"}),this.columns[t].bottomScrollSurface.setProperties({pointerEvents:"none"});this.appViewRef.disableHUD()},o.prototype.enableScrollSurfaces=function(){for(var t=0;t<this.columnCount;t++)this.columns[t].scrollSurface.setProperties({pointerEvents:"all"}),this.columns[t].scrollSurface.draggable.activate(),this.columns[t].topScrollSurface.setProperties({pointerEvents:"all"}),this.columns[t].bottomScrollSurface.setProperties({pointerEvents:"all"});this.appViewRef.enableHUD()},o.prototype.autoResizeColumns=function(){var t=Math.floor(Math.random()*(this.columnCount-1)),e=(s.call(this,t),r.call(this,t)),i=a.call(this,t),o=e+Math.floor(Math.random()*(i-e));u.call(this,t,o)},o.prototype.disableHandles=function(){this.musicircusInterface&&this.musicircusInterface.disableHandleSurfaces()},o.prototype.enableHandles=function(){this.musicircusInterface&&this.musicircusInterface.enableHandleSurfaces()},o.prototype.disableOtherColumnSurfaces=function(t){for(var e=0;e<this.columnCount;e++)e!=t&&(this.columns[e].scrollSurface.setProperties({pointerEvents:"none"}),this.columns[e].scrollSurface.draggable.deactivate(),this.columns[e].topScrollSurface.setProperties({pointerEvents:"none"}),this.columns[e].bottomScrollSurface.setProperties({pointerEvents:"none"}))},o.prototype.enableAllColumnSurfaces=function(){for(var t=0;t<this.columnCount;t++)this.columns[t]&&(this.columns[t].scrollSurface.setProperties({pointerEvents:"all"}),this.columns[t].scrollSurface.draggable.activate(),this.columns[t].topScrollSurface.setProperties({pointerEvents:"all"}),this.columns[t].bottomScrollSurface.setProperties({pointerEvents:"all"}))}}),define("views/AppView",["require","exports","module","famous/core/Engine","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/core/EventHandler","famous/utilities/KeyCodes","famous/core/Modifier","famous/utilities/Timer","famous/core/Modifier","views/BoardView"],function(t,e,i){function o(t,e,i,o){h.apply(this,arguments),this.columnCount=e,this.isMobile=i,this.mainContexRef=t,this.mainRef=o,this.fourColumnWidthArray=[],this.threeColumnWidthArray=[],this.twoColumnWidthArray=[];var r=this;WURFL.is_mobile||p.on("keypress",function(t){s.call(r,t)}),n.call(this,t),this.autoResizeOn=!1}function n(){function t(){o.boardView=new f(o,{columnCount:o.columnCount,columnWidths:o.columnWidths,isMobile:o.isMobile}),o.add(o.boardView)}var e=document.createElement("script");e.src="http://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i);var o=this;switch(this.fourColumnWidthArray=[[.2,.3,.3,.2],[.2,.2,.3,.3],[.2,.3,.2,.3],[.3,.2,.3,.2],[.3,.2,.2,.3],[.3,.3,.2,.2],[.3,.2,.2,.3],[.4,.2,.2,.2],[.2,.4,.2,.2],[.2,.2,.4,.2],[.2,.2,.2,.4]],this.threeColumnWidthArray=[[.2,.4,.4],[.3,.4,.3],[.2,.2,.6],[.5,.2,.3],[.4,.35,.25],[.35,.45,.2],[.2,.25,.55],[.5,.25,.25],[.4,.35,.25],[.2,.5,.3],[.4,.3,.3]],this.twoColumnWidthArray=[[.2,.8],[.3,.7],[.4,.6],[.5,.5],[.6,.4],[.7,.3],[.8,.2]],this.columnWidths,this.columnCount){case 1:break;case 2:var n=Math.floor(Math.random()*this.twoColumnWidthArray.length);this.columnWidths=this.twoColumnWidthArray[n];break;case 3:var n=Math.floor(Math.random()*this.threeColumnWidthArray.length);this.columnWidths=this.threeColumnWidthArray[n];break;case 4:var n=Math.floor(Math.random()*this.fourColumnWidthArray.length);this.columnWidths=this.fourColumnWidthArray[n]}WURFL.is_mobile?t():window.onYouTubeIframeAPIReady=function(){t()}}function s(t){switch(self=this,t){case"Reload":switch(this.columnCount){case 1:window.location.href=window.location.pathname+"?nocols=1&hud=0";break;case 2:window.location.href=window.location.pathname+"?nocols=2&hud=0";break;case 3:window.location.href=window.location.pathname+"?nocols=3&hud=0";break;case 4:window.location.href=window.location.pathname+"?nocols=4&hud=0"}break;case"TwoColumns":window.location.href=window.location.pathname+"?nocols=2&hud=0";break;case"ThreeColumns":window.location.href=window.location.pathname+"?nocols=3&hud=0";break;case"FourColumns":window.location.href=window.location.pathname+"?nocols=4&hud=0"}}function r(){var t=this;t.autoResizeOn&&(d.clear(),d.setTimeout(function(){a.call(t)},5e3))}function a(){var t=this;t.boardView&&t.autoResizeOn&&!t.boardView.handlesActive&&t.boardView.autoScrollInactive&&t.boardView.autoResizeColumns(),t.autoResizeOn&&(d.clear(),d.setTimeout(function(){a.call(t)},5e3))}var u=t("famous/core/Engine"),h=t("famous/core/View"),l=(t("famous/core/Surface"),t("famous/core/Transform"),t("famous/modifiers/StateModifier"),t("famous/core/EventHandler")),c=t("famous/utilities/KeyCodes"),d=(t("famous/core/Modifier"),t("famous/utilities/Timer")),p=new l,f=(t("famous/core/Modifier"),t("views/BoardView"));o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},u.on("keypress",function(t){t.charCode!=c.r&&t.charCode!=c.R||p.emit("keypress","Reload"),t.charCode==c[2]&&p.emit("keypress","TwoColumns"),t.charCode==c[3]&&p.emit("keypress","ThreeColumns"),t.charCode==c[4]&&p.emit("keypress","FourColumns")}),o.prototype.toggleAutomaticResize=function(t){console.log("toggle"),t?(this.autoResizeOn=!0,r.call(this)):this.autoResizeOn=!1},o.prototype.disableHUD=function(){window.disableHUD()},o.prototype.enableHUD=function(){window.enableHUD()},i.exports=o}),define("views/ColumnNumberButtons",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/core/Modifier","famous/transitions/Transitionable","famous/transitions/Easing","famous/modifiers/Draggable"],function(t,e,i){function o(){s.apply(this,arguments),self=this,this.rootModifier=new u({origin:[0,0],align:[0,0]}),this.mainNode=this.add(this.rootModifier),this.HEIGHT=45,this.WIDTH=65,this.TRANSITION={duration:50,curve:c.outBounce},this.twoState=new l(0),this.threeState=new l(0),this.fourState=new l(0),2==this.options.columnCount?(this.twoIsToggled=!0,this.twoState.set(1),this.twoActive=!0):(this.twoIsToggled=!1,this.twoActive=!1),3==this.options.columnCount?(this.threeIsToggled=!0,this.threeState.set(1),this.threeActive=!0):(this.threeIsToggled=!1,this.threeActive=!1),4==this.options.columnCount?(this.fourIsToggled=!0,this.fourState.set(1),this.fourActive=!0):(this.fourIsToggled=!1,this.fourActive=!1),WURFL.is_mobile||(n.call(this,this.twoState,this.twoIsToggled,[.7,.2],0,0,"?nocols=2&hud=1",this.twoActive,"columns","2",!1,!1,this.WIDTH,this.HEIGHT),n.call(this,this.threeState,this.threeIsToggled,[.7,.2],75,0,"?nocols=3&hud=1",this.threeActive,"","3",!1,!1,this.WIDTH,this.HEIGHT),n.call(this,this.fourState,this.fourIsToggled,[.7,.2],150,0,"?nocols=4&hud=1",this.fourActive,"","4",!1,!1,this.WIDTH,this.HEIGHT));var t,e;WURFL.is_mobile?window.portrait?(e=110,t=[.05,.15]):(e=200,t=[.6,.4]):(e=200,t=[.7,.7]),this.autoPlay=new l(0),this.autoPlayToggled=!1,n.call(this,this.autoPlay,this.autoPlayToggled,t,0,0,"?nocols=4&hud=0",!1,"","demo mode",!0,!1,e,this.HEIGHT);var i,o;WURFL.is_mobile?window.portrait?(o=166,i=[.43,.15]):(o=200,i=[.6,.2]):(o=200,i=[.7,.45]),this.reload=new l(0),this.reloadToggled=!1;var r;switch(r=WURFL.is_mobile?"new music selection":"new video selection",this.options.columnCount){case 2:n.call(this,this.reload,this.reloadToggled,i,0,0,"?nocols=2&hud=1",!1,"none",r,!1,!0,o,this.HEIGHT);break;case 3:n.call(this,this.reload,this.reloadToggled,i,0,0,"?nocols=3&hud=1",!1,"none",r,!1,!0,o,this.HEIGHT);break;case 4:n.call(this,this.reload,this.reloadToggled,i,0,0,"?nocols=4&hud=1",!1,"none",r,!1,!0,o,this.HEIGHT)}}function n(t,e,i,o,n,s,u,l,c,d,p,f,m){var g=this;this.buttonWidth=f,this.buttonHeight=m;var y="all";if(u)var y="none";var v,w=new r({size:[this.buttonWidth,this.buttonHeight],content:c,properties:{textAlign:"center",lineHeight:this.buttonHeight+"px",backgroundColor:"#ff4b23",border:"1px solid gray",borderRadius:this.buttonHeight+"px",zIndex:2}}),b=new r({size:[this.buttonWidth,this.buttonHeight],content:c,properties:{textAlign:"center",lineHeight:this.buttonHeight+"px",textAlign:"center",lineHeight:this.buttonHeight+"px",backgroundColor:"#eee",border:"1px solid gray",borderRadius:this.buttonHeight+"px",pointerEvents:y,cursor:"pointer",zIndex:2}}),_=(new r({size:[this.HEIGHT,this.buttonHeight],content:c,properties:{textAlign:"center",lineHeight:this.buttonHeight+"px",backgroundColor:"#EEE",border:"1px solid gray",borderRadius:"10px",boxShadow:"0 10px 20px -5px rgba(0, 0, 0, 0.3)",cursor:"pointer",pointerEvents:"none",zIndex:2}}),new r({size:[void 0,!0],content:l,properties:{pointerEvents:"none",fontSize:"18px",zIndex:2}})),S=new h({transform:function(){return a.translate(0,-60,0)}}),H=new h({opacity:function(){return t.get()}}),T=new h({opacity:function(){return 1-t.get()}});new h({transform:function(){var e=t.get()*(g.buttonWidth-g.buttonHeight);return a.translate(e,0,0)}});v=0;var R=new h({origin:[0,1],align:i,transform:function(){return a.translate(o,n+v,0)}}),C=this.add(R);C.add(H).add(w),C.add(T).add(b),"none"!=l&&C.add(S).add(_),b.on("mouseenter",function(){b.setProperties({backgroundColor:"#999"}),e&&w.setProperties({backgroundColor:"#009300"})}),b.on("mouseleave",function(){b.setProperties({backgroundColor:"#eee"}),e&&w.setProperties({backgroundColor:"#ff4b23"})}),b.on("mouseup",function(){function i(){d?g.options.autoPlay.call(g.options.appView,e):window.location.href=window.location.pathname+s}function o(){d&&g.options.autoPlay.call(g.options.appView,e)}d||p||(g.twoState.set(0,g.TRANSITION),g.threeState.set(0,g.TRANSITION),g.fourState.set(0,g.TRANSITION)),t.isActive()&&t.halt(),e?t.set(0,g.TRANSITION,o):t.set(1,g.TRANSITION,i),e=!e})}var s=t("famous/core/View"),r=t("famous/core/Surface"),a=t("famous/core/Transform"),u=t("famous/modifiers/StateModifier"),h=t("famous/core/Modifier"),l=t("famous/transitions/Transitionable"),c=t("famous/transitions/Easing");t("famous/modifiers/Draggable");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={columnCount:"columnCount",autoPlay:"autocomplete",appView:"appView"},i.exports=o}),define("audio/AudioEnable",["require","exports","module","famous/core/View","famous/utilities/Timer"],function(t,e,i){function o(){s.apply(this,arguments);this.isUnlocked=!1,this.context=this.options.context}function n(){var t=this;if(!this.isUnlocked){var e=this.context.createBuffer(1,1,22050),i=this.context.createBufferSource();i.buffer=e,i.connect(this.context.destination),i.start(0),r.setTimeout(function(){i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE?(t.isUnlocked=!0,t.options.hud.startSound()):n.call(t)},100)}}var s=t("famous/core/View"),r=t("famous/utilities/Timer");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.unlockAudio=function(){this.isUnlocked||n.call(this)},o.DEFAULT_OPTIONS={hud:"hud",context:"context"},i.exports=o}),define("views/HudView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing","famous/transitions/Transitionable","famous/core/Modifier","famous/surfaces/ImageSurface","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/Scrollview","famous/core/RenderNode","famous/modifiers/Draggable","views/ColumnNumberButtons","audio/AudioEnable"],function(t,e,o){function n(t,e,i){h.apply(this,arguments);var o=this;this.appViewRef=e,this.hudToggle=1==t,this.audioEnable=new _({hud:this,context:window.audioContext}),this.hudReveal=60,this.zTransform=600,this.rootModifier=new d({size:[void 0,void 0],origin:[0,0],align:[0,0],transform:c.translate(0,2e3,0)}),this.rootModifier.setTransform(c.translate(0,0,0),{duration:1700,curve:"easeInOut"}),this.mainNode=this.add(this.rootModifier),this.hudHeight=.66*window.innerHeight+o.hudReveal,this.hudTopHeight=window.innerHeight-this.hudHeight,this.hudStartPostion=window.innerHeight-this.hudHeight,this.hudContainer=new y({size:[void 0,o.hudHeight],properties:{pointerEvents:"none",zIndex:100}}),this.state=new f(0);var n=new m({transform:function(){var t=o.state.get(),e=o.hudStartPostion+o.hudHeight*t-o.hudReveal*t;return c.translate(0,e,5)}}),g=new m({transform:function(){var t=o.state.get(),e=-o.hudHeight-o.hudHeight*t;return c.translate(0,e,5)}});this.hudBg=new l({classes:["hud-bg","title"],content:"AN ALDEBURGH MUSICIRCUS",properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"rgba(255,255,255,0.9)",color:"#000",padding:"17px 20px"}}),this.hudTopBg=new l({classes:["hud-bg"],properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"rgba(0,0,0,0.5)",color:"#000",padding:"30px",fontWeight:"bold"}});new l({content:"Click anywhere to begin",properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"#00ee00",color:"#333",padding:"30px",textAlign:"center",lineHeight:"20px",border:"1px solid gray",borderRadius:"20px"}}),new d({size:[300,150],origin:[.5,.5],align:[.5,.5]});this.columnNumberButtons=new b({columnCount:i,autoPlay:this.appViewRef.toggleAutomaticResize,appView:this.appViewRef});var v=(new l({size:[370,340],properties:{textAlign:"left",lineHeight:this.HEIGHT+"px",pointerEvents:"all",fontSize:"24px",backgroundColor:"#EDEDE5",border:"1px solid gray",borderRadius:"10px",zIndex:1}}),new m({transform:function(){return c.translate(-228,-110,0)}}),new d({transform:c.translate(0,this.hudReveal,0)}));this.mainNode.add(n).add(this.hudContainer),this.hudContainer.add(this.hudBg),this.hudContainer.add(v).add(this.columnNumberButtons),this.mainNode.add(g).add(this.hudTopBg),s.call(this),r.call(this),u.call(this),a.call(this),0==this.hudToggle&&this.state.set(1,{duration:700,curve:p.outBounce})}function s(){var t=this;if(!WURFL.is_mobile){var e,i,o,n=new g({size:[150,33],content:"images/BRITTEN_PEARS_ARTS.png",properties:{zIndex:2,cursor:"pointer",pointerEvents:"all"}});WURFL.is_mobile?(e=[1,1],i=[1,1],o=[-5,0,0]):(e=[1,0],i=[1,.015],o=[-17,1,0]);var s=new m({origin:e,align:i,transform:c.translate(o[0],o[1],o[2])});t.hudContainer.add(s).add(n),n.on("click",function(){window.open("https://snapemaltings.co.uk/","_blank")})}var r,a,u;if(WURFL.is_mobile){var h=new l({size:[window.innerWidth,20],content:"Co-commissioned by Aldeburgh Music and The Space, designed and developed by Avco",classes:["avco-credit"],properties:{zIndex:2,cursor:"none",pointerEvents:"all",textAlign:"left"}});r=[0,0],a=[.05,1],u=[0,-15,0]}else{var h=new l({size:[250,20],content:"Designed and developed by AVCO",classes:["avco-credit"],properties:{zIndex:2,cursor:"pointer",pointerEvents:"all",textAlign:"left"}});r=[0,1],a=[.05,1],u=[0,0,0]}if(!WURFL.is_mobile){var d=new m({origin:r,align:a,transform:c.translate(u[0],u[1],u[2])});t.hudContainer.add(d).add(h),h.on("click",function(){window.open("http://www.avco.com/","_blank")})}}function r(){var t,e=this;t=WURFL.is_mobile?[.9,0]:[.5,0],this.openClose=new y({size:[50,50],properties:{zIndex:2,pointerEvents:"none"}});var i=new l({size:[30,6],properties:{zIndex:2,backgroundColor:"#333",borderRadius:"3px",pointerEvents:"none"}}),o=new m({origin:[.5,.5],align:[.5,0],transform:function(){var t=45*(1-e.state.get());return c.rotateZ(t*Math.PI/180)}}),n=new m({transform:function(){var t=-5*e.state.get();return c.translate(0,t,0)}}),s=new l({size:[30,6],properties:{zIndex:2,backgroundColor:"#333",borderRadius:"3px",pointerEvents:"none"}}),r=new m({origin:[.5,.5],align:[.5,0],transform:function(){var t=45*-(1-e.state.get());return c.rotateZ(t*Math.PI/180)}}),a=new m({transform:function(){var t=5*e.state.get();return c.translate(0,t,0)}});this.openCloseModifier=new m({origin:[.5,0],align:t,transform:function(){return c.translate(0,31,0)}}),this.openClose.add(o).add(n).add(i),this.openClose.add(r).add(a).add(s),this.hudContainer.add(this.openCloseModifier).add(this.openClose)}function a(){function t(t){if(this.hudToggle){if(this.state.set(1,{duration:800,curve:p.outBounce}),this.hudToggle=!1,!WURFL.is_mobile){for(i=0;i<window.scrollSurfaces.length;i++)window.scrollSurfaces[i].setClasses(["scroll-surface"]);for(i=0;i<window.handles.length;i++)window.handles[i].setClasses(["handle-surface"])}}else if(this.state.set(0,{duration:800,curve:p.outBounce}),this.hudToggle=!0,!WURFL.is_mobile){for(i=0;i<window.scrollSurfaces.length;i++)window.scrollSurfaces[i].setClasses(["scroll-surface-blur"]);for(i=0;i<window.handles.length;i++)window.handles[i].setClasses(["handle-surface-blur"])}WURFL.is_mobile&&(this.audioEnable.unlockAudio.call(this.audioEnable),this.audioUnlocked=!0)}var e=this;window.debug?(this.hudBg.on("mouseup",function(i){i=i||window.event,t.call(e,i)},!1),this.hudTopBg.on("mouseup",function(i){i=i||window.event,t.call(e,i)},!1)):WURFL.is_mobile?(this.hudBg.on("touchend",function(i){i=i||window.event,t.call(e,i)},!1),this.hudTopBg.on("touchend",function(i){i=i||window.event,t.call(e,i)},!1)):(this.hudBg.on("mouseup",function(i){i=i||window.event,t.call(e,i)},!1),this.hudTopBg.on("mouseup",function(i){i=i||window.event,t.call(e,i)},!1))}function u(){var t,e,i,o=this;WURFL.is_mobile?window.portrait?(t=[window.innerWidth-40,this.hudHeight-190],e=[.5,0],i=[.5,.2]):(t=[window.innerWidth/2,this.hudHeight-this.hudReveal-50],e=[0,0],i=[.05,0]):window.ie?(t=[window.innerWidth/2,this.hudHeight-this.hudReveal-170],e=[0,0],i=[.05,0]):(t=[window.innerWidth/2,this.hudHeight-this.hudReveal-40],e=[0,0],i=[.05,0]);var n,s=new y({classes:["infobox-container"],size:t,properties:{textAlign:"left",lineHeight:this.HEIGHT+"px",pointerEvents:"all",fontSize:"24px",border:"1px solid gray",borderRadius:"5px",padding:"40px",overflowY:"auto"}}),r=new m({origin:e,align:i,transform:function(){return c.translate(0,o.hudReveal+4,0)}});n=WURFL.is_mobile?window.safari?"<strong>NOTE:</strong> You are seeing a version without videos becuase you are using the Safari browser on OSX.<br /><br />                 To view the version with videos you need to use the Chrome browser which you can <a class='download-chrome' href='http://www.google.co.uk/intl/en_uk/chrome/browser/'>download here</a>                 or Firefox which you can <a class='download-chrome' href='https://www.mozilla.org/en-GB/firefox/new/'>download here.</a><br /><br />                 <strong>GET STARTED</strong><br /><br />                1. Click on the grey vertical borders and drag left or right to change volume and video size.<br /><br />                 2. Click on the coloured blocks and drag up or down to choose a different video.<br /><br />                 3. Choose 'demo mode' to automatically resize the columns.<br /><br />                 4. Click 'new music selection' to load a fresh set of performances.<br /><br />                 <br />                 <strong>Welcome to An Aldeburgh Musicircus, an online experience giving you the chance to mix your own John Cage happening.</strong><br /><br />                 In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,                 where as many musicians, speakers and dancers as he could gather would give different performances simultaneously                 and in close proximity. Audience members would wander around the space to create their own unique concert experiences,                 with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.                 In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />                 Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for                 two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from                 Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school                 choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />                 Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.                 You’ll find more than 40 performances. You can also load a new selection of performances and                 permutations by clicking the ‘new music selction’ button.<br /><br />                 Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />":"<strong>GET STARTED</strong><br /><br />                1. Drag the grey vertical borders left or right to change volume and image size.<br /><br />                 2. Drag the coloured blocks up or down to choose a different performance.<br /><br />                 3. Choose 'demo mode' to automatically resize the columns.<br /><br />                 4. Rotate your device to switch between 2 and 3 columns.<br /><br />                 <br />                 <strong>Welcome to An Aldeburgh Musicircus, an online app giving you the chance to mix your own John Cage happening.</strong><br /><br />                 In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,                 where as many musicians, speakers and dancers as he could gather would give different performances simultaneously                 and in close proximity. Audience members would wander around the space to create their own unique concert experiences,                 with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.                 In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />                 Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for                 two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from                 Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school                 choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />                 Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.                 You’ll find more than 40 performances and you can choose whether you listen to 2 or 3 at a time. You can also load a new selection of performances and                 permutations by clicking the ‘new music selction’ button.<br /><br />                 Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />":"<strong>GET STARTED</strong><br /><br />            1. Click on the grey vertical borders and drag left or right to change volume and video size.<br /><br />             2. Click on the coloured blocks and drag up or down to choose a different video.<br /><br />             3. Choose 'demo mode' to automatically resize the columns.<br /><br />             4. Click 'new video selection' to load a fresh set of performances.<br /><br />             <br />             <strong>Welcome to An Aldeburgh Musicircus, an online app giving you the chance to mix your own John Cage happening.</strong><br /><br />             In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,             where as many musicians, speakers and dancers as he could gather would give different performances simultaneously             and in close proximity. Audience members would wander around the space to create their own unique concert experiences,             with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.             In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />             Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for             two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from             Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school             choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />             Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.             You’ll find more than 40 performances and you can choose whether you listen to 2, 3 or 4 at a time. You can also load a new selection of performances and             permutations by clicking the ‘new video selection’ button.<br /><br />             Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />";var a=new v,u=[];a.sequenceFrom(u),surface=new l({classes:["infobox-surface"],size:[void 0,!0],content:n,properties:{fontSize:"16px"}}),WURFL.is_mobile?(surface.pipe(a),surface.node=new w,surface.mod=new m,surface.mod.sizeFrom(function(){return target=surface._currTarget,target?[void 0,target.offsetHeight]:[void 0,!0]}),surface.node.add(surface.mod).add(surface),u.push(surface.node),s.add(a)):s.add(surface),this.hudContainer.add(r).add(s)}var h=t("famous/core/View"),l=t("famous/core/Surface"),c=t("famous/core/Transform"),d=t("famous/modifiers/StateModifier"),p=t("famous/transitions/Easing"),f=t("famous/transitions/Transitionable"),m=t("famous/core/Modifier"),g=t("famous/surfaces/ImageSurface"),l=t("famous/core/Surface"),y=t("famous/surfaces/ContainerSurface"),v=t("famous/views/Scrollview"),w=t("famous/core/RenderNode"),b=(t("famous/modifiers/Draggable"),t("views/ColumnNumberButtons")),_=t("audio/AudioEnable");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.prototype.startSound=function(){},n.DEFAULT_OPTIONS={size:[void 0,500]},n.prototype.disable=function(){this.hudContainer.setProperties({pointerEvents:"none"}),this.hudBg.setProperties({pointerEvents:"none"}),this.hudTopBg.setProperties({pointerEvents:"none"})},n.prototype.enable=function(){this.hudContainer.setProperties({pointerEvents:"all"}),this.hudBg.setProperties({pointerEvents:"all"}),this.hudTopBg.setProperties({pointerEvents:"all"})},n.prototype.reload=function(t){this.rootModifier.setTransform(c.translate(0,2e3,0),{duration:t,curve:"easeInOut"})},o.exports=n}),define("main",["require","exports","module","famous/core/Engine","famous/utilities/Timer","famous/modifiers/StateModifier","famous/core/Transform","views/AppView","views/HudView"],function(t,e,i){function o(t,e){WURFL.is_mobile&&(window.innerHeight>window.innerWidth?(window.portrait=!0,t=2):(window.portrait=!1,t=3)),n.call(this,t,WURFL.is_mobile,e)}function n(t,e,i){var o=this;if(window.bufferStorage=[],WURFL.is_mobile){var n=window.AudioContext||window.webkitAudioContext;window.audioContext=new n}window.scrollSurfaces=[],window.handles=[],this.appView=new p(c,t,e),this.hudView=new f(i,this.appView,t),this.appModifier=new h({transform:l.translate(0,0,0)}),window.disableHUD=function(t){o.hudView.disable()},window.enableHUD=function(t){o.hudView.enable()},c.add(this.appModifier).add(this.appView),d.add(this.hudView)}function s(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,o){t[i]=o});return t}function r(){window.scrollTo(0,0),document.getElementById("loading-text").innerHTML="please wait, reloading....";this.hudView.reload(1e3),this.appModifier.setTransform(l.translate(0,-2e3,0),{duration:1e3,curve:"easeInOut"}),u.setTimeout(function(){window.location.reload(!1)},1e3)}
var a=t("famous/core/Engine"),u=t("famous/utilities/Timer"),h=t("famous/modifiers/StateModifier"),l=t("famous/core/Transform"),c=a.createContext(),d=a.createContext(),p=t("views/AppView"),f=t("views/HudView");d.setPerspective(900),function(){var t=this;window.scrollTo(0,0);var e=s().nocols,i=s().hud;this.numCols=e,this.numberOfColumns=void 0!=e?parseInt(e):3,this.hudStart=void 0!=i?parseInt(i):1,o(this.numberOfColumns,this.hudStart),window.onresize=function(e){r.call(t)},document.getElementById("loading-text").innerHTML=""}()});
define(["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/modifiers/StateModifier","famous/transitions/Easing","famous/transitions/Transitionable","famous/core/Modifier","famous/surfaces/ImageSurface","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/Scrollview","famous/core/RenderNode","famous/modifiers/Draggable","views/ColumnNumberButtons","audio/AudioEnable"],function(e,o,n){function r(e,o,n){u.apply(this,arguments);var r=this;this.appViewRef=o,this.hudToggle=1==e,this.audioEnable=new x({hud:this,context:window.audioContext}),this.hudReveal=60,this.zTransform=600,this.rootModifier=new c({size:[void 0,void 0],origin:[0,0],align:[0,0],transform:l.translate(0,2e3,0)}),this.rootModifier.setTransform(l.translate(0,0,0),{duration:1700,curve:"easeInOut"}),this.mainNode=this.add(this.rootModifier),this.hudHeight=.66*window.innerHeight+r.hudReveal,this.hudTopHeight=window.innerHeight-this.hudHeight,this.hudStartPostion=window.innerHeight-this.hudHeight,this.hudContainer=new w({size:[void 0,r.hudHeight],properties:{pointerEvents:"none",zIndex:100}}),this.state=new f(0);var i=new p({transform:function(){var e=r.state.get(),o=r.hudStartPostion+r.hudHeight*e-r.hudReveal*e;return l.translate(0,o,5)}}),m=new p({transform:function(){var e=r.state.get(),o=-r.hudHeight-r.hudHeight*e;return l.translate(0,o,5)}});this.hudBg=new h({classes:["hud-bg","title"],content:"AN ALDEBURGH MUSICIRCUS",properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"rgba(255,255,255,0.9)",color:"#000",padding:"17px 20px"}}),this.hudTopBg=new h({classes:["hud-bg"],properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"rgba(0,0,0,0.5)",color:"#000",padding:"30px",fontWeight:"bold"}});new h({content:"Click anywhere to begin",properties:{pointerEvents:"all",cursor:"pointer",backgroundColor:"#00ee00",color:"#333",padding:"30px",textAlign:"center",lineHeight:"20px",border:"1px solid gray",borderRadius:"20px"}}),new c({size:[300,150],origin:[.5,.5],align:[.5,.5]});this.columnNumberButtons=new y({columnCount:n,autoPlay:this.appViewRef.toggleAutomaticResize,appView:this.appViewRef});var b=(new h({size:[370,340],properties:{textAlign:"left",lineHeight:this.HEIGHT+"px",pointerEvents:"all",fontSize:"24px",backgroundColor:"#EDEDE5",border:"1px solid gray",borderRadius:"10px",zIndex:1}}),new p({transform:function(){return l.translate(-228,-110,0)}}),new c({transform:l.translate(0,this.hudReveal,0)}));this.mainNode.add(i).add(this.hudContainer),this.hudContainer.add(this.hudBg),this.hudContainer.add(b).add(this.columnNumberButtons),this.mainNode.add(m).add(this.hudTopBg),t.call(this),a.call(this),d.call(this),s.call(this),0==this.hudToggle&&this.state.set(1,{duration:700,curve:g.outBounce})}function t(){var e=this;if(!WURFL.is_mobile){var o,n,r,t=new m({size:[150,33],content:"images/BRITTEN_PEARS_ARTS.png",properties:{zIndex:2,cursor:"pointer",pointerEvents:"all"}});WURFL.is_mobile?(o=[1,1],n=[1,1],r=[-5,0,0]):(o=[1,0],n=[1,.015],r=[-17,1,0]);var i=new p({origin:o,align:n,transform:l.translate(r[0],r[1],r[2])});e.hudContainer.add(i).add(t),t.on("click",function(){window.open("https://snapemaltings.co.uk/","_blank")})}var a,s,d;if(WURFL.is_mobile){var u=new h({size:[window.innerWidth,20],content:"Co-commissioned by Aldeburgh Music and The Space, designed and developed by Avco",classes:["avco-credit"],properties:{zIndex:2,cursor:"none",pointerEvents:"all",textAlign:"left"}});a=[0,0],s=[.05,1],d=[0,-15,0]}else{var u=new h({size:[250,20],content:"Designed and developed by AVCO",classes:["avco-credit"],properties:{zIndex:2,cursor:"pointer",pointerEvents:"all",textAlign:"left"}});a=[0,1],s=[.05,1],d=[0,0,0]}if(!WURFL.is_mobile){var c=new p({origin:a,align:s,transform:l.translate(d[0],d[1],d[2])});e.hudContainer.add(c).add(u),u.on("click",function(){window.open("http://www.avco.com/","_blank")})}}function a(){var e,o=this;e=WURFL.is_mobile?[.9,0]:[.5,0],this.openClose=new w({size:[50,50],properties:{zIndex:2,pointerEvents:"none"}});var n=new h({size:[30,6],properties:{zIndex:2,backgroundColor:"#333",borderRadius:"3px",pointerEvents:"none"}}),r=new p({origin:[.5,.5],align:[.5,0],transform:function(){var e=45*(1-o.state.get());return l.rotateZ(e*Math.PI/180)}}),t=new p({transform:function(){var e=-5*o.state.get();return l.translate(0,e,0)}}),i=new h({size:[30,6],properties:{zIndex:2,backgroundColor:"#333",borderRadius:"3px",pointerEvents:"none"}}),a=new p({origin:[.5,.5],align:[.5,0],transform:function(){var e=45*-(1-o.state.get());return l.rotateZ(e*Math.PI/180)}}),s=new p({transform:function(){var e=5*o.state.get();return l.translate(0,e,0)}});this.openCloseModifier=new p({origin:[.5,0],align:e,transform:function(){return l.translate(0,31,0)}}),this.openClose.add(r).add(t).add(n),this.openClose.add(a).add(s).add(i),this.hudContainer.add(this.openCloseModifier).add(this.openClose)}function s(){function e(e){if(this.hudToggle){if(this.state.set(1,{duration:800,curve:g.outBounce}),this.hudToggle=!1,!WURFL.is_mobile){for(i=0;i<window.scrollSurfaces.length;i++)window.scrollSurfaces[i].setClasses(["scroll-surface"]);for(i=0;i<window.handles.length;i++)window.handles[i].setClasses(["handle-surface"])}}else if(this.state.set(0,{duration:800,curve:g.outBounce}),this.hudToggle=!0,!WURFL.is_mobile){for(i=0;i<window.scrollSurfaces.length;i++)window.scrollSurfaces[i].setClasses(["scroll-surface-blur"]);for(i=0;i<window.handles.length;i++)window.handles[i].setClasses(["handle-surface-blur"])}WURFL.is_mobile&&(this.audioEnable.unlockAudio.call(this.audioEnable),this.audioUnlocked=!0)}var o=this;window.debug?(this.hudBg.on("mouseup",function(n){n=n||window.event,e.call(o,n)},!1),this.hudTopBg.on("mouseup",function(n){n=n||window.event,e.call(o,n)},!1)):WURFL.is_mobile?(this.hudBg.on("touchend",function(n){n=n||window.event,e.call(o,n)},!1),this.hudTopBg.on("touchend",function(n){n=n||window.event,e.call(o,n)},!1)):(this.hudBg.on("mouseup",function(n){n=n||window.event,e.call(o,n)},!1),this.hudTopBg.on("mouseup",function(n){n=n||window.event,e.call(o,n)},!1))}function d(){var e,o,n,r=this;WURFL.is_mobile?window.portrait?(e=[window.innerWidth-40,this.hudHeight-190],o=[.5,0],n=[.5,.2]):(e=[window.innerWidth/2,this.hudHeight-this.hudReveal-50],o=[0,0],n=[.05,0]):window.ie?(e=[window.innerWidth/2,this.hudHeight-this.hudReveal-170],o=[0,0],n=[.05,0]):(e=[window.innerWidth/2,this.hudHeight-this.hudReveal-40],o=[0,0],n=[.05,0]);var t,i=new w({classes:["infobox-container"],size:e,properties:{textAlign:"left",lineHeight:this.HEIGHT+"px",pointerEvents:"all",fontSize:"24px",border:"1px solid gray",borderRadius:"5px",padding:"40px",overflowY:"auto"}}),a=new p({origin:o,align:n,transform:function(){return l.translate(0,r.hudReveal+4,0)}});t=WURFL.is_mobile?window.safari?"<strong>NOTE:</strong> You are seeing a version without videos becuase you are using the Safari browser on OSX.<br /><br />                 To view the version with videos you need to use the Chrome browser which you can <a class='download-chrome' href='http://www.google.co.uk/intl/en_uk/chrome/browser/'>download here</a>                 or Firefox which you can <a class='download-chrome' href='https://www.mozilla.org/en-GB/firefox/new/'>download here.</a><br /><br />                 <strong>GET STARTED</strong><br /><br />                1. Click on the grey vertical borders and drag left or right to change volume and video size.<br /><br />                 2. Click on the coloured blocks and drag up or down to choose a different video.<br /><br />                 3. Choose 'demo mode' to automatically resize the columns.<br /><br />                 4. Click 'new music selection' to load a fresh set of performances.<br /><br />                 <br />                 <strong>Welcome to An Aldeburgh Musicircus, an online experience giving you the chance to mix your own John Cage happening.</strong><br /><br />                 In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,                 where as many musicians, speakers and dancers as he could gather would give different performances simultaneously                 and in close proximity. Audience members would wander around the space to create their own unique concert experiences,                 with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.                 In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />                 Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for                 two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from                 Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school                 choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />                 Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.                 You’ll find more than 40 performances. You can also load a new selection of performances and                 permutations by clicking the ‘new music selction’ button.<br /><br />                 Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />":"<strong>GET STARTED</strong><br /><br />                1. Drag the grey vertical borders left or right to change volume and image size.<br /><br />                 2. Drag the coloured blocks up or down to choose a different performance.<br /><br />                 3. Choose 'demo mode' to automatically resize the columns.<br /><br />                 4. Rotate your device to switch between 2 and 3 columns.<br /><br />                 <br />                 <strong>Welcome to An Aldeburgh Musicircus, an online app giving you the chance to mix your own John Cage happening.</strong><br /><br />                 In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,                 where as many musicians, speakers and dancers as he could gather would give different performances simultaneously                 and in close proximity. Audience members would wander around the space to create their own unique concert experiences,                 with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.                 In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />                 Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for                 two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from                 Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school                 choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />                 Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.                 You’ll find more than 40 performances and you can choose whether you listen to 2 or 3 at a time. You can also load a new selection of performances and                 permutations by clicking the ‘new music selction’ button.<br /><br />                 Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />":"<strong>GET STARTED</strong><br /><br />            1. Click on the grey vertical borders and drag left or right to change volume and video size.<br /><br />             2. Click on the coloured blocks and drag up or down to choose a different video.<br /><br />             3. Choose 'demo mode' to automatically resize the columns.<br /><br />             4. Click 'new video selection' to load a fresh set of performances.<br /><br />             <br />             <strong>Welcome to An Aldeburgh Musicircus, an online app giving you the chance to mix your own John Cage happening.</strong><br /><br />             In the 1960s the influential American composer John Cage began organising happenings under the title ‘Musicircus’,             where as many musicians, speakers and dancers as he could gather would give different performances simultaneously             and in close proximity. Audience members would wander around the space to create their own unique concert experiences,             with their ears gradually making sense out of the apparent chaos and with the bleed between performances creating a spectacular range of sounds.             In the words of Cage, ‘you won’t hear a thing. You’ll hear EVERYTHING.’<br /><br />             Inspired by and expanding the Musicircus idea, the largest gathering of musicians in Aldeburgh’s history came together for             two hours on 22 June 2014 as the centrepiece of the 67th Aldeburgh Festival. Approximately 1,000 performers took part, from             Festival artistic director Pierre-Laurent Aimard and the City of Birmingham Symphony Orchestra to Suffolk folk bands, school             choirs and a bellydance troupe, turning the town into a resounding mass of sound.<br /><br />             Here you’ll find a way to create your own Musicircus experience digitally, working with variable levels of chaos and control.             You’ll find more than 40 performances and you can choose whether you listen to 2, 3 or 4 at a time. You can also load a new selection of performances and             permutations by clicking the ‘new video selection’ button.<br /><br />             Have a play and see what combinations of sight and sound you find interesting. We hope you enjoy it!<br /><br /><br />";var s=new b,d=[];s.sequenceFrom(d),surface=new h({classes:["infobox-surface"],size:[void 0,!0],content:t,properties:{fontSize:"16px"}}),WURFL.is_mobile?(surface.pipe(s),surface.node=new v,surface.mod=new p,surface.mod.sizeFrom(function(){return target=surface._currTarget,target?[void 0,target.offsetHeight]:[void 0,!0]}),surface.node.add(surface.mod).add(surface),d.push(surface.node),i.add(s)):i.add(surface),this.hudContainer.add(a).add(i)}var u=e("famous/core/View"),h=e("famous/core/Surface"),l=e("famous/core/Transform"),c=e("famous/modifiers/StateModifier"),g=e("famous/transitions/Easing"),f=e("famous/transitions/Transitionable"),p=e("famous/core/Modifier"),m=e("famous/surfaces/ImageSurface"),h=e("famous/core/Surface"),w=e("famous/surfaces/ContainerSurface"),b=e("famous/views/Scrollview"),v=e("famous/core/RenderNode"),y=(e("famous/modifiers/Draggable"),e("views/ColumnNumberButtons")),x=e("audio/AudioEnable");r.prototype=Object.create(u.prototype),r.prototype.constructor=r,r.prototype.startSound=function(){},r.DEFAULT_OPTIONS={size:[void 0,500]},r.prototype.disable=function(){this.hudContainer.setProperties({pointerEvents:"none"}),this.hudBg.setProperties({pointerEvents:"none"}),this.hudTopBg.setProperties({pointerEvents:"none"})},r.prototype.enable=function(){this.hudContainer.setProperties({pointerEvents:"all"}),this.hudBg.setProperties({pointerEvents:"all"}),this.hudTopBg.setProperties({pointerEvents:"all"})},r.prototype.reload=function(e){this.rootModifier.setTransform(l.translate(0,2e3,0),{duration:e,curve:"easeInOut"})},n.exports=r});
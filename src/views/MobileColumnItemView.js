define(["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/RenderController","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/surfaces/ImageSurface","famous/transitions/Transitionable","famous/transitions/SpringTransition","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/modifiers/Draggable","audio/AudioPlayer"],function(o,t,i){function e(){a.apply(this,arguments),this.rootModifier=new l({size:[void 0,this.options.size[1]],align:[0,0],origin:[0,0]}),this.mainNode=this.add(this.rootModifier),this.isMobile=this.options.isMobile,this.itemPhoto,this.context=this.options.audioContext,this.audioPlayer=new m({size:[void 0,this.options.size[1]],hud:this,context:this.context,url:this.options.audio,itemBackgroundColor:this.options.itemBackgroundColor,parent:this,imageHieght:this.options.size[1]-this.options.margin}),this.background=new u({content:"background",size:[void 0,this.options.size[1]-this.options.margin],properties:{backgroundColor:this.options.itemBackgroundColor,textAlign:"center",pointerEvents:"none"}}),this.playing=!1,this.mainNode.add(this.background),this.background.pipe(this._eventOutput),this.isMobile,this.pointerEvents="none",s.call(this),n.call(this)}function s(){var o=this,t=10+(o.options.gutterWidth+2)/2+"px",i=10+(o.options.gutterWidth+2)/2+"px";switch(o.options.numberColumns){case 2:0==o.options.columnNumber?(t="10px",i=10+(o.options.gutterWidth+2)/2+"px"):(t=String(10+(o.options.gutterWidth+2)/2)+"px",i="10px");break;case 3:0==o.options.columnNumber&&(t="10px",i=10+(o.options.gutterWidth+2)/2+"px"),2==o.options.columnNumber&&(t=10+(o.options.gutterWidth+2)/2+"px",i="10px");break;case 4:0==o.options.columnNumber&&(t="10px",i=10+(o.options.gutterWidth+2)/2+"px"),3==o.options.columnNumber&&(t=10+(o.options.gutterWidth+2)/2+"px",i="10px")}this.titleSurface=new r({content:this.options.playerTitle,size:[void 0,!0],properties:{backgroundColor:"hsl(10,10,10)",lineHeight:"20px",textAlign:"center",zIndex:10,pointerEvents:"none",userSelect:"none",paddingLeft:t,paddingRight:i},classes:["youtube-title",o.options.darkOrLight]});var e=new l({origin:[.5,0],align:[.5,.05]});this.background.add(e).add(this.titleSurface)}function n(){this.itemPhoto=new h({size:[void 0,!0],content:"images/photos/"+this.options.photoUrl,properties:{zIndex:2,pointerEvents:"none",display:"block"}});var o=new d({origin:[0,.5],align:[0,.5],opacity:function(){}}),t=new d({transform:function(){return p.translate(0,0,10)}}),i=this.background.add(o);i.add(this.itemPhoto),i.add(t).add(this.audioPlayer)}var a=o("famous/core/View"),r=o("famous/core/Surface"),u=o("famous/surfaces/ContainerSurface"),p=(o("famous/views/RenderController"),o("famous/core/Transform")),d=o("famous/core/Modifier"),l=o("famous/modifiers/StateModifier"),h=o("famous/surfaces/ImageSurface"),c=o("famous/transitions/Transitionable"),f=o("famous/transitions/SpringTransition"),m=(o("famous/inputs/MouseSync"),o("famous/inputs/TouchSync"),o("famous/modifiers/Draggable"),o("audio/AudioPlayer"));c.registerMethod("spring",f);e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.DEFAULT_OPTIONS={size:[void 0,!0],align:[0,0],playerId:"player",title:"title",id:0,playerSize:[100,100],xpos:0,ypos:0,parent:this,isMobile:!1,audioContext:"audioContext",audio:"audio",darkOrLight:"darkOrLight",photoUrl:"url"};e.prototype.audioEnded=function(){this.options.parent.snapRandomPlay.call(this.options.parent)},e.prototype.changeVolume=function(o){this.audioPlayer.changeVolume(o/100)},e.prototype.pauseMedia=function(o){this.stopAudio.call(this)},e.prototype.setVolume=function(o){this.volume=o,this.audioPlayer.setVolume(o/100)},e.prototype.startAudio=function(o){this.stopAudio(),this.audioPlayer.playable=!0,this.audioPlayer.setVolume(o/100),this.audioPlayer.loadBuffers()},e.prototype.stopAudio=function(){this.audioPlayer.playable=!1,this.audioPlayer.stop.call(this.audioPlayer)},i.exports=e});